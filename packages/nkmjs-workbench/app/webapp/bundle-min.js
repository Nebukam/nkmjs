"use strict";function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_gPO(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function set(target,property,value,receiver){if(typeof Reflect!=="undefined"&&Reflect.set){set=Reflect.set}else{set=function set(target,property,value,receiver){var base=_superPropb_(target,property);var desc;if(base){desc=Object.getOwnPropertyDescriptor(base,property);if(desc.set){desc.set.call(receiver,value);return true}else if(!desc.writable){return false}}desc=Object.getOwnPropertyDescriptor(receiver,property);if(desc){if(!desc.writable){return false}desc.value=value;Object.defineProperty(receiver,property,desc)}else{_defineProperty(receiver,property,value)}return true}}return set(target,property,value,receiver)}function _set(target,property,value,receiver,isStrict){var s=set(target,property,value,receiver||target);if(!s&&isStrict){throw new Error("failed to set property")}return value}function _toConsumableArray(arr){return _arraywoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="S")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arraywoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _cC(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropb_(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropb_(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_gPO(object);if(object===null)break}return object}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _cSI(){var Super=_gPO(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_gPO(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInialized(self)}function _assertThisInialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _gPO(o){_gPO=Object.setPrototypeOf?Object.getPrototypeOf:function _gPO(o){return o.__proto__||Object.getPrototypeOf(o)};return _gPO(o)}function _cCC(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof rq&&rq;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find mdl '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={xp:{}};e[i][0].call(p.xp,(function(r){var n=e[i][1][r];return o(n||r)}),p,p.xp,r,e,n,t)}return n[i].xp}for(var u="function"==typeof rq&&rq,i=0;i<t.length;i++){o(t[i])}return o}return r})()({1:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={RELAY:rq(0),Request:rq(1),ACTION_REQUEST:rq(2),Action:rq(3),ActionGroup:rq(4),ActionStack:rq(5),COMMAND_SIGNAL:rq(6),Command:rq(7),CommandFn:rq(8),CommandBox:rq(9),CommandChain:rq(10),CommandAction:rq(11)}},{2:2,3:5,4:3,5:4,7:12,11:7,9:8,10:9,6:10,8:11,0:13,1:14}],2:[function(rq,mdl,xp){"use strict";var ACTION_REQUEST=function ACTION_REQUEST(){_cCC(this,ACTION_REQUEST)};_defineProperty(ACTION_REQUEST,"EXIT","exit");_defineProperty(ACTION_REQUEST,"EDIT","edit");_defineProperty(ACTION_REQUEST,"PREVIEW","preview");_defineProperty(ACTION_REQUEST,"OPEN","open");_defineProperty(ACTION_REQUEST,"CLOSE","close");_defineProperty(ACTION_REQUEST,"CREATE","create");_defineProperty(ACTION_REQUEST,"SAVE","save");_defineProperty(ACTION_REQUEST,"DELETE","delete");_defineProperty(ACTION_REQUEST,"RENAME","rename");_defineProperty(ACTION_REQUEST,"APPLY","apply");_defineProperty(ACTION_REQUEST,"DIALOG","dialog");mdl.xp["default"]=mdl.xp=ACTION_REQUEST},{}],3:[function(rq,mdl,xp){"use strict";var Action=rq(12);var ActionGroup=function(_Action){_inherits(ActionGroup,_Action);var _super=_createSuper(ActionGroup);function ActionGroup(){_cCC(this,ActionGroup);return _super.call(this)}_cC(ActionGroup,[{key:"_In",value:function _In(){_get(_gPO(ActionGroup.prototype),"_In",this).call(this);this._actions=new Array(0);this._last=null}},{key:"last",get:function get(){return this._last}},{key:"_Register",value:function _Register(p_action){this._actions.push(p_action);this._last=p_action;return p_action}},{key:"Do",value:function Do(p_operation){var p_merge=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false}},{key:"_InternalDo",value:function _InternalDo(p_operation){var p_merge=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false}},{key:"_InternalUndo",value:function _InternalUndo(){var list=this._actions;for(var i=list.length-1;i>=0;i--){list[i].Undo()}}},{key:"_InternalRedo",value:function _InternalRedo(){var list=this._actions;for(var i=0,n=list.length;i<n;i++){list[i].Redo()}}},{key:"_CleanUp",value:function _CleanUp(){this._last=null;var list=this._actions;while(list.length!=0){list.pop().Release()}this._actions.length=0;_get(_gPO(ActionGroup.prototype),"_CleanUp",this).call(this)}}],[{key:"mergeable",get:function get(){return false}}]);return ActionGroup}(Action);mdl.xp["default"]=mdl.xp=ActionGroup},{12:5}],4:[function(rq,mdl,xp){"use strict";var _rq=rq(13),U=_rq.U;var _rq2=rq(14),POOL=_rq2.POOL;var ActionGroup=rq(15);var ActionStack=function(){function ActionStack(){_cCC(this,ActionStack);this._In();this._pIn()}_cC(ActionStack,[{key:"_In",value:function _In(){this._maxCount=-1;this._headIndex=-1;this._stack=new Array(0);this._isEnabled=true;this._groupingActive=false;this._group=null}},{key:"_pIn",value:function _pIn(){}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(v){if(v){this.Enable()}else{this.Disable()}}},{key:"Enable",value:function Enable(){if(this._isEnabled){return false}this._isEnabled=true;return true}},{key:"Disable",value:function Disable(){if(!this._isEnabled){return false}this._isEnabled=false;return true}},{key:"ToggleGrouping",value:function ToggleGrouping(p_toggle){if(this._groupingActive===p_toggle){return}this._groupingActive=p_toggle;if(!p_toggle&&this._group){this._group=null}}},{key:"Do",value:function Do(p_actionClass,p_operation){if(!this._isEnabled){return null}if(this._groupingActive){if(!this._group){this._group=this._Register(POOL.Rt(ActionGroup))}}var lastAction;if(this._group){lastAction=this._group.last}else{lastAction=this._stack.length>0?this._stack[this._stack.length-1]:null}if(p_actionClass.mergeable){if(U.isInstanceOf(lastAction,p_actionClass)){if(lastAction.CanMerge(p_operation)){return lastAction.Do(p_operation,true)}}}if(this._group){return this._group._Register(POOL.Rt(p_actionClass).Do(p_operation,false))}else{return this._Register(POOL.Rt(p_actionClass).Do(p_operation,false))}}},{key:"_Register",value:function _Register(p_action){var stack=this._stack;if(this._headIndex!=stack.length-1){var index=this._headIndex+1;for(var i=index;i<stack.length;i++){stack[i].Release()}stack.length=index}stack.push(p_action);this._headIndex=stack.length-1;return p_action}},{key:"Undo",value:function Undo(){var stack=this._stack;if(stack.length===0){return}var index=this._headIndex;if(index===-1){return}var action=stack[index];this._headIndex=index-1;action.Undo()}},{key:"Redo",value:function Redo(){if(this._stack.length===0){return}var index=this._headIndex;index+=1;if(index>=this._stack.length){return}var action=this._stack[index];this._headIndex=index;action.Redo()}},{key:"Clear",value:function Clear(){this.ToggleGrouping(false);var stack=this._stack;while(stack.length!=0){stack.pop().Release()}stack.length=0;this._headIndex=-1;this._groupingActive=false}}]);return ActionStack}();mdl.xp["default"]=mdl.xp=ActionStack},{15:3,14:27,13:268}],5:[function(rq,mdl,xp){"use strict";var _rq3=rq(14),__dO=_rq3.__dO;var Action=function(___dO){_inherits(Action,___dO);var _super2=_createSuper(Action);function Action(){_cCC(this,Action);return _super2.call(this)}_cC(Action,[{key:"_In",value:function _In(){_get(_gPO(Action.prototype),"_In",this).call(this);this._operation=null;this._undoed=false}},{key:"operation",get:function get(){return this._operation}},{key:"CanMerge",value:function CanMerge(p_operation){return false}},{key:"Do",value:function Do(p_operation){var p_merge=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!p_merge){this._operation=p_operation}this._InternalDo(p_operation,p_merge);return this}},{key:"Undo",value:function Undo(){this._undoed=true;this._InternalUndo()}},{key:"Redo",value:function Redo(){this._undoed=false;this._InternalRedo()}},{key:"_InternalDo",value:function _InternalDo(p_operation){var p_merge=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false}},{key:"_InternalUndo",value:function _InternalUndo(){}},{key:"_InternalRedo",value:function _InternalRedo(){}},{key:"_CleanUp",value:function _CleanUp(){this._operation=null;this._undoed=false;_get(_gPO(Action.prototype),"_CleanUp",this).call(this)}}],[{key:"mergeable",get:function get(){return false}}]);return Action}(__dO);mdl.xp["default"]=mdl.xp=Action},{14:27}],6:[function(rq,mdl,xp){"use strict";var _rq4=rq(13),U=_rq4.U;var _rq5=rq(14),S=_rq5.S,POOL=_rq5.POOL,__dOEx=_rq5.__dOEx;var COMMAND_SIGNAL=rq(16);var Command=function(___dOEx){_inherits(Command,___dOEx);var _super3=_createSuper(Command);function Command(){_cCC(this,Command);return _super3.call(this)}_cC(Command,[{key:"_In",value:function _In(){_get(_gPO(Command.prototype),"_In",this).call(this);this._icon="";this._name=U.CamelSplit(this.constructor.name);this._isEnabled=true;this._context=null;this._emitter=null;this._order=0;this._running=false}},{key:"running",get:function get(){return this._running}},{key:"order",get:function get(){return this._order},set:function set(v){this._order=v}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._icon=v}},{key:"name",get:function get(){return this._name},set:function set(v){this._name=v}},{key:"emitter",get:function get(){return this._emitter},set:function set(v){if(this._emitter===v){return}var oldEmitter=this._emitter;this._emitter=v;if(oldEmitter){oldEmitter.Uw(S.RELEASED,this._OnEmitterReleased,this)}if(v){v.W(S.RELEASED,this._OnEmitterReleased,this)}}},{key:"_OnEmitterReleased",value:function _OnEmitterReleased(p_emitter){this.emitter=null}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(v){if(v){this.Enable()}else{this.Disable()}}},{key:"Enable",value:function Enable(){if(this._isEnabled){return false}this._isEnabled=true;this._B(S.UPDATED,this);return true}},{key:"Disable",value:function Disable(){if(!this._isEnabled){return false}this._isEnabled=false;this._B(S.UPDATED,this);return true}},{key:"context",get:function get(){return this._context},set:function set(v){var sanitizedValue=this._SanitizeContext(v);if(this._context===sanitizedValue){return}this._context=sanitizedValue;this._OnContextCh();this.enabled=this.CanExecute(this._context)}},{key:"_SanitizeContext",value:function _SanitizeContext(p_context){return p_context}},{key:"_OnContextCh",value:function _OnContextCh(){}},{key:"CanExecute",value:function CanExecute(p_context){return true}},{key:"Execute",value:function Execute(p_context){if(this._running){return}this.context=U.Default(p_context,this._context);if(!this._isEnabled){return}this._Start();this._InternalExecute()}},{key:"_InternalExecute",value:function _InternalExecute(){}},{key:"_InternalCancel",value:function _InternalCancel(){}},{key:"_Start",value:function _Start(){if(this._running){return}this._running=true;this._B(COMMAND_SIGNAL.START,this);this._B(S.UPDATED,this)}},{key:"_Success",value:function _Success(){this._B(COMMAND_SIGNAL.SUCCESS,this);this._End()}},{key:"_Fail",value:function _Fail(p_msg){console.error("".concat(this," failed : ").concat(p_msg));this._B(COMMAND_SIGNAL.FAIL,this,p_msg);this._End()}},{key:"Cancel",value:function Cancel(){if(!this._running){return}this._Cancel()}},{key:"_Cancel",value:function _Cancel(){this._InternalCancel();this._B(COMMAND_SIGNAL.CANCEL,this);this._End()}},{key:"_End",value:function _End(){this._running=false;this._B(COMMAND_SIGNAL.END,this);this._B(S.UPDATED,this)}},{key:"_CleanUp",value:function _CleanUp(){this.Cancel();this._icon="";this._isEnabled=true;this.context=null;this.emitter=null;this.order=0;_get(_gPO(Command.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[>>".concat(this.constructor.name,"]")}}],[{key:"Rt",value:function Rt(p_class){var p_name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_icon=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var cmd=POOL.Rt(p_class);cmd.name=U.isEmpty(p_name)?U.CamelSplit(p_class.name):p_name;cmd.icon=U.isEmpty(p_icon)?"%ICON%/icon_cmd.svg":p_icon;return cmd}}]);return Command}(__dOEx);mdl.xp["default"]=mdl.xp=Command},{16:10,14:27,13:268}],7:[function(rq,mdl,xp){"use strict";var _rq6=rq(13),U=_rq6.U;var _rq7=rq(14),POOL=_rq7.POOL;var COMMAND_SIGNAL=rq(16);var Command=rq(17);var _COMMAND_ACTION=null;var CommandAction=function(_Command){_inherits(CommandAction,_Command);var _super4=_createSuper(CommandAction);function CommandAction(){_cCC(this,CommandAction);return _super4.call(this)}_cC(CommandAction,[{key:"_In",value:function _In(){_get(_gPO(CommandAction.prototype),"_In",this).call(this);this._actionClass=null}},{key:"actionClass",get:function get(){return this._actionClass},set:function set(v){this._actionClass=v}},{key:"CanExecute",value:function CanExecute(p_context){if(!p_context||!this._actionClass){return false}return true}},{key:"_InternalExecute",value:function _InternalExecute(){var editor=null;if(this._emitter){editor=this._emitter.editor;if(!editor){var editorClass=POOL.GClass("Editor"),p=this._emitter;while(!editor&&p){if(U.isInstanceOf(p,editorClass)){editor=p}p=p.parent}}}if(editor){editor.Do(this._actionClass,this._context)}else{POOL.Rt(this._actionClass).Do(this._context,false).Release()}this._Success()}},{key:"_CleanUp",value:function _CleanUp(){this._actionClass=null;_get(_gPO(CommandAction.prototype),"_CleanUp",this).call(this)}}],[{key:"Do",value:function Do(){var p_emitter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_actionClass=arguments.length>1?arguments[1]:undefined;var p_operation=arguments.length>2?arguments[2]:undefined;var A=this._COMMAND_ACTION;if(!A){A=this._COMMAND_ACTION=new CommandAction}A.emitter=p_emitter;A.actionClass=p_actionClass;A.Execute(p_operation)}}]);return CommandAction}(Command);mdl.xp["default"]=mdl.xp=CommandAction},{17:12,16:10,14:27,13:268}],8:[function(rq,mdl,xp){"use strict";var _rq8=rq(13),U=_rq8.U;var _rq9=rq(18),List=_rq9.List,Dictionary=_rq9.Dictionary;var Command=rq(17);var CommandBox=function(){function CommandBox(){var p_onRegister=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_cCC(this,CommandBox);this._context=null;this._commandList=new List(0);this._commandHs=new Dictionary;this._onRegisterCmd=p_onRegister}_cC(CommandBox,[{key:"list",get:function get(){return this._commandList}},{key:"context",get:function get(){return this._context},set:function set(v){this._context=v;var cmdList=this._commandList;for(var i=0,n=cmdList.count;i<n;i++){cmdList.At(i).context=v}}},{key:"Create",value:function Create(p_class){var p_name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_icon=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var p_hooks=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var cmd=Command.Rt(p_class,p_name,p_icon);this._Register(cmd,p_hooks);return cmd}},{key:"_Register",value:function _Register(p_cmd){var p_hooks=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(this._commandList.A(p_cmd)){if(p_hooks){this._commandHs.S(p_cmd,p_hooks);for(var i=0,n=p_hooks.length;i<n;i++){var hook=p_hooks[i];p_cmd.W(hook.evt,hook.fn,U.Default(hook.thisArg,null))}}this._OnCommandRegistered(p_cmd)}}},{key:"_OnCommandRegistered",value:function _OnCommandRegistered(p_cmd){p_cmd.context=this._context;if(this._onRegisterCmd){this._onRegisterCmd.call(null,p_cmd)}}},{key:"RMCommand",value:function RMCommand(p_cmd){if(this._commandList.RM(p_cmd)){var hooks=this._commandHs.G(p_cmd);if(hooks){this._commandHs.RM(p_cmd);for(var i=0,n=p_hooks.length;i<n;i++){var hook=p_hooks[i];p_cmd.Uw(hook.evt,hook.fn,U.Default(hook.thisArg,null))}}this._OnCommandRMd(p_cmd)}}},{key:"_OnCommandRMd",value:function _OnCommandRMd(p_cmd){p_cmd.context=null}}]);return CommandBox}();mdl.xp["default"]=mdl.xp=CommandBox},{17:12,18:21,13:268}],9:[function(rq,mdl,xp){"use strict";var _rq10=rq(13),U=_rq10.U;var _rq11=rq(14),S=_rq11.S,Observer=_rq11.Observer;var COMMAND_SIGNAL=rq(16);var Command=rq(17);var CommandChain=function(_Command2){_inherits(CommandChain,_Command2);var _super5=_createSuper(CommandChain);function CommandChain(){_cCC(this,CommandChain);return _super5.call(this)}_cC(CommandChain,[{key:"_In",value:function _In(){_get(_gPO(CommandChain.prototype),"_In",this).call(this);this._nodes=new Array(0);this._currentIndex=0;this._cmdObserver=new Observer;this._cmdObserver.H(COMMAND_SIGNAL.START,this._NodeStart,this);this._cmdObserver.H(COMMAND_SIGNAL.END,this._NodeEnd,this);this._cmdObserver.H(COMMAND_SIGNAL.SUCCESS,this._NodeSuccess,this);this._cmdObserver.H(COMMAND_SIGNAL.FAIL,this._NodeFail,this)}},{key:"_OnContextCh",value:function _OnContextCh(){_get(_gPO(CommandChain.prototype),"_OnContextCh",this).call(this);for(var i=0,n=this._nodes.length;i<n;i++){this._nodes[i].context=this._context}}},{key:"CanExecute",value:function CanExecute(p_context){var r=_get(_gPO(CommandChain.prototype),"CanExecute",this).call(this,p_context);if(!r){return false}for(var i=0,n=this._nodes.length;i<n;i++){if(!this._nodes[i].CanExecute(p_context)){return false}}return true}},{key:"Execute",value:function Execute(){var p_context=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this._running){return}this.context=U.Default(p_context,this._context);if(!this._isEnabled){return}this._Start();this._InternalExecute()}},{key:"_InternalExecute",value:function _InternalExecute(){this._currentIndex=-1;this._ExecuteNextIndex()}},{key:"_ExecuteNextIndex",value:function _ExecuteNextIndex(){this._currentIndex+=1;var l=this._nodes.length;if(this._currentIndex>=l){this._Success();return}var cmd=this._nodes[this._currentIndex];this._cmdObserver.ObserveOnly(cmd);cmd.Execute(this._context)}},{key:"_InternalCancel",value:function _InternalCancel(){}},{key:"_NodeStart",value:function _NodeStart(p_cmd){}},{key:"_NodeSuccess",value:function _NodeSuccess(p_cmd){this._ExecuteNextIndex()}},{key:"_NodeFail",value:function _NodeFail(p_cmd,p_msg){this._Fail(p_msg)}},{key:"_NodeEnd",value:function _NodeEnd(p_cmd){}},{key:"_Start",value:function _Start(){if(this._running){return}this._running=true;this._B(COMMAND_SIGNAL.START,this);this._B(S.UPDATED,this)}},{key:"_Success",value:function _Success(){this._B(COMMAND_SIGNAL.SUCCESS,this);this._End()}},{key:"_Fail",value:function _Fail(p_msg){this._B(COMMAND_SIGNAL.FAIL,this,p_msg);this._End()}},{key:"Cancel",value:function Cancel(){if(!this._running){return}this._Cancel()}},{key:"_Cancel",value:function _Cancel(){this._InternalCancel();this._B(COMMAND_SIGNAL.CANCEL,this);this._End()}},{key:"_End",value:function _End(){this._running=false;this._B(COMMAND_SIGNAL.END,this);this._B(S.UPDATED,this)}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(CommandChain.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[>>".concat(this.constructor.name,"]")}}]);return CommandChain}(Command);mdl.xp["default"]=mdl.xp=CommandChain},{17:12,16:10,14:27,13:268}],10:[function(rq,mdl,xp){"use strict";var COMMAND_SIGNAL=function COMMAND_SIGNAL(){_cCC(this,COMMAND_SIGNAL)};_defineProperty(COMMAND_SIGNAL,"SUCCESS",Symbol("success"));_defineProperty(COMMAND_SIGNAL,"FAIL",Symbol("fail"));_defineProperty(COMMAND_SIGNAL,"CANCEL",Symbol("cancel"));_defineProperty(COMMAND_SIGNAL,"START",Symbol("start"));_defineProperty(COMMAND_SIGNAL,"END",Symbol("end"));mdl.xp["default"]=mdl.xp=COMMAND_SIGNAL},{}],11:[function(rq,mdl,xp){"use strict";var _rq12=rq(13),U=_rq12.U;var _rq13=rq(14),S=_rq13.S,POOL=_rq13.POOL;var COMMAND_SIGNAL=rq(16);var Command=rq(19);var CommandFn=function(_Command3){_inherits(CommandFn,_Command3);var _super6=_createSuper(CommandFn);function CommandFn(){_cCC(this,CommandFn);return _super6.call(this)}_cC(CommandFn,[{key:"_In",value:function _In(){_get(_gPO(CommandFn.prototype),"_In",this).call(this);this._fn=null;this._thisArg=null;this._options=null}},{key:"thisArg",get:function get(){return this._thisArg},set:function set(v){this._thisArg=v}},{key:"fn",get:function get(){return this._fn},set:function set(v){this._fn=v}},{key:"options",get:function get(){return this._options},set:function set(v){this._options=v;this.fn=U.G(v,"fn",null);if(!this._fn){throw new Error("CommandFn options have no function defined.")}this.thisArg=U.G(v,"thisArg",null);this.name=U.G(v,"name",U.CamelSplit(this._fn.name));this.icon=U.G(v,"icon","%ICON%/icon_cmd.svg");this.order=U.G(v,"order",0)}},{key:"_InternalExecute",value:function _InternalExecute(){try{if(this._context){this._fn.call(this._thisArg,this._context)}else{this._fn.call(this._thisArg)}this._Success()}catch(e){this._Fail(e.message)}}}],[{key:"RtFn",value:function RtFn(o){var fn=U.G(o,"fn",null);if(!fn){throw new Error("Cannot create CommandFn with empty function")}var cmd=POOL.Rt(CommandFn);cmd.options=o;return cmd}}]);return CommandFn}(Command);mdl.xp["default"]=mdl.xp=CommandFn},{19:6,16:10,14:27,13:268}],12:[function(rq,mdl,xp){arguments[4][6][0].apply(xp,arguments)},{16:10,14:27,13:268,dup:6}],13:[function(rq,mdl,xp){"use strict";var _rq14=rq(13),LOG=_rq14.LOG;var _rq15=rq(18),List=_rq15.List;var _rq16=rq(20),Serviceb_=_rq16.Serviceb_;var RELAY=function(_Serviceb_){_inherits(RELAY,_Serviceb_);var _super7=_createSuper(RELAY);function RELAY(){_cCC(this,RELAY);return _super7.call(this)}_cC(RELAY,[{key:"_In",value:function _In(){_get(_gPO(RELAY.prototype),"_In",this).call(this);this._requests=new List}},{key:"HandleRequest",value:function HandleRequest(p_request){this._requests.A(p_request);this._B(p_request.requestType,p_request);this._tick.Schedule()}},{key:"_Tick",value:function _Tick(p_delta){_get(_gPO(RELAY.prototype),"_Tick",this).call(this,p_delta);var list=this._requests;for(var i=0;i<list.count;i++){var release=true,request=list.At(i);if(!request.handled){if(request.life>=request.timeout){request.HandleFail("timeout")}else{request.life+=p_delta;release=false}}if(release){request.Release();list.RMAt(i);i--}}}},{key:"_ipcOn",value:function _ipcOn(p_evt,p_fn){}},{key:"_ipcSend",value:function _ipcSend(p_evt){}},{key:"_ShowOpenDialog",value:function _ShowOpenDialog(o){return null}}],[{key:"HandleRequest",value:function HandleRequest(p_request){LOG._("⚡ ".concat(p_request),"color: #bebebe");this.instance.HandleRequest(p_request)}},{key:"B",value:function B(p_evt){var _this$instance;for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}(_this$instance=this.instance)._B.apply(_this$instance,[p_evt].concat(args))}},{key:"W",value:function W(p_evt,p_fn){var p_subscriber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.instance.W(p_evt,p_fn,p_subscriber)}},{key:"Uw",value:function Uw(p_evt,p_fn){var p_subscriber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.instance.Uw(p_evt,p_fn,p_subscriber)}},{key:"ipcOn",value:function ipcOn(p_evt,p_fn){this.instance._ipcOn(p_evt,p_fn)}},{key:"ipcSend",value:function ipcSend(p_evt){var _this$instance2;for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}(_this$instance2=this.instance)._ipcSend.apply(_this$instance2,[p_evt].concat(args))}},{key:"ShowOpenDialog",value:function ShowOpenDialog(o){return this.instance._ShowOpenDialog(o)}}]);return RELAY}(Serviceb_);mdl.xp["default"]=mdl.xp=RELAY},{18:21,20:150,13:268}],14:[function(rq,mdl,xp){"use strict";var _rq17=rq(14),POOL=_rq17.POOL,__dO=_rq17.__dO;var RELAY=rq(21);var Request=function(___dO2){_inherits(Request,___dO2);var _super8=_createSuper(Request);function Request(){_cCC(this,Request);return _super8.call(this)}_cC(Request,[{key:"_In",value:function _In(){_get(_gPO(Request.prototype),"_In",this).call(this);this._emitter=null;this._requestType=null;this._options=null;this._handled=false;this._handler=null;this._onFail=null;this._onSuccess=null;this._timeout=0;this._life=0;this._failReason=""}},{key:"requestType",get:function get(){return this._requestType},set:function set(v){this._requestType=v}},{key:"emitter",get:function get(){return this._emitter},set:function set(v){this._emitter=v}},{key:"onSuccess",get:function get(){return this._onSuccess},set:function set(v){this._onSuccess=v}},{key:"onFail",get:function get(){return this._onFail},set:function set(v){this._onFail=v}},{key:"_Success",value:function _Success(){if(this._onSuccess){this._onSuccess.call(this._emitter,this)}}},{key:"_Fail",value:function _Fail(p_reason){this._failReason=p_reason?p_reason:"undocumented";if(this._onFail){this._onFail.call(this._emitter,this)}}},{key:"timeout",get:function get(){return this._timeout},set:function set(v){this._timeout=v}},{key:"life",get:function get(){return this._life},set:function set(v){this._life=v}},{key:"options",get:function get(){return this._options},set:function set(v){this._options=v}},{key:"failReason",get:function get(){return this._failReason}},{key:"GOption",value:function GOption(p_id){var p_fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var opt=this._options;if(!opt||!opt.hasOwnProperty(p_id)){return p_fallback}return opt[p_id]}},{key:"handled",get:function get(){return this._handled}},{key:"HandleSuccess",value:function HandleSuccess(p_handler){if(this._handled){throw new Error("A request may not be handled twice.")}this._handled=true;this._handler=p_handler;this._Success()}},{key:"HandleFail",value:function HandleFail(p_reason){this._Fail(p_reason)}},{key:"_CleanUp",value:function _CleanUp(){this._emitter=null;this._requestType=null;this._options=null;this._handled=false;this._handler=null;this._onFail=null;this._onSuccess=null;this._timeout=0;this._life=0;_get(_gPO(Request.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"!".concat(this.constructor.name,":").concat(this._requestType,",").concat(this._emitter)}}],[{key:"Emit",value:function Emit(p_requestType){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_emitter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var p_onSuccess=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var p_onFail=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var p_timeout=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var p_requestClass=arguments.length>6&&arguments[6]!==undefined?arguments[6]:Request;var p_global=arguments.length>7&&arguments[7]!==undefined?arguments[7]:true;var request=POOL.Rt(p_requestClass);request.requestType=p_requestType;request.emitter=p_emitter;request.onFail=p_onFail;request.onSuccess=p_onSuccess;request.timeout=p_timeout;request.options=o;if(p_global){RELAY.HandleRequest(request)}return request}}]);return Request}(__dO);mdl.xp["default"]=mdl.xp=Request},{21:13,14:27}],15:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={APP_MESSAGES:rq(22),Appb_:rq(23)}},{23:16,22:17}],16:[function(rq,mdl,xp){"use strict";var _rq18=rq(13),U=_rq18.U,UDOM=_rq18.UDOM,PATH=_rq18.PATH,LOG=_rq18.LOG;var _rq19=rq(14),S=_rq19.S,TIME=_rq19.TIME,SingletonEx=_rq19.SingletonEx,POOL=_rq19.POOL;var _rq20=rq(24),ENV=_rq20.ENV,ENV_S=_rq20.ENV_S;var _rq21=rq(25),ACTION_REQUEST=_rq21.ACTION_REQUEST,RELAY=_rq21.RELAY,CommandBox=_rq21.CommandBox;var _rq22=rq(26),RESOURCES=_rq22.RESOURCES;var _rq23=rq(27),UI=_rq23.UI,LayerC_=_rq23.LayerC_;var _rq24=rq(28),DIALOG=_rq24.DIALOG;var _rq25=rq(29),Metadata=_rq25.Metadata;var _rq26=rq(30),DialogHandler=_rq26.DialogHandler;var _rq27=rq(31),AutoUDialogBox=_rq27.AutoUDialogBox;var APP_MESSAGES=rq(32);var UserPreferences=rq(33);var _rq28=rq(34),STYLE=_rq28.STYLE;var Appb_=function(_SingletonEx){_inherits(Appb_,_SingletonEx);var _super9=_createSuper(Appb_);function Appb_(){_cCC(this,Appb_);return _super9.call(this)}_cC(Appb_,[{key:"_In",value:function _In(){_get(_gPO(Appb_.prototype),"_In",this).call(this);this._APPID="".concat(this.constructor.name);this._darkPaletteBuilder=null;this._lightPaletteBuilder=null;this._userPreferences=POOL.Rt(UserPreferences);this._defaultUserPreferences={};this._mainWrapperClass=LayerC_;this._mainWrapper=null;this._layers=null;this._dialogHandlerClass=DialogHandler;this._dialogHandler=null;this._commands=new CommandBox;this._ipcBindings=[{evt:APP_MESSAGES.NODE_MESSAGE,fn:this._Bind(this._onNodeMessage)},{evt:APP_MESSAGES.NODE_ERROR,fn:this._Bind(this._onNodeError)},{evt:APP_MESSAGES.NODE_WARNING,fn:this._Bind(this._onNodeWarning)}];ENV.FEATURES.W(ENV_S.COLORSCHEME_CHANGED,this._OnColorschemeChange,this)}},{key:"_pIn",value:function _pIn(){_get(_gPO(Appb_.prototype),"_pIn",this).call(this);ENV.instance.RegisterServices(RELAY,RESOURCES,DIALOG);if(!this._mainWrapperClass){throw new Error("No app wrapper constructor defined.")}if(!U.isInstanceOf(this._mainWrapperClass,LayerC_)){throw new Error("App wrapper constructor (".concat(this._mainWrapperClass.name,") must implement LayerC_."))}}},{key:"mainWrapper",get:function get(){return this._mainWrapper}},{key:"userPreferences",get:function get(){return this._userPreferences}},{key:"SUp",value:function SUp(){LOG._("".concat(this._APPID," : SETUP"),"#339a6e","#212121");if(ENV.FEATURES.isNodeEnabled){this._RegisterIPCBindings()}this._mainWrapper=UI.Rt(this._mainWrapperClass);this._mainWrapper.setAttribute("id","app");UDOM.AttachFirst(UDOM.New("link",{href:STYLE.instance.current.GCSSLink("@/main.css"),rel:"stylesheet"}),this._mainWrapper._host);if(this._layers){for(var i=0,n=this._layers.length;i<n;i++){var conf=this._layers[i],layer=this._mainWrapper.A(conf.cl);if(conf.id){this[conf.id]=layer}}}this._dialogHandler=this._mainWrapper.A(this._dialogHandlerClass);RELAY.W(ACTION_REQUEST.DIALOG,this._HandleDialogRequest,this)}},{key:"_RegisterIPCBindings",value:function _RegisterIPCBindings(){var binding;for(var i=0,n=this._ipcBindings.length;i<n;i++){binding=this._ipcBindings[i];RELAY.ipcOn(binding.evt,binding.fn)}}},{key:"Start",value:function Start(){LOG._("".concat(this._APPID," : START"),"#339a6e","#212121");UDOM.New("link",{href:STYLE.instance.current.GCSSLink("@/main.css"),rel:"stylesheet"},document.head);UDOM.Attach(this._mainWrapper,document.body);this._userPreferences.Load("".concat(this._APPID,"Preferences"),this._defaultUserPreferences,this._Bind(this._InUserPreferences),this._Bind(this._OnAppReadyInternal))}},{key:"_InUserPreferences",value:function _InUserPreferences(p_userPreferences){}},{key:"_OnAppReadyInternal",value:function _OnAppReadyInternal(p_data){RELAY.instance.W(ACTION_REQUEST.EDIT,this._OnEditRequest,this);if(ENV.FEATURES.isNodeEnabled){if(false){DIALOG.Push({dialogClass:AutoUDialogBox})}}this.AppReady();LOG._("".concat(this._APPID," : READY"),"#030107","#339a6e")}},{key:"AppReady",value:function AppReady(p_data){}},{key:"_HandleDialogRequest",value:function _HandleDialogRequest(p_request){this._dialogHandler.HandleDialogRequest(p_request)}},{key:"_OnEditRequest",value:function _OnEditRequest(p_request){}},{key:"_OnColorschemeChange",value:function _OnColorschemeChange(){}},{key:"ReloadApp",value:function ReloadApp(){RELAY.ipcSend(APP_MESSAGES.DO_RELOAD_APP)}},{key:"OpenWindow",value:function OpenWindow(o){RELAY.ipcSend(APP_MESSAGES.DO_OPEN_WINDOW,o)}},{key:"CloseWindow",value:function CloseWindow(o){RELAY.ipcSend(APP_MESSAGES.DO_CLOSE_WINDOW,o)}},{key:"Print",value:function Print(o){RELAY.ipcSend(APP_MESSAGES.DO_PRINT_WINDOW,o)}},{key:"LoadAndPrint",value:function LoadAndPrint(o){RELAY.ipcSend(APP_MESSAGES.DO_OPEN_AND_PRINT_WINDOW,o)}},{key:"_onNodeError",value:function _onNodeError(p_evt,p_content){var _DIALOG$Push;console.error(p_content.error);DIALOG.Push((_DIALOG$Push={},_defineProperty(_DIALOG$Push,COM_ID.TITLE,p_content.message),_defineProperty(_DIALOG$Push,COM_ID.ICON,"% ICON % /icon_error.svg"),_defineProperty(_DIALOG$Push,COM_ID.MESSAGE,"".concat(p_content.error.message)),_defineProperty(_DIALOG$Push,"actions",[{text:"Close"}]),_DIALOG$Push))}},{key:"_onNodeWarning",value:function _onNodeWarning(p_evt,p_content){var _DIALOG$Push2;console.warning(p_content.message);DIALOG.Push((_DIALOG$Push2={},_defineProperty(_DIALOG$Push2,COM_ID.TITLE,"Attention !"),_defineProperty(_DIALOG$Push2,COM_ID.ICON,"%ICON%/icon_warning.svg"),_defineProperty(_DIALOG$Push2,COM_ID.MESSAGE,"".concat(p_content.message)),_defineProperty(_DIALOG$Push2,"actions",[{text:"Close"}]),_DIALOG$Push2))}},{key:"_onNodeMessage",value:function _onNodeMessage(p_evt,p_content){console.log(p_content.message)}}]);return Appb_}(SingletonEx);mdl.xp["default"]=mdl.xp=Appb_},{32:17,31:19,33:20,25:1,14:27,29:52,28:81,24:92,26:98,34:155,27:166,30:234,13:268}],17:[function(rq,mdl,xp){"use strict";var APP_MESSAGES=function APP_MESSAGES(){_cCC(this,APP_MESSAGES)};_defineProperty(APP_MESSAGES,"ERROR","node-error");_defineProperty(APP_MESSAGES,"WARNING","node-warning");_defineProperty(APP_MESSAGES,"MESSAGE","node-message");_defineProperty(APP_MESSAGES,"AU_CHECK_REQUEST","au-check-request");_defineProperty(APP_MESSAGES,"AU_CHECK_REQUEST_HANDLED","au-check-request-handled");_defineProperty(APP_MESSAGES,"AU_NO_SERVER","au-no-server");_defineProperty(APP_MESSAGES,"AU_ATTEMPT_CHECK","au-attempt-check");_defineProperty(APP_MESSAGES,"AU_CHECKING_FOR_UPDATE","au-checking-for-update");_defineProperty(APP_MESSAGES,"AU_UPDATE_AVAILABLE","au-udpate-available");_defineProperty(APP_MESSAGES,"AU_UPDATE_NOT_AVAILABLE","au-update-not-available");_defineProperty(APP_MESSAGES,"AU_UPDATE_DOWNLOADED","au-update-downloaded");_defineProperty(APP_MESSAGES,"NODE_MESSAGE","node-message");_defineProperty(APP_MESSAGES,"NODE_ERROR","node-error");_defineProperty(APP_MESSAGES,"NODE_WARNING","node-warning");_defineProperty(APP_MESSAGES,"DO_RELOAD_APP","do-reload-app");_defineProperty(APP_MESSAGES,"DO_OPEN_WINDOW","request-window-open");_defineProperty(APP_MESSAGES,"DO_RELOAD_WINDOW","request-window-reload");_defineProperty(APP_MESSAGES,"DO_CLOSE_WINDOW","request-window-close");_defineProperty(APP_MESSAGES,"DO_PRINT_WINDOW","request-window-print");_defineProperty(APP_MESSAGES,"DO_OPEN_AND_PRINT_WINDOW","request-window-and-print");mdl.xp["default"]=mdl.xp=APP_MESSAGES},{}],18:[function(rq,mdl,xp){"use strict";var _rq29=rq(13),U=_rq29.U;var _rq30=rq(24),ENV=_rq30.ENV;var _rq31=rq(34),CSS=_rq31.CSS;var _rq32=rq(27),UI=_rq32.UI;var _rq33=rq(30),DialogBox=_rq33.DialogBox;var APP_MESSAGES=rq(35);var AutoUDialogBox=function(_DialogBox){_inherits(AutoUDialogBox,_DialogBox);var _super10=_createSuper(AutoUDialogBox);function AutoUDialogBox(){_cCC(this,AutoUDialogBox);return _super10.call(this)}_cC(AutoUDialogBox,[{key:"_In",value:function _In(){_get(_gPO(AutoUDialogBox.prototype),"_In",this).call(this)}},{key:"_OnDataCh",value:function _OnDataCh(p_oldValue){_get(_gPO(AutoUDialogBox.prototype),"_OnDataCh",this).call(this,p_oldValue);var d=this._data;RELAY.ipcOn(APP_MESSAGES.AU_ERROR,this._Bind(this._OnAUError));RELAY.ipcOn(APP_MESSAGES.AU_CHECKING_FOR_UPDATE,this._Bind(this._OnAUCheckingForU));RELAY.ipcOn(APP_MESSAGES.AU_UPDATE_AVAILABLE,this._Bind(this._OnAUUAvailable));RELAY.ipcOn(APP_MESSAGES.AU_UPDATE_NOT_AVAILABLE,this._Bind(this._OnAUUNotAvailable));RELAY.ipcOn(APP_MESSAGES.AU_UPDATE_DOWNLOADED,this._Bind(this._OnAUUDownloaded));RELAY.ipcOn(APP_MESSAGES.AU_CHECK_REQUEST_HANDLED,this._Bind(this._OnAURequestHandled));RELAY.ipcSend(APP_MESSAGES.AU_CHECK_REQUEST)}},{key:"_OnAURequestHandled",value:function _OnAURequestHandled(p_evt,p_arg,p_err){if(p_arg===APP_MESSAGES.AU_NO_SERVER){this._Close();return}}},{key:"_OnAUError",value:function _OnAUError(p_evt,p_arg){this._title.text="Oops !";this._bodyContent.text="Encountered a bumper while auto-updating : ".concat(p_arg);this._ClearHandles();this.CreateHandle({text:"Well then.",trigger:{fn:this._Close}})}},{key:"_OnAUCheckingForU",value:function _OnAUCheckingForU(p_evt,p_arg){this._title.text="Checking for update";this._bodyContent.text="Stand still."}},{key:"_OnAUUAvailable",value:function _OnAUUAvailable(p_evt,p_arg){this._title.text="Great !";this._bodyContent.text="An update was found, it is already downloading in the background.\nYou can either wait for the download to finish or carry on.";this.CreateHandle({text:"Install now !",trigger:{fn:this._Close}});this.CreateHandle({text:"Continue working.",trigger:{fn:this._Close}})}},{key:"_OnAUUNotAvailable",value:function _OnAUUNotAvailable(p_evt,p_arg){this._title.text="You're all set !";this._bodyContent.text="No need for update.";this._ClearHandles();this.CreateHandle({text:"Well then.",trigger:{fn:this._Close}})}},{key:"_OnAUUDownloaded",value:function _OnAUUDownloaded(p_evt,p_arg){this._title.text="Ray-day";this._bodyContent.text="U has been downloaded and is ready to be installed.";this._ClearHandles();this.CreateHandle({text:"Install now !",trigger:{fn:this._Close}});this.CreateHandle({text:"Later.",trigger:{fn:this._Close}})}},{key:"_Clear",value:function _Clear(){_get(_gPO(AutoUDialogBox.prototype),"_Clear",this).call(this)}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(AutoUDialogBox.prototype),"_CleanUp",this).call(this)}}]);return AutoUDialogBox}(DialogBox);mdl.xp["default"]=mdl.xp=AutoUDialogBox;UI.Register("nkmjs-auto-update-dialog-box",AutoUDialogBox)},{35:17,24:92,34:155,27:166,30:234,13:268}],19:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={AutoUDialogBox:rq(36)}},{36:18}],20:[function(rq,mdl,xp){"use strict";var _rq34=rq(13),U=_rq34.U,PATH=_rq34.PATH;var _rq35=rq(14),__dOEx=_rq35.__dOEx,S=_rq35.S,DelayedCall=_rq35.DelayedCall;var _rq36=rq(29),Metadata=_rq36.Metadata,DATA_S=_rq36.DATA_S;var _rq37=rq(37),DOCUMENTS=_rq37.DOCUMENTS;var UserPreferences=function(___dOEx2){_inherits(UserPreferences,___dOEx2);var _super11=_createSuper(UserPreferences);function UserPreferences(){_cCC(this,UserPreferences);return _super11.call(this)}_cC(UserPreferences,[{key:"_In",value:function _In(){_get(_gPO(UserPreferences.prototype),"_In",this).call(this);this._document=null;this._waitForThen=false;this._initFn=null;this._thenFn=null;this._Bind(this._OnDocumentLoadSuccess);this._Bind(this._OnDocumentLoadError);this._Bind(this._OnDocumentSaveSuccess);this._Bind(this._OnDocumentSaveError);this._delayedSave=new DelayedCall(this._Bind(this.Save))}},{key:"Load",value:function Load(p_name,p_defaults,p_initFn,p_thenFn){this._initFn=p_initFn;this._thenFn=p_thenFn;this._defaults=p_defaults;this._waitForThen=true;this._document=DOCUMENTS.G({path:"".concat(PATH.USER_DATA,"/").concat(p_name,".json"),data:Metadata});this._document.W(DATA_S.DIRTY,this._OnDocumentDirty,this);this._document.Load({success:this._OnDocumentLoadSuccess,error:this._OnDocumentLoadError})}},{key:"_OnDocumentLoadSuccess",value:function _OnDocumentLoadSuccess(){this.In();this._Then()}},{key:"_OnDocumentLoadError",value:function _OnDocumentLoadError(){this.In()}},{key:"In",value:function In(){if(this._defaults){U.SMissing(this._document.currentData._data,this._defaults)}this._initFn(this._document.currentData);this._document.Dirty()}},{key:"Save",value:function Save(){this._document.Save({success:this._OnDocumentSaveSuccess,error:this._OnDocumentSaveError})}},{key:"_OnDocumentSaveSuccess",value:function _OnDocumentSaveSuccess(){this._Then()}},{key:"_OnDocumentSaveError",value:function _OnDocumentSaveError(p_err){throw p_err}},{key:"_Then",value:function _Then(){if(this._waitForThen){this._thenFn(this._document.currentData)}this._waitForThen=false}},{key:"_OnDocumentDirty",value:function _OnDocumentDirty(){this._delayedSave.Schedule()}}]);return UserPreferences}(__dOEx);mdl.xp["default"]=mdl.xp=UserPreferences},{14:27,29:52,37:86,13:268}],21:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={List:rq(38),Dictionary:rq(39),KDictionary:rq(40),DictionaryList:rq(41)}},{39:23,41:22,40:25,38:26}],22:[function(rq,mdl,xp){"use strict";var DictionaryList=function(){function DictionaryList(){_cCC(this,DictionaryList);this._map=new Map}_cC(DictionaryList,[{key:"internalMap",get:function get(){return this._map}},{key:"count",get:function get(){return this._map.size}},{key:"isEmpty",get:function get(){return this._map.size<=0}},{key:"keys",get:function get(){return Array.from(this._map.keys())}},{key:"Contains",value:function Contains(p_key){var v=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;if(!this._map.has(p_key)){return false}if(v===undefined){return true}else{return this._map.get(p_key).includes(v)}}},{key:"Count",value:function Count(p_key){if(this._map.has(p_key)){return this._map.get(p_key).length}else{return 0}}},{key:"S",value:function S(p_key,v){var list=null;if(this._map.has(p_key)){list=this._map.get(p_key)}else{list=new Array(0);this._map.set(p_key,list)}if(list.includes(v)){return}list.push(v)}},{key:"G",value:function G(p_key){var p_index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(!this._map.has(p_key)){return undefined}var list=this._map.get(p_key);if(p_index===-1){return list}else if(list.length<p_index){return list[p_index]}else{throw new Error("index is out of bounds")}}},{key:"RM",value:function RM(p_key,v){if(!v||!p_key){return false}var list=this._map.get(p_key);if(!list){return false}var index=list.indexOf(v);if(index!=-1){list.splice(index,1);if(list.length===0){this._map["delete"](p_key)}return true}return false}},{key:"RMMultiple",value:function RMMultiple(p_key){throw new Error("RMMultiple not implemented")}},{key:"Pop",value:function Pop(p_key){if(!this._map.has(p_key)){return undefined}var list=this._map.get(p_key),value=list.pop();if(list.length===0){this._map["delete"](p_key)}return value}},{key:"Clear",value:function Clear(){this._map.forEach(this._Clear,this);this._map.clear()}},{key:"_Clear",value:function _Clear(v,p_key,p_map){v.length=0}}]);return DictionaryList}();mdl.xp["default"]=mdl.xp=DictionaryList},{}],23:[function(rq,mdl,xp){"use strict";var isVoid=rq(42);var Dictionary=function(){function Dictionary(){_cCC(this,Dictionary);this._map=new Map}_cC(Dictionary,[{key:"internalMap",get:function get(){return this._map}},{key:"count",get:function get(){return this._map.size}},{key:"isEmpty",get:function get(){return this._map.size<=0}},{key:"keys",get:function get(){return Array.from(this._map.keys())}},{key:"Contains",value:function Contains(p_key){return this._map.has(p_key)}},{key:"S",value:function S(p_key,v){this._map.set(p_key,v)}},{key:"G",value:function G(p_key){return this._map.get(p_key)}},{key:"GValueKeys",value:function GValueKeys(v){if(isVoid(v)){return null}var result=null,keyList=this.keys;for(var i=0,n=keyList.length;i<n;i++){var key=keyList[i];if(this._map.get(key)===v){if(result===null){result=new Array(1)}result.push(key)}}return result}},{key:"RM",value:function RM(p_key){return this._map["delete"](p_key)}},{key:"ForEach",value:function ForEach(p_fn){var p_this=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_reverse=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var keys=Array.from(this._map.keys());if(p_reverse){for(var i=keys.length-1;i>=0;i--){var key=keys[i];p_fn.call(p_this,key,this._map.get(key))}}else{for(var _i=0,n=keys.length;_i<n;_i++){var _key3=keys[_i];p_fn.call(p_this,_key3,this._map.get(_key3))}}}},{key:"Clear",value:function Clear(){this._map.clear()}}]);return Dictionary}();mdl.xp["default"]=mdl.xp=Dictionary},{42:24}],24:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp=function isVoid(v){return typeof v==="undefined"||v===null}},{}],25:[function(rq,mdl,xp){"use strict";var KDictionary=function(){function KDictionary(){_cCC(this,KDictionary);this._rootMap=new Map}_cC(KDictionary,[{key:"rootMap",get:function get(){return this._rootMap}},{key:"Contains",value:function Contains(){var map=this._rootMap;for(var i=0,n=arguments.length;i<n;i++){map=map.get(i<0||arguments.length<=i?undefined:arguments[i]);if(!map){return false}}return true}},{key:"S",value:function S(){for(var _len3=arguments.length,keyChain=new Array(_len3),_key4=0;_key4<_len3;_key4++){keyChain[_key4]=arguments[_key4]}var value=keyChain.pop(),key=keyChain.pop(),map=this._rootMap,lastMap=map;for(var i=0,n=keyChain.length;i<n;i++){var kkey=keyChain[i];map=map.get(kkey);if(!map){map=new Map;lastMap.set(kkey,map)}lastMap=map}lastMap.set(key,value)}},{key:"G",value:function G(){for(var _len4=arguments.length,keyChain=new Array(_len4),_key5=0;_key5<_len4;_key5++){keyChain[_key5]=arguments[_key5]}var key=keyChain.pop(),map=this._rootMap;for(var i=0,n=keyChain.length;i<n;i++){map=map.get(keyChain[i]);if(!map){return null}}return map.get(key)}},{key:"RM",value:function RM(){for(var _len5=arguments.length,keyChain=new Array(_len5),_key6=0;_key6<_len5;_key6++){keyChain[_key6]=arguments[_key6]}var key=keyChain.pop(),map=this._rootMap;for(var i=0,n=keyChain.length;i<n;i++){map=map.get(keyChain[i]);if(!map){return null}}var value=map.get(key);if(typeof v==="undefined"||v===null){return}if((typeof value==="function"?value.prototype:value)instanceof Map){value.clear()}map.remove(key)}},{key:"Clear",value:function Clear(){this._rootMap.clear()}}]);return KDictionary}();mdl.xp["default"]=mdl.xp=KDictionary},{}],26:[function(rq,mdl,xp){"use strict";var isVoid=rq(42);var List=function(){function List(){var p_length=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;_cCC(this,List);this._array=new Array(p_length)}_cC(List,[{key:"internalArray",get:function get(){return this._array}},{key:"isEmpty",get:function get(){return this._array.length===0}},{key:"count",get:function get(){return this._array.length}},{key:"first",get:function get(){return this._array[0]}},{key:"last",get:function get(){return this._array[this._array.length-1]}},{key:"Contains",value:function Contains(it){return this._array.includes(it)}},{key:"IndexOf",value:function IndexOf(it){return this._array.indexOf(it)}},{key:"A",value:function A(it){if(isVoid(it)){return false}if(this._array.includes(it)){return false}this._array.push(it);return true}},{key:"RM",value:function RM(it){if(isVoid(it)){return false}return this.RMAt(this._array.indexOf(it))}},{key:"RMAt",value:function RMAt(p_index){if(p_index<0||p_index>=this._array.length){return false}return this._array.splice(p_index,1)}},{key:"Insert",value:function Insert(it,p_index){if(isVoid(it)){return false}var index=this._array.indexOf(it);if(index!=-1){return}if(p_index>=this._array.length){this._array.push(it);return it}this._array.splice(p_index,0,it);return it}},{key:"At",value:function At(p_index){return this._array[p_index]}},{key:"Pop",value:function Pop(){return this._array.pop()}},{key:"Shift",value:function Shift(){return this._array.shift()}},{key:"ForEach",value:function ForEach(p_fn){var p_this=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_reverse=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=this._array.length;if(p_reverse){for(var i=n-1;i>=0;i--){p_fn.call(p_this,this._array[i],i)}}else{for(var _i2=0;_i2<n;_i2++){p_fn.call(p_this,this._array[_i2],_i2)}}}},{key:"Clear",value:function Clear(){this._array.length=0}}]);return List}();mdl.xp["default"]=mdl.xp=List},{42:24}],27:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={S:rq(43),COMMON_FLAG:rq(44),COM_ID:rq(45),NFOS:rq(46),Singleton:rq(47),SingletonEx:rq(48),Stateb_:rq(49),StateMachine:rq(50),TIME:rq(51),BINDINGS:rq(52),BindingKit:rq(53),POOL:rq(54),__dO:rq(55),__dOEx:rq(56),S_Ber:rq(57),S_Box:rq(58),Observer:rq(59),DelayedCall:rq(60),Callbacks:rq(61),CallList:rq(62),OptionsHandler:rq(63),CSYMBOL:rq(64),OptionObject:rq(65)}},{52:28,44:29,45:30,53:31,62:32,61:33,64:34,63:35,65:36,47:38,48:37,49:39,50:40,46:41,55:43,56:42,54:44,43:45,59:46,58:47,57:48,60:49,51:50}],28:[function(rq,mdl,xp){"use strict";var _rq38=rq(13),U=_rq38.U;var _rq39=rq(18),DictionaryList=_rq39.DictionaryList,KDictionary=_rq39.KDictionary,Dictionary=_rq39.Dictionary;var SingletonEx=rq(66);var NFOS=rq(67);var BINDINGS=function(_SingletonEx2){_inherits(BINDINGS,_SingletonEx2);var _super12=_createSuper(BINDINGS);function BINDINGS(){_cCC(this,BINDINGS);return _super12.call(this)}_cC(BINDINGS,[{key:"_In",value:function _In(){_get(_gPO(BINDINGS.prototype),"_In",this).call(this);this._classLookup=new Dictionary;this._classReverseLookup=new Dictionary;this._squashedAssocs=new KDictionary;this._contextMap=new KDictionary;this._contextKeyLists=new DictionaryList;this._distanceMap=new KDictionary}},{key:"_SClass",value:function _SClass(p_key,p_class){this._classLookup.S(p_key,p_class);this._classReverseLookup.S(p_class,p_key)}},{key:"_GClass",value:function _GClass(p_key){return this._classLookup.G(p_key)}},{key:"_GClassKey",value:function _GClassKey(p_class){var uid=this._classReverseLookup.G(p_class);if(!uid){uid=U.G(NFOS.G(p_class),"uid",null);if(!uid){throw new Error("No valid NFO found for ".concat(p_class))}this._SClass(uid,p_class)}return uid}},{key:"_RMClass",value:function _RMClass(p_key){this._classLookup.RM(p_key)}},{key:"_S",value:function _S(p_context,p_key,p_binding){this._contextMap.S(p_context,p_key,p_binding);this._contextKeyLists.S(p_context,p_key)}},{key:"_G",value:function _G(p_context,p_key){var p_broad=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var p_eval=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var binding=this._contextMap.G(p_context,p_key);if(!binding){if(p_broad){var keyList=this._contextKeyLists.G(p_context);if(!keyList){return null}var distance=-1,closestDistance=Number.MAX_SAFE_INTEGER;for(var i=0,n=keyList.length;i<n;i++){var otherKey=keyList[i];distance=this._distanceMap.G(p_key,otherKey);if(U.isVoid(distance)){distance=U.InheritanceDistance(p_key,otherKey);this._distanceMap.S(p_key,otherKey,distance)}if(distance===-1){continue}if(distance<closestDistance){var tResult=this._contextMap.G(p_context,otherKey);if(tResult){closestDistance=distance;binding=tResult}}}if(!binding){}}}return binding}},{key:"_RM",value:function _RM(p_context,p_key,p_binding){this._contextMap.RM(p_context,p_key,p_binding);this._contextKeyLists.RM(p_context,p_key)}}],[{key:"Expand",value:function Expand(p_bindings){if(U.isFunc(p_bindings)){p_bindings=new p_bindings}p_bindings.Deploy()}},{key:"SClass",value:function SClass(p_key,p_class){this.instance._SClass(p_key,p_class)}},{key:"GClass",value:function GClass(p_key){return this.instance._GClass(p_key)}},{key:"GClassKey",value:function GClassKey(p_class){return this.instance._GClassKey(p_class)}},{key:"RMClass",value:function RMClass(p_key){this.instance._RMClass(p_key)}},{key:"S",value:function S(p_context,p_key,p_binding){this.instance._S(p_context,p_key,p_binding)}},{key:"G",value:function G(p_context,p_key){var p_fallback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var p_broad=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;p_key=U.isFunc(p_key)?p_key:p_key.constructor;if(!U.isFunc(p_key)){throw new Error("p_key must be a constructor or have an accessible constructor.")}var result=this.instance._G(p_context,p_key,p_broad);if(!result){return p_fallback}return result}},{key:"RM",value:function RM(p_context,p_key,p_binding){this.instance._RM(p_context,p_key,p_binding)}}]);return BINDINGS}(SingletonEx);mdl.xp["default"]=mdl.xp=BINDINGS},{66:37,67:41,18:21,13:268}],29:[function(rq,mdl,xp){"use strict";var COMMON_FLAG=function COMMON_FLAG(){_cCC(this,COMMON_FLAG)};_defineProperty(COMMON_FLAG,"INFOS","infos");_defineProperty(COMMON_FLAG,"WARNING","warning");_defineProperty(COMMON_FLAG,"ERROR","error");_defineProperty(COMMON_FLAG,"READY","ready");_defineProperty(COMMON_FLAG,"DIRTY","dirty");_defineProperty(COMMON_FLAG,"LOADING","loading");_defineProperty(COMMON_FLAG,"PROCESSING","processing");_defineProperty(COMMON_FLAG,"WAITING","waiting");_defineProperty(COMMON_FLAG,"ACTIVE","active");mdl.xp["default"]=mdl.xp=COMMON_FLAG},{}],30:[function(rq,mdl,xp){"use strict";var COM_ID=function COM_ID(){_cCC(this,COM_ID)};_defineProperty(COM_ID,"METAPREFIX","META@");_defineProperty(COM_ID,"UID","uid");_defineProperty(COM_ID,"NAME","name");_defineProperty(COM_ID,"TITLE","title");_defineProperty(COM_ID,"MESSAGE","message");_defineProperty(COM_ID,"ICON","icon");_defineProperty(COM_ID,"PATH","path");_defineProperty(COM_ID,"DATA","data");_defineProperty(COM_ID,"CMD_PRIMARY","primaryCommand");_defineProperty(COM_ID,"CMD_SECONDARY","secondaryCommand");_defineProperty(COM_ID,"CMD_LIST","commandList");_defineProperty(COM_ID,"OWNER","owner");mdl.xp["default"]=mdl.xp=COM_ID},{}],31:[function(rq,mdl,xp){"use strict";var _rq40=rq(18),Dictionary=_rq40.Dictionary;var _rq41=rq(13),U=_rq41.U,LOG=_rq41.LOG;var NFOS=rq(68);var __dOEx=rq(69);var BINDINGS=rq(70);var BindingKit=function(___dOEx3){_inherits(BindingKit,___dOEx3);var _super13=_createSuper(BindingKit);function BindingKit(){_cCC(this,BindingKit);return _super13.call(this)}_cC(BindingKit,[{key:"_In",value:function _In(){_get(_gPO(BindingKit.prototype),"_In",this).call(this);this._deployed=false;this._KVPS=new Array(0);this._CLASSES=new Array(0);this._classDict=new Dictionary}},{key:"A",value:function A(){if(this._deployed){throw new Error("Cannot add binding to kit while it is deployed.")}for(var i=0,n=arguments.length;i<n;i++){this._KVPS.push(i<0||arguments.length<=i?undefined:arguments[i])}}},{key:"AClasses",value:function AClasses(){if(this._deployed){throw new Error("Cannot add binding to kit while it is deployed.")}for(var i=0,n=arguments.length;i<n;i++){this._CLASSES.push(i<0||arguments.length<=i?undefined:arguments[i])}}},{key:"Deploy",value:function Deploy(){if(this._deployed){return}var b=BINDINGS.instance;for(var i=0,n=this._KVPS.length;i<n;i++){var assoc=this._KVPS[i],context=assoc.context,kvps=assoc.kvps;for(var k=0,_n=kvps.length;k<_n;k++){var kvp=kvps[k];b._S(context,kvp.key,kvp.binding);if(true){var cName=U.isFunc(context)?context.name:context,kName=U.isFunc(kvp.key)?kvp.key.name:kvp.key,vName=U.isFunc(kvp.binding)?kvp.binding.name:kvp.binding;LOG._("┅ ".concat(cName," ⟼ ").concat(kName," ⤞ ").concat(vName),"#7f7f7f")}}}for(var _i3=0,_n2=this._CLASSES.length;_i3<_n2;_i3++){var cl=this._CLASSES[_i3],uid=U.G(NFOS.G(cl),"uid",null);if(!uid){throw new Error("No valid NFO found for ".concat(this._CLASSES[_i3]))}this._classDict.S(cl,uid);b._SClass(uid,cl);LOG._("⧉ ".concat(uid," ⤞ ").concat(cl.name),"#7f7f7f")}this._deployed=true}},{key:"Conceal",value:function Conceal(){if(!this._deployed){return}var b=BINDINGS.instance;for(var i=0,n=this._KVPS.length;i<n;i++){var assoc=this._KVPS[i],context=assoc.context,_kvps=assoc.kvps;for(var k=0,_n3=_kvps.length;k<_n3;k++){var kvp=_kvps[k];b._RM(context,kvp.key,kvp.binding)}}var kvps=this._classDict.keys;for(var _i4=0,_n4=kvps.length;_i4<_n4;_i4++){b._RMClass(this._classDict.G(kvps[_i4]))}this._deployed=false}},{key:"_CleanUp",value:function _CleanUp(){this.Conceal();_get(_gPO(BindingKit.prototype),"_CleanUp",this).call(this)}}]);return BindingKit}(__dOEx);mdl.xp["default"]=mdl.xp=BindingKit},{70:28,68:41,69:42,18:21,13:268}],32:[function(rq,mdl,xp){"use strict";var _rq42=rq(18),List=_rq42.List;var _rq43=rq(13),U=_rq43.U;var CallList=function(){function CallList(){_cCC(this,CallList);this._list=new List(0)}_cC(CallList,[{key:"count",get:function get(){return this._list.count}},{key:"A",value:function A(p_fn){if(!U.isFunc(p_fn)){throw new Error("p_fn is not a Function.")}this._list.A(p_fn)}},{key:"RM",value:function RM(p_fn){this._list.RM(p_fn)}},{key:"nF",value:function nF(){for(var _len6=arguments.length,args=new Array(_len6),_key7=0;_key7<_len6;_key7++){args[_key7]=arguments[_key7]}for(var i=0,n=this._list.count;i<n;i++){this._list.At(i).apply(null,args)}}},{key:"nFFlush",value:function nFFlush(){this.nF.apply(this,arguments);this.Clear()}},{key:"Clear",value:function Clear(){this._list.Clear()}}]);return CallList}();mdl.xp["default"]=mdl.xp=CallList},{18:21,13:268}],33:[function(rq,mdl,xp){"use strict";var _rq44=rq(18),List=_rq44.List;var Callbacks=function(){function Callbacks(){_cCC(this,Callbacks);this._dispatching=false;this._onSuccessList=new List(0);this._onErrorList=new List(0);this._onAnyList=new List(0)}_cC(Callbacks,[{key:"onSuccess",set:function set(v){if(this._dispatching){return}this._onSuccessList.A(v)}},{key:"onError",set:function set(v){if(this._dispatching){return}this._onErrorList.A(v)}},{key:"onAny",set:function set(v){if(this._dispatching){return}this._onAnyList.A(v)}},{key:"A",value:function A(o){if(!o||this._dispatching){return}if(o.success){this._onSuccessList.A(o.success)}if(o.error){this._onErrorList.A(o.error)}if(o.any){this._onAnyList.A(o.any)}}},{key:"then",value:function then(p_fn){this.onSuccess=p_fn;return this}},{key:"catch",value:function _catch(p_fn){this.onError=p_fn;return this}},{key:"finally",value:function _finally(p_fn){this.onAny=p_fn;return this}},{key:"OS",value:function OS(){if(this._dispatching){return}for(var _len7=arguments.length,args=new Array(_len7),_key8=0;_key8<_len7;_key8++){args[_key8]=arguments[_key8]}this._Dispatch.apply(this,[this._onSuccessList].concat(args));this._Dispatch.apply(this,[this._onAnyList].concat(args))}},{key:"OnError",value:function OnError(){if(this._dispatching){return}for(var _len8=arguments.length,args=new Array(_len8),_key9=0;_key9<_len8;_key9++){args[_key9]=arguments[_key9]}this._Dispatch.apply(this,[this._onErrorList].concat(args));this._Dispatch.apply(this,[this._onAnyList].concat(args))}},{key:"OSFlush",value:function OSFlush(){if(this._dispatching){return}this.OS.apply(this,arguments);this.Clear()}},{key:"OnErrorFlush",value:function OnErrorFlush(){if(this._dispatching){return}this.OnError.apply(this,arguments);this.Clear()}},{key:"_Dispatch",value:function _Dispatch(p_list){if(this._dispatching){return}this._dispatching=true;for(var _len9=arguments.length,args=new Array(_len9>1?_len9-1:0),_key10=1;_key10<_len9;_key10++){args[_key10-1]=arguments[_key10]}for(var i=0,n=p_list.count;i<n;i++){p_list.At(i).apply(null,args)}this._dispatching=false}},{key:"Clear",value:function Clear(){if(this._dispatching){return}this._onSuccessList.Clear();this._onErrorList.Clear();this._onAnyList.Clear()}}]);return Callbacks}();mdl.xp["default"]=mdl.xp=Callbacks},{18:21}],34:[function(rq,mdl,xp){"use strict";var CSYMBOL=function CSYMBOL(){_cCC(this,CSYMBOL)};mdl.xp["default"]=mdl.xp=CSYMBOL},{}],35:[function(rq,mdl,xp){"use strict";var _rq45=rq(13),U=_rq45.U;var _rq46=rq(18),DictionaryList=_rq46.DictionaryList;var __direct=Symbol("direct");var OptionsHandler=function(){function OptionsHandler(){var p_wrapUpFn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_beginFn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_defaults=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;_cCC(this,OptionsHandler);this._hooks=new DictionaryList;this._defaults=p_defaults;this._beginFn=p_beginFn;this._wrapUpFn=p_wrapUpFn}_cC(OptionsHandler,[{key:"defaults",get:function get(){return this._defaults},set:function set(v){this._defaults=v}},{key:"beginFn",get:function get(){return this._beginFn},set:function set(v){this._beginFn=v}},{key:"wrapUpFn",get:function get(){return this._wrapUpFn},set:function set(v){this._wrapUpFn=v}},{key:"H",value:function H(p_optionID){var p_fn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_default=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;if(p_fn===null){p_fn=__direct}this._hooks.S(p_optionID,p_fn);if(p_default!=undefined){if(!this._defaults){this._defaults={}}this._defaults[p_optionID]=p_default}}},{key:"UnH",value:function UnH(p_optionID){var p_fn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(p_fn===null){p_fn=__direct}this._hooks.RM(p_optionID,p_fn)}},{key:"P",value:function P(p_target,o){var p_altOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(this._beginFn){this._beginFn(o,p_altOptions)}if(this._defaults){for(var key in this._defaults){if(!(key in o)){o[key]=this._defaults[key]}}}if(!p_altOptions){p_altOptions=o}for(var _key11 in o){var callList=this._hooks.G(_key11),value=o[_key11];if(!callList){continue}for(var i=0,n=callList.length;i<n;i++){var fn=callList[i];if(fn===__direct){p_target[_key11]=value;continue}if(U.isString(fn)){p_target[fn]=value}else{fn(value,p_altOptions)}}}if(this._wrapUpFn){this._wrapUpFn.call(null,p_altOptions)}}},{key:"PSingle",value:function PSingle(p_target,p_optionID,p_optionValue){var p_others=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var p_wrapUp=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var callList=this._hooks.G(p_optionID);if(callList===__direct){p_target[p_optionID]=p_optionValue;return}if(!callList){return}for(var i=0,n=callList.count;i<n;i++){var fn=callList.At(i);if(U.isString(fn)){p_target[fn]=p_optionValue}else{fn(p_optionValue,p_others)}}if(p_wrapUp&&this._wrapUpFn){this._wrapUpFn.call(null,p_others)}}},{key:"WrapUp",value:function WrapUp(o){if(this._wrapUpFn){this._wrapUpFn.call(null,o)}}},{key:"Clear",value:function Clear(){this._hooks.Clear();this._defaults=null}}]);return OptionsHandler}();mdl.xp["default"]=mdl.xp=OptionsHandler},{18:21,13:268}],36:[function(rq,mdl,xp){"use strict";var _rq47=rq(13),U=_rq47.U;var __dOEx=rq(69);var OptionsHandler=rq(71);var OptionObject=function(___dOEx4){_inherits(OptionObject,___dOEx4);var _super14=_createSuper(OptionObject);function OptionObject(){_cCC(this,OptionObject);return _super14.call(this)}_cC(OptionObject,[{key:"_In",value:function _In(){_get(_gPO(OptionObject.prototype),"_In",this).call(this);this._options={};this._optionHandler=new OptionsHandler}},{key:"optionHandler",get:function get(){return this._optionHandler}},{key:"options",get:function get(){return this._options},set:function set(o){this._options=o;this._optionHandler.P(this,o)}},{key:"AppendOptions",value:function AppendOptions(o){if(!this._options){this._options={}}for(var member in o){var value=o[member];this._options[member]=value}this._optionHandler.P(this,o,this._options)}},{key:"GOption",value:function GOption(p_id){var p_fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!this._options.hasOwnProperty(p_id)){return p_fallback}return this._options[p_id]}},{key:"GOrSOption",value:function GOrSOption(p_id){var p_fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_process=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!this._options.hasOwnProperty(p_id)){this.SOption(p_id,p_fallback);return p_fallback}else{return this._options[p_id]}}},{key:"SOption",value:function SOption(p_id,v){if(!this._options){this._options={}}if(p_id in this._options&&this._options[p_id]===v){return}this._optionHandler.PSingle(this,p_id,v,this._options,true);this._options[p_id]=v}},{key:"_CleanUp",value:function _CleanUp(){this._options={};_get(_gPO(OptionObject.prototype),"_CleanUp",this).call(this)}}]);return OptionObject}(__dOEx);mdl.xp["default"]=mdl.xp=OptionObject},{69:42,71:35,13:268}],37:[function(rq,mdl,xp){"use strict";var Singleton=rq(72);var S_Box=rq(73);var SingletonEx=function(_Singleton){_inherits(SingletonEx,_Singleton);var _super15=_createSuper(SingletonEx);function SingletonEx(){_cCC(this,SingletonEx);return _super15.call(this)}_cC(SingletonEx,[{key:"_In",value:function _In(){_get(_gPO(SingletonEx.prototype),"_In",this).call(this);this._signals=new S_Box}},{key:"_B",value:function _B(p_signalId){var _this$_signals;for(var _len10=arguments.length,args=new Array(_len10>1?_len10-1:0),_key12=1;_key12<_len10;_key12++){args[_key12-1]=arguments[_key12]}(_this$_signals=this._signals).B.apply(_this$_signals,[p_signalId].concat(args))}},{key:"W",value:function W(p_signalId,p_fn,p_listener){this._signals.A(p_signalId,p_fn,p_listener)}},{key:"WOnce",value:function WOnce(p_signalId,p_fn,p_listener){this._signals.AOnce(p_signalId,p_fn,p_listener)}},{key:"Uw",value:function Uw(p_signalId,p_fn,p_listener){this._signals.RM(p_signalId,p_fn,p_listener)}}],[{key:"W",value:function W(p_signalId,p_fn,p_listener){this.instance._signals.A(p_signalId,p_fn,p_listener)}},{key:"WOnce",value:function WOnce(p_signalId,p_fn,p_listener){this.instance._signals.AOnce(p_signalId,p_fn,p_listener)}},{key:"Uw",value:function Uw(p_signalId,p_fn,p_listener){this.instance._signals.RM(p_signalId,p_fn,p_listener)}}]);return SingletonEx}(Singleton);mdl.xp["default"]=mdl.xp=SingletonEx},{73:47,72:38}],38:[function(rq,mdl,xp){"use strict";var Singleton=function(){function Singleton(){_cCC(this,Singleton);if(this.constructor.__instance){throw new Error("Cannot create multiple instance of a singleton.")}this.constructor.__instance=this;try{var w=window;this._isBrowser=true}catch(e){this._isBrowser=false}this._In();this._pIn()}_cC(Singleton,[{key:"isBrowser",get:function get(){return this._isBrowser}},{key:"_Bind",value:function _Bind(p_func){return this[p_func.name]=p_func.bind(this)}},{key:"_In",value:function _In(){}},{key:"_pIn",value:function _pIn(){}}],[{key:"instance",get:function get(){if(!this.__instance){new this}return this.__instance}}]);return Singleton}();_defineProperty(Singleton,"__instance",null);mdl.xp["default"]=mdl.xp=Singleton},{}],39:[function(rq,mdl,xp){"use strict";var _rq48=rq(18),Dictionary=_rq48.Dictionary;var _rq49=rq(13),U=_rq49.U;var Stateb_=function(){function Stateb_(){_cCC(this,Stateb_);this._id="";this._data=null}_cC(Stateb_,[{key:"id",get:function get(){return this._id}},{key:"data",get:function get(){return this._data}},{key:"toString",value:function toString(){return this._id}}],[{key:"GOrCreate",value:function GOrCreate(p_stateId){var p_data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(U.isVoid(this._stateMap)){this._stateMap=new Dictionary}var state=this._stateMap.G(p_stateId);if(U.isVoid(state)){state=new this;state._id=p_stateId;state._data=p_data;this._stateMap.S(p_stateId,state)}return state}}]);return Stateb_}();mdl.xp["default"]=mdl.xp=Stateb_},{18:21,13:268}],40:[function(rq,mdl,xp){"use strict";var _rq50=rq(13),U=_rq50.U;var S=rq(74);var __dOEx=rq(69);var S_Box=rq(73);var Stateb_=rq(75);var StateMachine=function(___dOEx5){_inherits(StateMachine,___dOEx5);var _super16=_createSuper(StateMachine);function StateMachine(){var _this;_cCC(this,StateMachine);_this=_super16.call(this);_this._currentState=null;_this._owner=_assertThisInialized(_this);_this._signals=new S_Box;return _this}_cC(StateMachine,[{key:"owner",get:function get(){return this._owner},set:function set(v){if(U.isVoid(v)){v=this}this._owner=v}},{key:"currentState",get:function get(){return this._currentState},set:function set(v){if(this._currentState===v){return}var oldValue=this._currentState;this._currentState=v;if(oldValue){}if(v){}this._OnCurrentStateCh(oldValue);this._B(S.STATE_CHANGED,this._owner,v,oldValue);if(this._owner===this){this._signals.B(v,this._owner)}else{this._owner._B(v,this._owner)}}},{key:"Is",value:function Is(p_state){return this._currentState===p_state}},{key:"IsAny",value:function IsAny(){for(var i=0,n=arguments.length;i<n;i++){if(this._currentState===(i<0||arguments.length<=i?undefined:arguments[i])){return true}}return false}},{key:"IsNot",value:function IsNot(p_state){return this._currentState!=p_state}},{key:"IsNotAny",value:function IsNotAny(){for(var i=0,n=arguments.length;i<n;i++){if(this._currentState===(i<0||arguments.length<=i?undefined:arguments[i])){return false}}return true}},{key:"_OnCurrentStateCh",value:function _OnCurrentStateCh(p_oldState){}},{key:"_CleanUp",value:function _CleanUp(){this._currentState=null;this._owner=null;this._signals.RMAll();_get(_gPO(StateMachine.prototype),"_CleanUp",this).call(this)}}]);return StateMachine}(__dOEx);mdl.xp["default"]=mdl.xp=StateMachine},{69:42,74:45,73:47,75:39,13:268}],41:[function(rq,mdl,xp){"use strict";var _rq51=rq(13),U=_rq51.U;var __NFO__="__NFO__";var NFOS=function(){function NFOS(){_cCC(this,NFOS)}_cC(NFOS,null,[{key:"G",value:function G(p_obj){var p_fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(U.isObject(p_obj)){if(__NFO__ in p_obj){return p_obj[__NFO__]}else if(__NFO__ in p_obj.constructor){return p_obj.constructor[__NFO__]}}else if(U.isFunc(p_obj)&&__NFO__ in p_obj){return p_obj[__NFO__]}return p_fallback}},{key:"Ext",value:function Ext(p_base,p_baseClass){var p_merge=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var source=p_baseClass[__NFO__];for(var key in source){var sourceValue=source[key];if(!p_base.hasOwnProperty(key)){if(U.isArray(sourceValue)){p_base[key]=_toConsumableArray(sourceValue)}else if(U.isObject()){p_base[key]=this.Ext({},sourceValue)}else{p_base[key]=sourceValue}}else{var baseValue=p_base[key];if(U.isArray(baseValue)){if(U.isArray(sourceValue)&&p_merge&&p_merge.includes(key)){for(var i=0,n=sourceValue.length;i<n;i++){if(!baseValue.includes(sourceValue[i])){baseValue.push(sourceValue[i])}}}}else if(U.isObject(baseValue)&&UTILS.isObject(sourceValue)){this.Ext(baseValue,sourceValue,p_merge)}else{}}}return p_base}}]);return NFOS}();_defineProperty(NFOS,"KEY",__NFO__);mdl.xp["default"]=mdl.xp=NFOS},{13:268}],42:[function(rq,mdl,xp){"use strict";var __dO=rq(76);var S_Box=rq(73);var S=rq(74);var __dOEx=function(___dO3){_inherits(__dOEx,___dO3);var _super17=_createSuper(__dOEx);function __dOEx(){_cCC(this,__dOEx);return _super17.call(this)}_cC(__dOEx,[{key:"_In",value:function _In(){_get(_gPO(__dOEx.prototype),"_In",this).call(this);this._releasePrevented=false;this._signals=new S_Box}},{key:"_B",value:function _B(p_signalId){var _this$_signals2;for(var _len11=arguments.length,args=new Array(_len11>1?_len11-1:0),_key13=1;_key13<_len11;_key13++){args[_key13-1]=arguments[_key13]}(_this$_signals2=this._signals).B.apply(_this$_signals2,[p_signalId].concat(args))}},{key:"W",value:function W(p_signalId,p_fn){var p_listener=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._signals.A(p_signalId,p_fn,p_listener)}},{key:"WOnce",value:function WOnce(p_signalId,p_fn){var p_listener=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._signals.AOnce(p_signalId,p_fn,p_listener)}},{key:"Uw",value:function Uw(p_signalId,p_fn){var p_listener=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._signals.RM(p_signalId,p_fn,p_listener)}},{key:"PreventRelease",value:function PreventRelease(){this._releasePrevented=true}},{key:"Release",value:function Release(){if(this._isReleasing){return}this._signals.silent=false;this._isReleasing=true;this._releasePrevented=false;this._B(S.RELEASING,this);if(this._releasePrevented){this._isReleasing=false;this._releasePrevented=false;return}this._B(S.RELEASED,this);this._CleanUp();if(this._returnFn!=undefined){this._returnFn(this)}this._isReleasing=false}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(__dOEx.prototype),"_CleanUp",this).call(this);this._releasePrevented=false;this._signals.Clear()}}]);return __dOEx}(__dO);mdl.xp["default"]=mdl.xp=__dOEx},{74:45,73:47,76:43}],43:[function(rq,mdl,xp){"use strict";var __dO=function(){function __dO(){_cCC(this,__dO);this._In();this._pIn()}_cC(__dO,[{key:"_In",value:function _In(){this._isReleasing=false;this._returnFn=null}},{key:"isReleasing",get:function get(){return this._isReleasing}},{key:"_pIn",value:function _pIn(){}},{key:"_Bind",value:function _Bind(p_func){return this[p_func.name]=p_func.bind(this)}},{key:"Release",value:function Release(){if(this._isReleasing){return}this._isReleasing=true;this._CleanUp();if(this._returnFn!=undefined){this._returnFn(this)}this._isReleasing=false}},{key:"_CleanUp",value:function _CleanUp(){}}]);return __dO}();mdl.xp["default"]=mdl.xp=__dO},{}],44:[function(rq,mdl,xp){"use strict";var _rq52=rq(13),U=_rq52.U;var _rq53=rq(18),Dictionary=_rq53.Dictionary,DictionaryList=_rq53.DictionaryList;var Singleton=rq(77);var __dO=rq(76);var POOL=function(_Singleton2){_inherits(POOL,_Singleton2);var _super18=_createSuper(POOL);function POOL(){_cCC(this,POOL);return _super18.call(this)}_cC(POOL,[{key:"_In",value:function _In(){_get(_gPO(POOL.prototype),"_In",this).call(this);this._globalTypes=new Dictionary;this._globalPool=new DictionaryList;this._Bind(this._Return)}},{key:"_Register",value:function _Register(p_class){if(!U.isFunc(p_class)){throw new Error("Register used with invalid constructor : ".concat(p_class))}this._globalTypes.S(p_class.name,p_class)}},{key:"_GClass",value:function _GClass(p_id){return this._globalTypes.G(p_id)}},{key:"_Return",value:function _Return(p_obj){if(!U.isObject(p_obj)||!U.isInstanceOf(p_obj,__dO)){throw new Error("Return used with invalid object : "+p_obj)}var keyName=p_obj.constructor.name;if(!this._globalTypes.Contains(keyName)){throw new Error("Return used with a never-registered object type : "+keyName)}this._globalPool.S(keyName,p_obj)}},{key:"_Rt",value:function _Rt(p_class){var keyName=null;if(U.isString(p_class)){keyName=p_class}else if(typeof p_class==="function"){keyName=p_class.name}else{throw new Error("Rt rqs either a string or a constructor.")}if(!this._globalTypes.Contains(keyName)){if(typeof p_class==="function"&&U.isInstanceOf(p_class.prototype,__dO)){this._Register(p_class)}else{throw new Error("Could not find any constructor association for : ".concat(keyName))}}p_class=this._globalTypes.G(keyName);var obj=this._globalPool.Pop(keyName);if(!obj){obj=new p_class;obj._returnFn=this._Return}if("Wake"in obj){obj.Wake()}return obj}}],[{key:"Register",value:function Register(p_class){this.instance._Register(p_class)}},{key:"GClass",value:function GClass(p_id){return this.instance._GClass(p_id)}},{key:"Rt",value:function Rt(p_class){return this.instance._Rt(p_class)}}]);return POOL}(Singleton);mdl.xp["default"]=mdl.xp=POOL},{77:38,76:43,18:21,13:268}],45:[function(rq,mdl,xp){"use strict";var S=function S(){_cCC(this,S)};_defineProperty(S,"RELEASING",Symbol("releasing"));_defineProperty(S,"RELEASED",Symbol("released"));_defineProperty(S,"UPDATED",Symbol("updated"));_defineProperty(S,"RENAMING",Symbol("renaming"));_defineProperty(S,"RENAMED",Symbol("renamed"));_defineProperty(S,"STATE_CHANGING",Symbol("stateChanging"));_defineProperty(S,"STATE_CHANGED",Symbol("stateCh"));_defineProperty(S,"STARTED",Symbol("started"));_defineProperty(S,"STOPPED",Symbol("stopped"));_defineProperty(S,"PROGRESS",Symbol("progress"));_defineProperty(S,"COMPLETE",Symbol("complete"));_defineProperty(S,"FAIL",Symbol("fail"));_defineProperty(S,"CANCELED",Symbol("canceled"));_defineProperty(S,"READY",Symbol("ready"));_defineProperty(S,"TICK",Symbol("tick"));_defineProperty(S,"ITEM_ADDED",Symbol("itemAd"));_defineProperty(S,"ITEM_REMOVED",Symbol("itemRMd"));_defineProperty(S,"ITEM_UPDATED",Symbol("itemUd"));mdl.xp["default"]=mdl.xp=S},{}],46:[function(rq,mdl,xp){"use strict";var _rq54=rq(13),U=_rq54.U;var __dOEx=rq(69);var Observer=function(___dOEx6){_inherits(Observer,___dOEx6);var _super19=_createSuper(Observer);function Observer(){_cCC(this,Observer);return _super19.call(this)}_cC(Observer,[{key:"_In",value:function _In(){_get(_gPO(Observer.prototype),"_In",this).call(this);this._hooks=new Array(0);this._targets=new Array(0);this._isEnabled=true}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(v){if(v){this.Enable()}else{this.Disable()}}},{key:"Enable",value:function Enable(){if(this._isEnabled){return false}this._isEnabled=true;for(var i=0,n=this._targets.length;i<n;i++){this._WAll(this._targets[i])}return true}},{key:"Disable",value:function Disable(){if(this._isEnabled){return false}this._isEnabled=false;for(var i=0,n=this._targets.length;i<n;i++){this._UwAll(this._targets[i])}return true}},{key:"H",value:function H(p_evt,p_fn){var p_subscriber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._hooks.push({evt:p_evt,thisArg:p_subscriber,fn:p_fn});if(this._isEnabled){for(var i=0,n=this._targets.length;i<n;i++){this._targets[i].W(p_evt,p_fn,p_subscriber)}}}},{key:"Uh",value:function Uh(p_evt,p_fn){var p_subscriber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;for(var i=0,n=this._hooks.length;i<n;i++){var hook=this._hooks[i];if(hook.evt===p_evt&&hook.thisArg===p_subscriber&&hook.fn===p_fn){this._hooks.splice(i,1);i--;n--;if(this._isEnabled){for(var _i5=0,_n5=this._targets.length;_i5<_n5;_i5++){this._targets[_i5].Uw(p_evt,p_fn,p_subscriber)}}}}}},{key:"targets",get:function get(){return this._targets}},{key:"targetCount",get:function get(){return this._targets.length}},{key:"Observe",value:function Observe(p_target){if(!p_target){throw new Error("Target cannot be null.")}if(this._targets.includes(p_target)){return p_target}this._targets.push(p_target);if(this._isEnabled){this._WAll(p_target)}return p_target}},{key:"ObserveOnly",value:function ObserveOnly(p_target){if(this._targets.includes(p_target)){return p_target}this.Flush();if(p_target){this._targets.push(p_target);if(this._isEnabled){this._WAll(p_target)}}return p_target}},{key:"Unobserve",value:function Unobserve(p_target){if(!p_target){throw new Error("Target cannot be null.")}var index=this._targets.indexOf(p_target);if(index===-1){return p_target}this._targets.splice(index,1);if(this._isEnabled){this._UwAll(p_target)}return p_target}},{key:"_WAll",value:function _WAll(p_target){for(var i=0,n=this._hooks.length;i<n;i++){var hook=this._hooks[i];p_target.W(hook.evt,hook.fn,hook.thisArg)}}},{key:"_UwAll",value:function _UwAll(p_target){if(p_target.isReleasing){return}for(var i=0,n=this._hooks.length;i<n;i++){var hook=this._hooks[i];p_target.Uw(hook.evt,hook.fn,hook.thisArg)}}},{key:"Flush",value:function Flush(){if(this._isEnabled){for(var i=0,n=this._targets.length;i<n;i++){this._UwAll(this._targets[i])}}this._targets.length=0}},{key:"_CleanUp",value:function _CleanUp(){this.Flush();this._hooks.length=0;this._isEnabled=true;_get(_gPO(Observer.prototype),"_CleanUp",this).call(this)}}]);return Observer}(__dOEx);mdl.xp["default"]=mdl.xp=Observer},{69:42,13:268}],47:[function(rq,mdl,xp){"use strict";var _rq55=rq(13),U=_rq55.U;var _rq56=rq(18),Dictionary=_rq56.Dictionary;var __dO=rq(78);var POOL=rq(79);var S_Ber=rq(80);var S_Box=function(___dO4){_inherits(S_Box,___dO4);var _super20=_createSuper(S_Box);function S_Box(){var _this2;_cCC(this,S_Box);_this2=_super20.call(this);_this2._signals=new Dictionary;_this2._silent=false;return _this2}_cC(S_Box,[{key:"silent",get:function get(){return this._silent},set:function set(v){this._silent=v}},{key:"hasWers",get:function get(){return this._signals.count>0}},{key:"isEmpty",value:function isEmpty(p_signal){var s=this._signals;if(!s.Contains(p_signal)){return true}else{return s.G(p_signal).isEmpty}}},{key:"B",value:function B(p_signalId){if(this._silent||this._signals.isEmpty){return}var signal=this._signals.G(p_signalId);if(U.isVoid(signal)){return}for(var _len12=arguments.length,args=new Array(_len12>1?_len12-1:0),_key14=1;_key14<_len12;_key14++){args[_key14-1]=arguments[_key14]}signal.B.apply(signal,args)}},{key:"A",value:function A(p_signalId,p_fn){var p_listener=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var signal=this._signals.G(p_signalId);if(U.isVoid(signal)){signal=POOL.Rt(S_Ber);this._signals.S(p_signalId,signal)}signal.A(p_fn,p_listener)}},{key:"AOnce",value:function AOnce(p_signalId,p_fn){var p_listener=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var signal=this._signals.G(p_signalId);if(U.isVoid(signal)){signal=POOL.Rt(S_Ber);this._signals.S(p_signalId,signal)}signal.AOnce(p_fn,p_listener)}},{key:"RM",value:function RM(p_signalId,p_fn){var p_listener=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var signal=this._signals.G(p_signalId);if(U.isVoid(signal)){return}signal.RM(p_fn,p_listener);if(signal.isEmpty){this._signals.RM(p_signalId);signal.Release()}}},{key:"RMAll",value:function RMAll(p_signalId){var signal=this._signals.G(p_signalId);if(U.isVoid(signal)){return}this._signals.RM(p_signalId);signal.Release()}},{key:"Clear",value:function Clear(){var signals=this._signals,keys=signals.keys;for(var i=0,n=keys.length;i<n;i++){signals.G(keys[i]).Release()}signals.Clear()}}]);return S_Box}(__dO);mdl.xp["default"]=mdl.xp=S_Box},{78:43,79:44,80:48,18:21,13:268}],48:[function(rq,mdl,xp){"use strict";var _rq57=rq(13),U=_rq57.U;var _rq58=rq(18),DictionaryList=_rq58.DictionaryList;var __dO=rq(78);var S_Ber=function(___dO5){_inherits(S_Ber,___dO5);var _super21=_createSuper(S_Ber);function S_Ber(){_cCC(this,S_Ber);return _super21.call(this)}_cC(S_Ber,[{key:"_In",value:function _In(){_get(_gPO(S_Ber.prototype),"_In",this).call(this);this._broadcasting=false;this._removeAll=false;this._slots=new DictionaryList;this._onceSlots=new DictionaryList;this._deprecatedKVP=new Array(0);this._queuedBs=new Array(0)}},{key:"isEmpty",get:function get(){return this._slots.count===0}},{key:"count",get:function get(){return this._slots.count}},{key:"A",value:function A(p_fn){var p_listener=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!U.isFunc(p_fn)){throw new Error("p_fn is not a function")}if(U.isVoid(p_listener)){p_listener=S_Ber.BLANK}this._slots.S(p_listener,p_fn);this._onceSlots.RM(p_listener,p_fn)}},{key:"AOnce",value:function AOnce(p_fn){var p_listener=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!U.isFunc(p_fn)){throw new Error("p_fn is not a function")}if(U.isVoid(p_listener)){p_listener=S_Ber.BLANK}this._slots.S(p_listener,p_fn);this._onceSlots.S(p_listener,p_fn)}},{key:"RM",value:function RM(p_fn){var p_listener=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!U.isFunc(p_fn)){throw new Error("p_fn is not a function")}if(U.isVoid(p_listener)){p_listener=S_Ber.BLANK}if(this._slots.Contains(p_listener)){if(this._broadcasting){this._deprecatedKVP.push([p_listener,p_fn])}else{this._slots.RM(p_listener,p_fn)}}if(this._onceSlots.Contains(p_listener)){if(this._broadcasting){this._deprecatedKVP.push([p_listener,p_fn])}else{this._onceSlots.RM(p_listener,p_fn)}}}},{key:"RMAll",value:function RMAll(){if(this._broadcasting){this._removeAll=true;return}this._queuedBs.length=0;this._slots.Clear();this._onceSlots.Clear();this._deprecatedKVP.length=0;this._removeAll=false}},{key:"B",value:function B(){for(var _len13=arguments.length,args=new Array(_len13),_key15=0;_key15<_len13;_key15++){args[_key15]=arguments[_key15]}if(this._broadcasting){this._queuedBs.push(args);console.warn("Dispatching signal while already dispatching. Queueing.");return}this._broadcasting=true;this._args=args;if(args===null||args===undefined){this._slots.internalMap.forEach(this.__Bwouta,this)}else{this._slots.internalMap.forEach(this.__Bwa,this)}this._pDispatch()}},{key:"_pDispatch",value:function _pDispatch(){this._broadcasting=false;this._onceSlots.Clear();if(this._removeAll){this.RMAll()}else{for(var i=0,n=this._deprecatedKVP.length;i<n;i++){var kvp=this._deprecatedKVP[i];this._slots.RM(kvp[0],kvp[1])}}this._deprecatedKVP.length=0;if(this._queuedBs.length!=0){this.B.apply(this,this._queuedBs.shift())}}},{key:"__Bwouta",value:function __Bwouta(p_callbacks,p_listener,p_map){var onceList=this._onceSlots.G(p_listener);if(p_listener===S_Ber.BLANK){if(onceList){for(var i=0,n=p_callbacks.length;i<n;i++){var fn=p_callbacks[i];fn.apply(null);if(onceList.includes(fn)){this._deprecatedKVP.push([p_listener,fn])}}}else{for(var _i6=0,_n6=p_callbacks.length;_i6<_n6;_i6++){p_callbacks[_i6].apply(null)}}}else{if(onceList){for(var _i7=0,_n7=p_callbacks.length;_i7<_n7;_i7++){var _fn=p_callbacks[_i7];_fn.apply(p_listener);if(onceList.includes(_fn)){this._deprecatedKVP.push([p_listener,_fn])}}}else{for(var _i8=0,_n8=p_callbacks.length;_i8<_n8;_i8++){p_callbacks[_i8].apply(p_listener)}}}}},{key:"__Bwa",value:function __Bwa(p_callbacks,p_listener,p_map){var onceList=this._onceSlots.G(p_listener);if(p_listener===S_Ber.BLANK){if(onceList){for(var i=0,n=p_callbacks.length;i<n;i++){var fn=p_callbacks[i];fn.apply(null,this._args);if(onceList.includes(fn)){this._deprecatedKVP.push([p_listener,fn])}}}else{for(var _i9=0,_n9=p_callbacks.length;_i9<_n9;_i9++){p_callbacks[_i9].apply(null,this._args)}}}else{if(onceList){for(var _i10=0,_n10=p_callbacks.length;_i10<_n10;_i10++){var _fn2=p_callbacks[_i10];_fn2.apply(p_listener,this._args);if(onceList.includes(_fn2)){this._deprecatedKVP.push([p_listener,_fn2])}}}else{for(var _i11=0,_n11=p_callbacks.length;_i11<_n11;_i11++){p_callbacks[_i11].apply(p_listener,this._args)}}}}},{key:"_CleanUp",value:function _CleanUp(){this.RMAll();_get(_gPO(S_Ber.prototype),"_CleanUp",this).call(this)}}]);return S_Ber}(__dO);_defineProperty(S_Ber,"BLANK",Symbol("none"));mdl.xp["default"]=mdl.xp=S_Ber},{78:43,18:21,13:268}],49:[function(rq,mdl,xp){"use strict";var _rq59=rq(13),U=_rq59.U;var TIME=rq(81);var DelayedCall=function(){function DelayedCall(){var p_fn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_delay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;_cCC(this,DelayedCall);this.Clear();this._Call=this._Call.bind(this);this.Schedule=this.Schedule.bind(this);this._delay=p_delay;this._elapsed=0;if(p_fn){this._callback=p_fn}}_cC(DelayedCall,[{key:"scheduled",get:function get(){return this._scheduled}},{key:"callback",get:function get(){return this._callback},set:function set(v){var wasScheduled=this._scheduled;this.Cancel();this._callback=v;if(wasScheduled){this.Schedule()}}},{key:"Schedule",value:function Schedule(){if(this._scheduled||U.isVoid(this._callback)){return}this._scheduled=true;TIME.instance.NextTickA(this._Call)}},{key:"Cancel",value:function Cancel(){if(this._scheduled&&!U.isVoid(this._callback)){TIME.instance.NextTickRM(this._Call);this._elapsed=0}}},{key:"_Call",value:function _Call(p_delta){if(this._delay>0){this._elapsed+=p_delta;if(this._elapsed<this._delay){TIME.instance.NextTickA(this._Call);return}}this._scheduled=false;this._elapsed=0;this._callback(p_delta)}},{key:"Clear",value:function Clear(){this.Cancel();this._scheduled=false;this._callback=null}}]);return DelayedCall}();mdl.xp["default"]=mdl.xp=DelayedCall},{81:50,13:268}],50:[function(rq,mdl,xp){(function(process){(function(){"use strict";var _rq60=rq(13),U=_rq60.U;var S=rq(74);var SingletonEx=rq(82);var CallList=rq(83);var TIME=function(_SingletonEx3){_inherits(TIME,_SingletonEx3);var _super22=_createSuper(TIME);function TIME(){_cCC(this,TIME);return _super22.call(this)}_cC(TIME,[{key:"_In",value:function _In(){_get(_gPO(TIME.prototype),"_In",this).call(this);this._lastTick=null;this._deltaTime=0;this._timeScale=1;this._clA=new CallList;this._clB=new CallList;this._nextTick=this._clA;this._nextTickScheduled=false;this._Bind(this._Tick)}},{key:"_pIn",value:function _pIn(){_get(_gPO(TIME.prototype),"_pIn",this).call(this);if(this._isBrowser){window.requestAnimationFrame(this._Tick)}}},{key:"deltaTime",get:function get(){return this._deltaTime}},{key:"timeScale",get:function get(){return this._timeScale},set:function set(value){this._timeScale=value}},{key:"NextTickA",value:function NextTickA(p_fn){if(!U.isFunc(p_fn)){throw new Error("p_fn is not a function")}this._nextTick.A(p_fn);this._ScheduleNextTick()}},{key:"NextTickRM",value:function NextTickRM(p_fn){if(!U.isFunc(p_fn)){throw new Error("p_fn is not a function")}this._nextTick.RM(p_fn)}},{key:"_ScheduleNextTick",value:function _ScheduleNextTick(){if(!this._isBrowser&&!this._nextTickScheduled){this._nextTickScheduled=true;process.nextTick(this._Tick)}}},{key:"_Tick",value:function _Tick(p_timestamp){if(this._lastTick===null){this._lastTick=p_timestamp}this._deltaTime=(p_timestamp-this._lastTick)*this._timeScale;this._lastTick=p_timestamp;var currentCl=this._nextTick;this._nextTick=currentCl===this._clA?this._clB:this._clA;currentCl.nFFlush(this._deltaTime);this._B(S.TICK,this._deltaTime);if(this._isBrowser){window.requestAnimationFrame(this._Tick)}else{this._nextTickScheduled=false;if(this._nextTick.count>0){this._ScheduleNextTick()}}}}],[{key:"NEXT_TICK",set:function set(p_fn){TIME.instance.NextTickA(p_fn)}}]);return TIME}(SingletonEx);mdl.xp["default"]=mdl.xp=TIME}).call(this)}).call(this,rq("_process"))},{83:32,82:37,74:45,13:268,_process:274}],51:[function(rq,mdl,xp){"use strict";var _rq61=rq(14),BindingKit=_rq61.BindingKit;var _rq62=rq(84),Metadata=_rq62.Metadata,DataBlock=_rq62.DataBlock;var _rq63=rq(85),TEXTSerializer=_rq63.TEXTSerializer,JSONSerializer=_rq63.JSONSerializer,SERIALIZATION_CONTEXT=_rq63.SERIALIZATION_CONTEXT;var _rq64=rq(86),MetadataJSONSerializer=_rq64.MetadataJSONSerializer,DataBlockJSONSerializer=_rq64.DataBlockJSONSerializer;var Bindings=function(_BindingKit){_inherits(Bindings,_BindingKit);var _super23=_createSuper(Bindings);function Bindings(){_cCC(this,Bindings);return _super23.call(this)}_cC(Bindings,[{key:"_In",value:function _In(){_get(_gPO(Bindings.prototype),"_In",this).call(this);this.AClasses(Metadata,DataBlock);this.A({context:SERIALIZATION_CONTEXT.SERIALIZER,kvps:[{key:SERIALIZATION_CONTEXT.JSON,binding:JSONSerializer},{key:SERIALIZATION_CONTEXT.TEXT,binding:TEXTSerializer}]},{context:SERIALIZATION_CONTEXT.JSON,kvps:[{key:Metadata,binding:MetadataJSONSerializer},{key:DataBlock,binding:DataBlockJSONSerializer}]})}}]);return Bindings}(BindingKit);mdl.xp["default"]=mdl.xp=Bindings},{84:65,85:73,86:75,14:27}],52:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={DATA_S:rq(87),Metadata:rq(88),MetadataObserver:rq(89),ID:rq(90),Repertoire:rq(91),DataBlock:rq(92),DataFactory:rq(93),CATALOG_S:rq(94),CATALOG_SORTING:rq(95),CgItem:rq(96),Cg:rq(97),CgSelection:rq(98),CgSearch:rq(99),CgWer:rq(100),CgHandler:rq(101),DataObserver:rq(102),b_Serializer:rq(103),JSONSerializer:rq(104),TEXTSerializer:rq(105),SERIALIZATION_CONTEXT:rq(106),JSONSerializers:rq(86)};rq(14).BINDINGS.Expand(rq(107))},{107:51,97:60,101:53,96:54,99:55,98:56,94:57,95:58,100:59,87:62,92:63,93:64,88:66,91:67,102:68,89:69,90:71,86:75,106:77,103:78,104:79,105:80,14:27}],53:[function(rq,mdl,xp){"use strict";var _rq65=rq(13),U=_rq65.U;var _rq66=rq(18),Dictionary=_rq66.Dictionary;var _rq67=rq(14),S=_rq67.S,__dOEx=_rq67.__dOEx,Observer=_rq67.Observer;var CATALOG_S=rq(108);var CgItem=rq(109);var Cg=rq(110);var CgWer=rq(111);var CgHandler=function(_CgWer){_inherits(CgHandler,_CgWer);var _super24=_createSuper(CgHandler);function CgHandler(){_cCC(this,CgHandler);return _super24.call(this)}_cC(CgHandler,[{key:"_In",value:function _In(){_get(_gPO(CgHandler.prototype),"_In",this).call(this)}},{key:"_OnCgItemAd",value:function _OnCgItemAd(p_catalog,it){if(!_get(_gPO(CgHandler.prototype),"_OnCgItemAd",this).call(this,p_catalog,it)){return false}this._B(S.ITEM_ADDED,this,it,null);return true}},{key:"_OnCgItemRMd",value:function _OnCgItemRMd(p_catalog,it){var mappedObject=_get(_gPO(CgHandler.prototype),"_OnCgItemRMd",this).call(this,p_catalog,it);if(mappedObject===false){return false}this._B(S.ITEM_REMOVED,this,it,mappedObject);return mappedObject}}]);return CgHandler}(CgWer);mdl.xp["default"]=mdl.xp=CgHandler},{110:60,109:54,108:57,111:59,18:21,14:27,13:268}],54:[function(rq,mdl,xp){"use strict";var _rq68=rq(13),U=_rq68.U;var _rq69=rq(14),COM_ID=_rq69.COM_ID,S=_rq69.S,OptionObject=_rq69.OptionObject;var _rq70=rq(14),DelayedCall=_rq70.DelayedCall;var DATA_ID=rq(112);var CATALOG_S=rq(108);var CgItem=function(_OptionObject){_inherits(CgItem,_OptionObject);var _super25=_createSuper(CgItem);function CgItem(){_cCC(this,CgItem);return _super25.call(this)}_cC(CgItem,[{key:"_In",value:function _In(){_get(_gPO(CgItem.prototype),"_In",this).call(this);this._parent=null;this._isDir=false;this._rootCg=null;this._rootDistance=-1;this._autoRelease=true;this._delayedU=new DelayedCall(this._Bind(this._OnU));this._optionHandler.wrapUpFn=this._Bind(this._OnOptionsUd);this._optionHandler.H(COM_ID.DATA);this._optionHandler.H(DATA_ID.BOUND)}},{key:"isDir",get:function get(){return this._isDir}},{key:"rootCg",get:function get(){return this._rootCg},set:function set(v){this._rootCg=v}},{key:"rootDistance",get:function get(){return this._rootDistance},set:function set(v){this._rootDistance=v}},{key:"autoRelease",get:function get(){return this._autoRelease},set:function set(v){this._autoRelease=v}},{key:"parent",get:function get(){return this._parent},set:function set(v){if(this._parent===v){return}var oldValue=this._parent;this._parent=v;if(oldValue){oldValue.RM(this)}if(v){v.A(this)}}},{key:"_OnOptionsUd",value:function _OnOptionsUd(o){this._delayedU.Schedule()}},{key:"name",get:function get(){return this._options[COM_ID.NAME]},set:function set(v){this.SOption(COM_ID.NAME,v)}},{key:"path",get:function get(){return this._options[COM_ID.PATH]},set:function set(v){this.SOption(COM_ID.PATH,v)}},{key:"dataBound",get:function get(){return this._options[DATA_ID.BOUND]},set:function set(v){this.SOption(DATA_ID.BOUND,v)}},{key:"data",get:function get(){return this._options[COM_ID.DATA]},set:function set(v){var p_oldValue=this._options[COM_ID.DATA];this._options[COM_ID.DATA]=v;this._OnDataCh(v,p_oldValue)}},{key:"primaryCommand",get:function get(){return this._options[COM_ID.CMD_PRIMARY]},set:function set(v){this.SOption(COM_ID.CMD_PRIMARY,v)}},{key:"secondaryCommand",get:function get(){return this._options[COM_ID.CMD_SECONDARY]},set:function set(v){this.SOption(COM_ID.CMD_SECONDARY,v)}},{key:"commandList",get:function get(){return this._options[COM_ID.CMD_LIST]},set:function set(v){this.SOption(COM_ID.CMD_LIST,v)}},{key:"_OnDataCh",value:function _OnDataCh(p_newData,p_oldData){if(p_oldData&&"Uw"in p_oldData){p_oldData.Uw(S.RELEASED,this._OnDataReleased,this)}if(p_newData&&"W"in p_newData){p_newData.W(S.RELEASED,this._OnDataReleased,this)}this._B(CATALOG_S.ITEM_DATA_CHANGED,this,p_newData,p_oldData);this._delayedU.Schedule()}},{key:"_OnDataReleased",value:function _OnDataReleased(p_data){this._B(CATALOG_S.ITEM_DATA_RELEASED,this,p_data);if(this._options[DATA_ID.BOUND]){this.Release()}}},{key:"ACommand",value:function ACommand(p_cmd){var cmdList=this.GOrSOption(COM_ID.CMD_LIST,[],false);if(cmdList.includes(p_cmd)){return}cmdList.push(p_cmd);this._delayedU.Schedule()}},{key:"_CleanUp",value:function _CleanUp(){if(this._parent){this._parent.RM(this)}this._autoRelease=true;this._parent=null;this._rootCg=null;this._rootDistance=-1;this.data=null;_get(_gPO(CgItem.prototype),"_CleanUp",this).call(this)}},{key:"_OnU",value:function _OnU(){this._B(S.UPDATED,this)}},{key:"toString",value:function toString(){return"".concat(this._options[COM_ID.NAME]," (").concat(this.constructor.name,")")}}]);return CgItem}(OptionObject);mdl.xp["default"]=mdl.xp=CgItem},{112:61,108:57,14:27,13:268}],55:[function(rq,mdl,xp){"use strict";var _rq71=rq(13),U=_rq71.U;var _rq72=rq(14),S=_rq72.S,POOL=_rq72.POOL,__dOEx=_rq72.__dOEx;var CgSearch=function(___dOEx7){_inherits(CgSearch,___dOEx7);var _super26=_createSuper(CgSearch);function CgSearch(){_cCC(this,CgSearch);return _super26.call(this)}_cC(CgSearch,[{key:"_In",value:function _In(){_get(_gPO(CgSearch.prototype),"_In",this).call(this);this._searchResult=new CgSearch;this._sourceCg=null}}]);return CgSearch}(__dOEx);mdl.xp["default"]=mdl.xp=CgSearch},{14:27,13:268}],56:[function(rq,mdl,xp){"use strict";var _rq73=rq(13),U=_rq73.U;var _rq74=rq(14),S=_rq74.S;var Cg=rq(110);var CgSelection=function(_Cg){_inherits(CgSelection,_Cg);var _super27=_createSuper(CgSelection);function CgSelection(){_cCC(this,CgSelection);return _super27.call(this)}_cC(CgSelection,[{key:"GOrCreateCg",value:function GOrCreateCg(o){throw new Error("CgSelection does not support item creation.")}},{key:"Register",value:function Register(itInfos){throw new Error("CgSelection does not support item creation.")}},{key:"_OnItemAd",value:function _OnItemAd(it){this._B(S.ITEM_ADDED,this,it);it.W(S.RELEASED,this._OnItemReleased,this);if(this._autoSort){this._delayedSort.Schedule()}}},{key:"_OnItemRMd",value:function _OnItemRMd(it){this._B(S.ITEM_REMOVED,this,it);it.Uw(S.RELEASED,this._OnItemReleased,this)}},{key:"Clear",value:function Clear(){var list=this._items,n=list.length;while(n!=0){this.RM(list[n-1]);n=list.length}list.length=0;this._delayedSort.Cancel()}}]);return CgSelection}(Cg);mdl.xp["default"]=mdl.xp=CgSelection},{110:60,14:27,13:268}],57:[function(rq,mdl,xp){"use strict";var CATALOG_S=function CATALOG_S(){_cCC(this,CATALOG_S)};_defineProperty(CATALOG_S,"ROOT_ITEM_ADDED",Symbol("rootItemAd"));_defineProperty(CATALOG_S,"ROOT_ITEM_REMOVED",Symbol("rootItemRMd"));_defineProperty(CATALOG_S,"ITEM_DATA_CHANGED",Symbol("dataItemAd"));_defineProperty(CATALOG_S,"ITEM_DATA_RELEASED",Symbol("dataItemRMd"));_defineProperty(CATALOG_S,"ITEM_DATA_UPDATED",Symbol("dataItemUd"));_defineProperty(CATALOG_S,"SORTED",Symbol("sorted"));mdl.xp["default"]=mdl.xp=CATALOG_S},{}],58:[function(rq,mdl,xp){"use strict";var _optionID="";var _compareMethod=null;var CATALOG_SORTING=function(){function CATALOG_SORTING(){_cCC(this,CATALOG_SORTING)}_cC(CATALOG_SORTING,null,[{key:"NAME_ASC",value:function NAME_ASC(p_a,p_b){var a=p_a._isDir,b=p_b._isDir;if(a&&b||!a&&!b){return p_a.name.localeCompare(p_b.name)}else if(!a){return 1}else{return-1}}},{key:"NAME_DSC",value:function NAME_DSC(p_a,p_b){var a=p_a._isDir,b=p_b._isDir;if(a&&b||!a&&!b){return p_a.name.localeCompare(p_b.name)*-1}else if(!a){return 1}else{return-1}}},{key:"NUMERIC_ASC",value:function NUMERIC_ASC(p_a,p_b){return p_a-p_b}},{key:"NUMERIC_DSC",value:function NUMERIC_DSC(p_a,p_b){return p_b-p_a}},{key:"STRING_ASC",value:function STRING_ASC(p_a,p_b){return p_a.localeCompare(p_b)}},{key:"STRING_DSC",value:function STRING_DSC(p_a,p_b){return p_a.localeCompare(p_b)*-1}},{key:"OPTION",value:function OPTION(p_a,p_b){var a=p_a._isDir,b=p_b._isDir;if(a&&b||!a&&!b){return _compareMethod(p_a.GOption(_optionID),p_b.GOption(_optionID))}else if(!a){return 1}else{return-1}}},{key:"SortByOption",value:function SortByOption(p_catalog,p_optionId,p_method){_optionID=p_optionId;_compareMethod=p_method;p_catalog._items.sort(CATALOG_SORTING.OPTION)}}]);return CATALOG_SORTING}();mdl.xp["default"]=mdl.xp=CATALOG_SORTING},{}],59:[function(rq,mdl,xp){"use strict";var _rq75=rq(13),U=_rq75.U;var _rq76=rq(18),Dictionary=_rq76.Dictionary;var _rq77=rq(14),BINDINGS=_rq77.BINDINGS,S=_rq77.S,Observer=_rq77.Observer,__dOEx=_rq77.__dOEx;var CATALOG_S=rq(108);var Cg=rq(113);var CgItem=rq(109);var CgWer=function(___dOEx8){_inherits(CgWer,___dOEx8);var _super28=_createSuper(CgWer);function CgWer(){_cCC(this,CgWer);return _super28.call(this)}_cC(CgWer,[{key:"_In",value:function _In(){_get(_gPO(CgWer.prototype),"_In",this).call(this);this._owner=null;this._catalog=null;this._map=new Map;this._filters=null;this._itemCount=0;this._isEnabled=true;this._isDeepWEnabled=false;this._catalogObserver=new Observer;this._catalogObserver.H(S.ITEM_ADDED,this._OnCgItemAd,this);this._catalogObserver.H(S.ITEM_REMOVED,this._OnCgItemRMd,this);this._catalogObserver.H(CATALOG_S.SORTED,this._OnCgSorted,this)}},{key:"count",get:function get(){return this._map.size}},{key:"owner",get:function get(){return this._owner},set:function set(v){this._owner=v}},{key:"catalog",get:function get(){return this._catalog},set:function set(v){if(this._catalog===v){return}var oldValue=this._catalog;this._catalog=v;if(oldValue){this._catalogObserver.Unobserve(oldValue)}if(v){this._catalogObserver.Observe(v)}this._OnCgCh(oldValue)}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(v){if(v){this.Enable()}else{this.Disable()}}},{key:"Enable",value:function Enable(){if(this._isEnabled){return false}this._isEnabled=true;this._catalogObserver.Enable();if(this._catalog){this._ACgContent(this._catalog,this._isDeepWEnabled)}return true}},{key:"Disable",value:function Disable(){if(!this._isEnabled){return false}this._isEnabled=false;this._catalogObserver.Disable();if(this._catalog){this._RMCgContent(this._catalog,this._isDeepWEnabled)}return true}},{key:"isDeepWEnabled",get:function get(){return this._isDeepWEnabled}},{key:"deepW",set:function set(v){if(this._isDeepWEnabled===v){return}this._isDeepWEnabled=v;if(this._isDeepWEnabled){this._catalogObserver.Uh(S.ITEM_ADDED,this._OnCgItemAd,this);this._catalogObserver.Uh(S.ITEM_REMOVED,this._OnCgItemRMd,this);this._catalogObserver.Uh(CATALOG_S.SORTED,this._OnCgSorted,this);this._catalogObserver.H(CATALOG_S.ROOT_ITEM_ADDED,this._OnCgItemAd,this);this._catalogObserver.H(CATALOG_S.ROOT_ITEM_REMOVED,this._OnCgItemRMd,this);if(this._isEnabled&&this._catalog){this._RMCgContent(this._catalog);this._ACgContent(this._catalog,true)}}else{this._catalogObserver.Uh(CATALOG_S.ROOT_ITEM_ADDED,this._OnCgItemAd,this);this._catalogObserver.Uh(CATALOG_S.ROOT_ITEM_REMOVED,this._OnCgItemRMd,this);this._catalogObserver.H(S.ITEM_ADDED,this._OnCgItemAd,this);this._catalogObserver.H(S.ITEM_REMOVED,this._OnCgItemRMd,this);this._catalogObserver.H(CATALOG_S.SORTED,this._OnCgSorted,this);if(this._isEnabled&&this._catalog){this._RMCgContent(this._catalog,true);this._ACgContent(this._catalog)}}}},{key:"_ACgContent",value:function _ACgContent(p_catalog){var p_deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var list=p_catalog._items;if(p_deep){for(var i=0,n=list.length;i<n;i++){var item=list[i];if(item.isDir){this._ACgContent(item,p_deep)}else{this._OnCgItemAd(p_catalog,item)}}}else{for(var _i12=0,_n12=list.length;_i12<_n12;_i12++){var _item=list[_i12];this._OnCgItemAd(p_catalog,_item)}}}},{key:"_RMCgContent",value:function _RMCgContent(p_catalog){var p_deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var list=p_catalog._items;if(p_deep){for(var i=0,n=list.length;i<n;i++){var item=list[i];if(item.isDir){this._RMCgContent(item,p_deep)}else{this._OnCgItemRMd(p_catalog,item)}}}else{for(var _i13=0,_n13=list.length;_i13<_n13;_i13++){var _item2=list[_i13];this._OnCgItemRMd(p_catalog,_item2)}}}},{key:"_OnCgCh",value:function _OnCgCh(p_oldValue){if(!this._isEnabled){return false}if(p_oldValue){this._RMCgContent(p_oldValue,this._isDeepWEnabled)}if(this._catalog){this._ACgContent(this._catalog,this._isDeepWEnabled)}return true}},{key:"_OnCgItemAd",value:function _OnCgItemAd(p_catalog,it){if(this._isDeepWEnabled){if(it.isDir||it.rootDistance<=this._catalog.rootDistance){return false}}this._itemCount++;if(this._filters&&!this._filters.Check(it)){return false}it.W(CATALOG_S.ITEM_DATA_RELEASED,this._OnItemDataReleased,this);return true}},{key:"_OnCgItemRMd",value:function _OnCgItemRMd(p_catalog,it){if(this._isDeepWEnabled){if(it.isDir||it.rootDistance<=this._catalog.rootDistance){return false}}this._itemCount--;if(!it.isReleasing){it.Uw(CATALOG_S.ITEM_DATA_RELEASED,this._OnItemDataReleased,this)}var mappedObject=this._map.get(it);if(mappedObject){this._map["delete"](it)}return mappedObject}},{key:"_OnItemDataReleased",value:function _OnItemDataReleased(it,p_data){}},{key:"_OnCgSorted",value:function _OnCgSorted(p_catalog){this._B(CATALOG_S.SORTED,this)}},{key:"S",value:function S(it,p_mappedValue){this._map.set(it,p_mappedValue);return p_mappedValue}},{key:"G",value:function G(it){return this._map.get(it)}},{key:"GAt",value:function GAt(p_index){return this._map.get(this._catalog._items[p_index])}},{key:"GValueKeys",value:function GValueKeys(v){var keys=this._map.keys,results=null;for(var i=0,n=keys.length;i<n;i++){var key=keys[i],value=this._map.G(key);if(value===v){if(!results){results=new Array(1)}results.push(key)}}return results}},{key:"_CleanUp",value:function _CleanUp(){this.flattened=false;this.catalog=null;this._owner=null;this._isEnabled=true;this._itemCount=0;_get(_gPO(CgWer.prototype),"_CleanUp",this).call(this)}}]);return CgWer}(__dOEx);mdl.xp["default"]=mdl.xp=CgWer},{113:60,109:54,108:57,18:21,14:27,13:268}],60:[function(rq,mdl,xp){"use strict";var _rq78=rq(13),U=_rq78.U;var _rq79=rq(14),BINDINGS=_rq79.BINDINGS,S=_rq79.S,POOL=_rq79.POOL,COM_ID=_rq79.COM_ID;var _rq80=rq(14),DelayedCall=_rq80.DelayedCall;var CATALOG_S=rq(108);var CATALOG_SORTING=rq(114);var CgItem=rq(109);var Cg=function(_CgItem){_inherits(Cg,_CgItem);var _super29=_createSuper(Cg);function Cg(){var _this3;var p_autoSort=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;_cCC(this,Cg);_this3=_super29.call(this);_this3.autoSort=p_autoSort;return _this3}_cC(Cg,[{key:"_In",value:function _In(){_get(_gPO(Cg.prototype),"_In",this).call(this);this._optionHandler.beginFn=this._Bind(this._OnOptionsWillU);this._optionHandler.H("autoSort","autoSort");this._isDir=true;this._expanded=false;this._items=new Array(0);this._rootCg=this;this._sortPending=false;this._autoSort=true;this._defaultSortFunc=null;this._delayedSort=new DelayedCall(this._Bind(this.Sort))}},{key:"expanded",get:function get(){return this._expanded},set:function set(v){this._expanded=v}},{key:"count",get:function get(){return this._items.length}},{key:"rootCg",set:function set(v){if(this._rootCg===v){return}this._rootCg=v;var distancePlusOne=this._rootDistance+1;for(var i=0,n=this._items.length;i<n;i++){var item=this._items[i];item.rootCg=this._rootCg;item.rootDistance=distancePlusOne}}},{key:"_OnOptionsWillU",value:function _OnOptionsWillU(o){this.autoSort=U.G(o,"autoSort",this._parent?this._parent.autoSort:this._autoSort)}},{key:"At",value:function At(p_index){if(this._items.length<=p_index){throw new Error("Argument error : Cg index outside boundaries.")}return this._items[p_index]}},{key:"ForEach",value:function ForEach(p_fn){var p_this=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_reverse=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=this._items.length;if(p_this){if(p_reverse){for(var i=n-1;i>=0;i--){p_fn.call(p_this,this._items[i],i)}}else{for(var _i14=0;_i14<n;_i14++){p_fn.call(p_this,this._items[_i14],_i14)}}}else{if(p_reverse){for(var _i15=n-1;_i15>=0;_i15--){p_fn.call(null,this._items[_i15],_i15)}}else{for(var _i16=0;_i16<n;_i16++){p_fn.call(null,this._items[_i16],_i16)}}}}},{key:"GOrCreateCg",value:function GOrCreateCg(o){var _U$Ensure;var catalogName=U.isString(o)?o:o[COM_ID.NAME];var list=this._items,catalog=null;for(var i=0,n=list.length;i<n;i++){catalog=list[i];if(U.isInstanceOf(catalog,Cg)&&catalog.name===catalogName){return catalog}}catalog=POOL.Rt(Cg.GItemClass(o,true));catalog.options=U.Ensure(U.isObject(o)?o:{},(_U$Ensure={},_defineProperty(_U$Ensure,COM_ID.NAME,catalogName),_defineProperty(_U$Ensure,COM_ID.ICON,"%ICON%/icon_directory.svg"),_U$Ensure));return this.A(catalog)}},{key:"Register",value:function Register(itInfos){if(!itInfos){throw new Error("Cannot register item with null infos")}var pathInfos=Cg.PathInfos(itInfos.path);if(!pathInfos.valid||!pathInfos.path){var _U$EnsureMultiple;var item=POOL.Rt(Cg.GItemClass(itInfos));item.options=U.EnsureMultiple(itInfos,(_U$EnsureMultiple={},_defineProperty(_U$EnsureMultiple,COM_ID.NAME,pathInfos.name),_defineProperty(_U$EnsureMultiple,COM_ID.icon,"%ICON%/icon_document.svg"),_U$EnsureMultiple));return this.A(item)}if(this._rootCg!=this){return this._rootCg.Register(itInfos)}var path=pathInfos.path,catalog=null;for(var i=0,n=path.length;i<n;i++){catalog=(i===0?this:catalog).GOrCreateCg(path[i])}if(pathInfos.isDir){var _U$EnsureMultiple2;catalog.options=U.EnsureMultiple(itInfos,(_U$EnsureMultiple2={},_defineProperty(_U$EnsureMultiple2,COM_ID.NAME,pathInfos.name),_defineProperty(_U$EnsureMultiple2,COM_ID.icon,"%ICON%/icon_directory.svg"),_U$EnsureMultiple2));return catalog}else{var _U$EnsureMultiple3;var _item3=POOL.Rt(Cg.GItemClass(itInfos));_item3.options=U.EnsureMultiple(itInfos,(_U$EnsureMultiple3={},_defineProperty(_U$EnsureMultiple3,COM_ID.NAME,pathInfos.name),_defineProperty(_U$EnsureMultiple3,COM_ID.icon,"%ICON%/icon_document.svg"),_U$EnsureMultiple3));return catalog.A(_item3)}}},{key:"A",value:function A(it){if(!U.isInstanceOf(it,CgItem)){throw new Error("Cannot A a non-CgItem (".concat(it,") to Cg."))}if(this._items.includes(it)){return null}this._items.push(it);this._OnItemAd(it);return it}},{key:"_OnItemAd",value:function _OnItemAd(it){it.parent=this;it.rootCg=this._rootCg;it.rootDistance=this._rootDistance+1;it.W(S.RELEASED,this._OnItemReleased,this);if(this._rootCg){this._rootCg._B(CATALOG_S.ROOT_ITEM_ADDED,this._rootCg,it)}this._B(S.ITEM_ADDED,this,it);if(this._autoSort){this._delayedSort.Schedule()}}},{key:"_OnItemReleased",value:function _OnItemReleased(it){this.RM(it)}},{key:"RM",value:function RM(it){if(!U.isInstanceOf(it,CgItem)){return}var index=this._items.indexOf(it);if(index===-1){return}this._items.splice(index,1);this._OnItemRMd(it)}},{key:"_OnItemRMd",value:function _OnItemRMd(it){this._B(S.ITEM_REMOVED,this,it);if(this._rootCg){this._rootCg._B(CATALOG_S.ROOT_ITEM_REMOVED,this._rootCg,it)}it.Uw(S.RELEASED,this._OnItemReleased,this);if(it.parent===this){it.parent=null;if(it.autoRelease){it.Release()}}}},{key:"Resolve",value:function Resolve(p_path){var p_from=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0}},{key:"FindDataHolders",value:function FindDataHolders(p_data){var p_results=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!p_results){p_results=new Array(0)}for(var i=0,n=this._items.length;i<n;i++){var item=this._items[i];if(item.data===p_data){if(!p_results.includes(item)){p_results.push(item)}}if(U.isInstanceOf(item,Cg)){item.FindDataHolders(p_data,p_results)}}return p_results}},{key:"FindFirstDataHolder",value:function FindFirstDataHolder(p_data){for(var i=0,n=this._items.length;i<n;i++){var item=this._items[i];if(item.data===p_data){return item}if(U.isInstanceOf(item,Cg)){item=item.FindDataHolders(p_data);if(item){return item}}}return null}},{key:"FindFirstDataByStringID",value:function FindFirstDataByStringID(p_stringID){for(var i=0,n=this._items.length;i<n;i++){var item=this._items[i],idata=item.data;if(idata&&idata.id&&idata.id.name===p_stringID){return item}}return null}},{key:"FindFirstByOptionValue",value:function FindFirstByOptionValue(p_key,v){for(var i=0,n=this._items.length;i<n;i++){var item=this._items[i],opt=item._options[p_key];if(opt&&opt===v){return item}}return null}},{key:"autoSort",get:function get(){return this._autoSort},set:function set(v){if(this._autoSort===v){return}this._autoSort=v;if(v){this._delayedSort.Schedule()}else{this._delayedSort.Cancel()}}},{key:"defaultSortFunc",get:function get(){return this._defaultSortFunc},set:function set(v){this._defaultSortFunc=v}},{key:"Sort",value:function Sort(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var sorted=false;if(!o){this._items.sort(this._defaultSortFunc?this._defaultSortFunc:CATALOG_SORTING.NAME_ASC);sorted=true}else{if(o.id){CATALOG_SORTING.SortByOption(this,o.id,o.fn);sorted=true}else if(o.fn){this._items.sort(o.fn);sorted=true}}if(sorted){this._B(CATALOG_S.SORTED,this)}}},{key:"Clear",value:function Clear(){var n=this._items.length-1;while(n>0){this._items[n].Release();n--}this._items.length=0;this._delayedSort.Cancel()}},{key:"_CleanUp",value:function _CleanUp(){this.Clear();this._autoSort=true;this._defaultSortFunc=null;_get(_gPO(Cg.prototype),"_CleanUp",this).call(this);this._rootCg=this;this._rootDistance=-1}},{key:"StructToString",value:function StructToString(){var p_string=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_depth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!p_string){p_string=""}if(U.isVoid(p_depth)){p_depth=-1}p_depth++;var s="\t",spaces="";for(var i=0;i<p_depth;i++){spaces+=s}p_string+="".concat(spaces,"/").concat(this._name," \n");for(var _i17=0,n=this._items.length;_i17<n;_i17++){var item=this._items[_i17];if(U.isInstanceOf(item,Cg)){p_string=item.StructToString(p_string,p_depth)}else{p_string+="".concat(spaces).concat(s,"· ").concat(item.name,"\n")}}return p_string}},{key:"toString",value:function toString(){return"!".concat(this._name," (").concat(this._items.length,")")}}],[{key:"PathInfos",value:function PathInfos(p_path){var result={path:null,isDir:false,name:null,valid:false};if(!p_path){return result}else{result.valid=true}var pathSplit=p_path.split("/"),isDir=false,name="";if(pathSplit.length===1){name=pathSplit[0]}else{var pathArray=new Array;for(var i=0,n=pathSplit.length;i<n;i++){var current=pathSplit.shift();if(!U.isEmpty(current)){pathArray.push(current)}else if(i===n-1){isDir=true}}if(isDir){name=pathArray[pathArray.length-1]}else{name=pathArray.pop()}result.path=pathArray}result.isDir=isDir;result.name=name;return result}},{key:"CreateFrom",value:function CreateFrom(p_rootOptions,p_content){var p_parent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!p_content&&!p_rootOptions){throw new Error("Cannot create Cg from null options nor struct.")}var catalog=POOL.Rt(this.GItemClass(p_rootOptions,true));catalog.options=p_rootOptions;if(p_parent){catalog.parent=p_parent}if(p_content){for(var i=0,n=p_content.length;i<n;i++){var item_options=p_content[i];if(item_options.hasOwnProperty("content")){Cg.CreateFrom(item_options,item_options.content,catalog)}else{catalog.Register(item_options)}}}return catalog}},{key:"GItemClass",value:function GItemClass(itOptions){var p_forceCg=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var itemClass=null;if(U.isObject(itOptions)){var data=U.G(itOptions,"data",null);if(data){itemClass=BINDINGS.G(Cg,data,null)}if(!itemClass){if(p_forceCg||U.isArray(U.G(itOptions,"content",null))){itemClass=this.__default_catalogClass}else{itemClass=this.__default_itemClass}}}else{itemClass=p_forceCg?this.__default_catalogClass:this.__default_itemClass}return itemClass}}]);return Cg}(CgItem);_defineProperty(Cg,"__default_catalogClass",Cg);_defineProperty(Cg,"__default_itemClass",CgItem);mdl.xp["default"]=mdl.xp=Cg},{109:54,108:57,114:58,14:27,13:268}],61:[function(rq,mdl,xp){"use strict";var DATA_ID=function DATA_ID(){_cCC(this,DATA_ID)};_defineProperty(DATA_ID,"AUTO_RELEASE","autoRelease");_defineProperty(DATA_ID,"BOUND","dataBound");mdl.xp["default"]=mdl.xp=DATA_ID},{}],62:[function(rq,mdl,xp){"use strict";var DATA_S=function DATA_S(){_cCC(this,DATA_S)};_defineProperty(DATA_S,"ITEM_REGISTERED",Symbol("itemRegistered"));_defineProperty(DATA_S,"ITEM_UNREGISTERED",Symbol("itemUnregistered"));_defineProperty(DATA_S,"ITEM_UPDATED",Symbol("itemUd"));_defineProperty(DATA_S,"META_ADDED",Symbol("metaAd"));_defineProperty(DATA_S,"META_REMOVED",Symbol("metaRMd"));_defineProperty(DATA_S,"META_UPDATED",Symbol("metaUd"));_defineProperty(DATA_S,"META_MID_UPDATE",Symbol("metaMidU"));_defineProperty(DATA_S,"DIRTY",Symbol("dirty"));_defineProperty(DATA_S,"DIRTY_CLEARED",Symbol("dirty-cleared"));_defineProperty(DATA_S,"VALUE_CHANGED",Symbol("valueCh"));mdl.xp["default"]=mdl.xp=DATA_S},{}],63:[function(rq,mdl,xp){"use strict";var _defineProperty2;var _rq81=rq(14),COM_ID=_rq81.COM_ID,S=_rq81.S,__dOEx=_rq81.__dOEx;var DATA_S=rq(115);var Metadata=rq(116);var ID=rq(117);var DataBlock=function(___dOEx9){_inherits(DataBlock,___dOEx9);var _super30=_createSuper(DataBlock);function DataBlock(){_cCC(this,DataBlock);return _super30.call(this)}_cC(DataBlock,[{key:"_In",value:function _In(){_get(_gPO(DataBlock.prototype),"_In",this).call(this);this._id=null;this._isTemp=false;this._metadirty=false;this._isDirty=false;this._ecosystem=null;this._metadata=new Metadata;this._metadata.owner=this;this._metadata.W(DATA_S.DIRTY,this.Dirty,this);this._metadata.W(DATA_S.DIRTY_CLEARED,this._OnMetadataCleaned,this);this._ready=true}},{key:"ready",get:function get(){return this._ready}},{key:"metadata",get:function get(){return this._metadata}},{key:"uri",get:function get(){"".concat(this._id.name)}},{key:"isDirty",get:function get(){return this._isDirty}},{key:"Dirty",value:function Dirty(){if(this._isDirty){return}this._isDirty=true;this._B(DATA_S.DIRTY,this)}},{key:"ClearDirty",value:function ClearDirty(){if(!this._isDirty){return}this._isDirty=false;this._B(DATA_S.DIRTY_CLEARED,this)}},{key:"id",get:function get(){return this._id},set:function set(v){if(this._id===v){return}var oldId=this._id;this._id=v;if(oldId){oldId.Uw(S.RENAMED,this.Dirty,this)}if(v){v.W(S.RENAMED,this.Dirty,this)}}},{key:"name",get:function get(){return this._id?this._id.name:""}},{key:"isTemp",get:function get(){return this._isTemp}},{key:"CommitU",value:function CommitU(){this.Dirty();this._B(S.UPDATED,this)}},{key:"Pack",value:function Pack(){return{"!!!warning!!!":"you must re-implement the DataBlock.Pack() method in your data objects !"}}},{key:"Unpack",value:function Unpack(p_object){}},{key:"_CleanUp",value:function _CleanUp(){if(this._id){this._id.Release();this._id=null}this._metadata._dirty=false;this._metadirty=false;this._isDirty=false;this._ready=true;this._isTemp=false;this._metadata.Clear();_get(_gPO(DataBlock.prototype),"_CleanUp",this).call(this)}},{key:"_OnMetadataCleaned",value:function _OnMetadataCleaned(){}},{key:"toString",value:function toString(){if(this._id){return"[".concat(this.constructor.name,"::").concat(this._id.name,"]")}else{return"[".concat(this.constructor.name,"::]")}}}]);return DataBlock}(__dOEx);_defineProperty(DataBlock,"__NFO__",(_defineProperty2={},_defineProperty(_defineProperty2,COM_ID.ICON,"%ICON%/icon_data_block.svg"),_defineProperty(_defineProperty2,COM_ID.UID,"@nkmjs/data-core:data-block"),_defineProperty2));mdl.xp["default"]=mdl.xp=DataBlock},{115:62,117:71,116:66,14:27}],64:[function(rq,mdl,xp){"use strict";var _rq82=rq(13),U=_rq82.U;var _rq83=rq(18),List=_rq83.List;var _rq84=rq(14),S=_rq84.S,POOL=_rq84.POOL,__dOEx=_rq84.__dOEx;var DATA_S=rq(115);var DataBlock=rq(118);var Repertoire=rq(119);var DataFactory=function(___dOEx10){_inherits(DataFactory,___dOEx10);var _super31=_createSuper(DataFactory);function DataFactory(){_cCC(this,DataFactory);return _super31.call(this)}_cC(DataFactory,[{key:"_In",value:function _In(){_get(_gPO(DataFactory.prototype),"_In",this).call(this);this._id=null;this._tempItemList=new List(0);this._itemRep=new Repertoire;this._itemRep.W(DATA_S.ITEM_REGISTERED,this._OnItemRegistered,this);this._itemRep.W(DATA_S.ITEM_UNREGISTERED,this._OnItemUnregistered,this);this._itemClass=null}},{key:"id",get:function get(){return this._id},set:function set(v){_set(_gPO(DataFactory.prototype),"_id",v,this,true)}},{key:"itemClass",get:function get(){return this._itemClass},set:function set(v){if(!U.isInstanceOf(v,DataBlock)){throw new Error("itemClass must inherit DataBlock")}this._itemClass=v}},{key:"itemList",get:function get(){return this._itemRep.itemList}},{key:"count",get:function get(){return this._itemRep.itemList.length}},{key:"IsIDAvailable",value:function IsIDAvailable(p_stringID){return this._itemRep.IsIDAvailable(p_stringID)}},{key:"CreateTemp",value:function CreateTemp(){var p_class=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var cl=this._itemClass;if(!U.isVoid(p_class)){if(!U.isInstanceOf(p_class,cl)){throw new Error("CreateTemp custom constructor (".concat(p_class,") does not extends factory constructor (").concat(this._itemClass.name,")"))}else{cl=p_class}}if(U.isVoid(cl)){throw new Error("Cannot create temp item with no itemClass set.")}var newItem=POOL.Rt(cl);newItem._isTemp=true;this._tempItemList.A(newItem);newItem.W(S.RELEASED,this._OnItemReleased,this);return newItem}},{key:"Register",value:function Register(it,p_id){if(!this._tempItemList.Contains(it)){throw new Error("Cannot register an item that hasn't been created by this factory.")}else{this._tempItemList.RM(it);it._isTemp=false}this._itemRep.Register(it,p_id);return it}},{key:"_OnItemRegistered",value:function _OnItemRegistered(p_repertoire,it){this._B(DATA_S.ITEM_REGISTERED,this,it)}},{key:"Unregister",value:function Unregister(it){this._itemRep.Unregister(it);it.Release()}},{key:"_OnItemUnregistered",value:function _OnItemUnregistered(p_repertoire,it){this._B(DATA_S.ITEM_UNREGISTERED,this,it)}},{key:"_OnItemReleased",value:function _OnItemReleased(it){this._tempItemList.RM(it)}},{key:"G",value:function G(p_id){return this._itemRep.G(p_id)}},{key:"_CleanUp",value:function _CleanUp(){throw new Error("CleanUp Not implemented in ".concat(this.constructor.name));this._itemClass=null;_get(_gPO(DataFactory.prototype),"_CleanUp",this).call(this)}}]);return DataFactory}(__dOEx);mdl.xp["default"]=mdl.xp=DataFactory},{115:62,118:63,119:67,18:21,14:27,13:268}],65:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={Metadata:rq(116),DataBlock:rq(118),Repertoire:rq(119),DataFactory:rq(120)}},{118:63,120:64,116:66,119:67}],66:[function(rq,mdl,xp){"use strict";var _defineProperty3;var _rq85=rq(13),U=_rq85.U;var _rq86=rq(14),COM_ID=_rq86.COM_ID,S=_rq86.S,POOL=_rq86.POOL,__dOEx=_rq86.__dOEx;var DATA_S=rq(115);var Metadata=function(___dOEx11){_inherits(Metadata,___dOEx11);var _super32=_createSuper(Metadata);function Metadata(){var _this4;_cCC(this,Metadata);_this4=_super32.call(this);_this4._owner=null;_this4._data={};_this4._dirty=false;return _this4}_cC(Metadata,[{key:"owner",get:function get(){return this._owner},set:function set(v){this._owner=v}},{key:"isDirty",get:function get(){return this._isDirty}},{key:"Dirty",value:function Dirty(){if(this._isDirty){return}this._isDirty=true;this._B(DATA_S.DIRTY,this)}},{key:"ClearDirty",value:function ClearDirty(){if(!this._isDirty){return}this._isDirty=false;this._B(DATA_S.DIRTY_CLEARED,this)}},{key:"S",value:function S(p_path,v){var path=null;if(Array.isArray(p_path)){path=p_path}else if(typeof p_path==="string"){path=p_path.split(".")}else{throw new Error("Path ".concat(p_path," is invalid."))}var element=this._data,lastElement=element,i=0,n=path.length,countMinusOne=n-1,dispatch=false,created=false,previousValue=null;while(i<n){var id=path[i];if(i===countMinusOne){var existingValue=lastElement[id];if(U.isVoid(existingValue)){created=true}if(existingValue===v){return v}dispatch=true;previousValue=existingValue;lastElement[id]=v;lastElement=v}else{element=lastElement[id];if(U.isVoid(element)){element={};lastElement[id]=element}lastElement=element}i++}if(dispatch){if(created){this._B(DATA_S.META_ADDED,this,p_path,lastElement)}n-=1;for(var p=0;p<n;p++){this._B(DATA_S.META_MID_UPDATE,this,U.Join(path,".",0,p))}this._B(DATA_S.META_UPDATED,this,p_path,lastElement,previousValue);this._B(S.UPDATED,this);this.Dirty()}return lastElement}},{key:"G",value:function G(p_path){var p_fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var path=null;if(Array.isArray(p_path)){path=p_path}else if(U.isString(p_path)){path=p_path.split(".")}else{throw new Error("Path ".concat(p_path," is invalid."))}var element=null;if(U.isVoid(p_fallback)){element=this._data;while(!U.isVoid(element)&&path.length!=0){element=element[path.shift()]}path.length=0;return element}else{element=this._data;var lastElement=element;while(path.length!=0){element=lastElement[path.shift()];if(U.isVoid(element)){path.length=0;this._signals.silent=true;element=this.S(p_path,p_fallback);this._signals.silent=false;return element}lastElement=element}return element}}},{key:"Clear",value:function Clear(){this._data=U.DeepClear(this._data,true)}},{key:"Clone",value:function Clone(){var p_source=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_silent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(p_source){if(U.isInstanceOf(p_source,Metadata)){this._data=U.Clone(p_source._data)}else if(U.isObject(p_source)){this._data=U.Clone(p_source)}else{return}if(!p_silent){this.Dirty()}else{this.ClearDirty()}}else{return Metadata.Copy(this)}}},{key:"toString",value:function toString(){return"{Metadata}"}}],[{key:"Copy",value:function Copy(p_metadata){var newMetadata=POOL.Rt(Metadata);newMetadata._data=U.Clone(p_metadata._data);return newMetadata}}]);return Metadata}(__dOEx);_defineProperty(Metadata,"__NFO__",(_defineProperty3={},_defineProperty(_defineProperty3,COM_ID.ICON,"%ICON%/icon_data_block.svg"),_defineProperty(_defineProperty3,COM_ID.UID,"@nkmjs/data-core:metadata"),_defineProperty3));mdl.xp["default"]=mdl.xp=Metadata},{115:62,14:27,13:268}],67:[function(rq,mdl,xp){"use strict";var _rq87=rq(13),U=_rq87.U;var _rq88=rq(18),Dictionary=_rq88.Dictionary;var _rq89=rq(14),S=_rq89.S,POOL=_rq89.POOL,__dOEx=_rq89.__dOEx;var _rq90=rq(121),ID=_rq90.ID,IDDispenser=_rq90.IDDispenser;var DATA_S=rq(115);var DataBlock=rq(118);var Repertoire=function(___dOEx12){_inherits(Repertoire,___dOEx12);var _super33=_createSuper(Repertoire);function Repertoire(){_cCC(this,Repertoire);return _super33.call(this)}_cC(Repertoire,[{key:"_In",value:function _In(){_get(_gPO(Repertoire.prototype),"_In",this).call(this);this._idDispenser=new IDDispenser;this._itemList=new List(0);this._itemMap=new Dictionary}},{key:"idDispenser",get:function get(){return this._idDispenser}},{key:"itemList",get:function get(){return this._itemList}},{key:"itemMap",get:function get(){return this._itemMap}},{key:"count",get:function get(){return this._itemList.count}},{key:"IndexOf",value:function IndexOf(it){return this._itemList.IndexOf(it)}},{key:"IsIDAvailable",value:function IsIDAvailable(p_stringID){return this._idDispenser.IsAvailable(p_stringID)}},{key:"ContainsID",value:function ContainsID(p_id){return this._idDispenser.ContainsID(p_id)}},{key:"GID",value:function GID(p_stringID){return this._idDispenser.G(p_stringID)}},{key:"ReserveID",value:function ReserveID(p_stringID){if(!this._idDispenser.IsIDAvailable(p_stringID)){throw new Error("Cannot create an ID that already exists.")}var newID=this._idDispenser.Create(p_stringID);newID.W(S.RELEASED,this._OnIDReleased,this);newID.W(S.RENAMED,this._OnIDRenamed,this);return newID}},{key:"_OnIDRenamed",value:function _OnIDRenamed(p_id,p_oldName){this._B(S.RENAMED,p_id,p_oldName)}},{key:"_OnIDReleased",value:function _OnIDReleased(p_id){var item=this._itemMap.G(p_id);if(item){console.warn("An ID (".concat(p_id.name,") has been released. Removing existing item from repertoire."));this.Unregister(item)}}},{key:"Register",value:function Register(it){var p_id=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(U.isVoid(it)){throw new Error("Cannot register a null item.")}if(!U.isInstanceOf(it,DataBlock)){throw new Error("Cannot register a non-DataBlock item.")}if(!U.isVoid(it.id)){throw new Error("Cannot register an item with an ID already set.")}if(this._itemList.Contains(it)){throw new Error("Cannot re-register an item.")}var itemID=null;if(U.isVoid(p_id)){itemID=this.ReserveID(U.unsafeUID)}else{var _itemID=p_id;if(U.isInstanceOf(p_id,ID)){if(this._idDispenser.GID(p_id.name)===p_id){if(this._itemMap.Contains(p_id)){throw new Error("ID(".concat(p_id,") already in use."))}else{}}else{throw new Error("Cannot register an item with an ID(".concat(p_id.name,") that hasn't been provided by this repertoire."))}_itemID=p_id}else{if(!U.isString(p_id)){throw new Error("Cannot register an item with an ID that isn't an ID object nor a string.")}if(U.isEmpty(p_id)){throw new Error("Cannot use empty string as ID. Use null or undefined instead to generate a random one.")}var existingID=this._idDispenser.G(p_id);if(!U.isVoid(existingID)){if(this._itemMap.Contains(existingID)){throw new Error("ID(".concat(p_id,") already in use."))}_itemID=existingID}else{_itemID=this.ReserveID(p_id)}}}this._itemList.A(it);this._itemMap.S(itemID,it);it.id=itemID;this._OnItemRegistered(it);this._B(DATA_S.ITEM_REGISTERED,this,it)}},{key:"_OnItemRegistered",value:function _OnItemRegistered(it){it.W(S.RELEASED,this._OnItemReleased,this)}},{key:"Unregister",value:function Unregister(it){if(U.isVoid(it)){throw new Error("Cannot unregister a null item.")}var itemID=it.id;if(U.isVoid(itemID)){throw new Error("Cannot unregister a item with no ID.")}if(U.isVoid(this._itemList.RM(it))){throw new Error("Cannot unregister an item that is not in the repertoire.")}this._itemMap.RM(itemID);this._OnItemUnregistered(it);this._B(DATA_S.ITEM_UNREGISTERED,this,it);it.id=null;itemID.Release()}},{key:"_OnItemUnregistered",value:function _OnItemUnregistered(it){it.Uw(S.RELEASED,this._OnItemReleased,this)}},{key:"_OnItemReleased",value:function _OnItemReleased(it){this.Unregister(it)}},{key:"G",value:function G(p_id){if(U.isVoid(p_id)){throw new Error("p_id cannot be null or undefined")}if(U.isString(p_id)){var id=this._idDispenser.G(p_id);if(U.isVoid(id)){return null}}else if(U.isInstanceOf(p_id,ID)){}else{throw new Error("p_id must be either of type string or ID.")}return this._itemMap.G(p_id)}},{key:"At",value:function At(p_index){return this._itemList.At(p_index);F}},{key:"Clear",value:function Clear(){}},{key:"_CleanUp",value:function _CleanUp(){this.Clear();_get(_gPO(Repertoire.prototype),"_CleanUp",this).call(this)}}]);return Repertoire}(__dOEx);mdl.xp["default"]=mdl.xp=Repertoire},{115:62,121:72,118:63,18:21,14:27,13:268}],68:[function(rq,mdl,xp){"use strict";var _rq91=rq(13),U=_rq91.U;var _rq92=rq(14),COM_ID=_rq92.COM_ID,Observer=_rq92.Observer;var DataBlock=rq(122);var DataObserver=function(_Observer){_inherits(DataObserver,_Observer);var _super34=_createSuper(DataObserver);function DataObserver(){_cCC(this,DataObserver);return _super34.call(this)}_cC(DataObserver,[{key:"Observe",value:function Observe(p_target){return _get(_gPO(DataObserver.prototype),"Observe",this).call(this,this._ExtractNestedData(p_target))}},{key:"ObserveOnly",value:function ObserveOnly(p_target){return _get(_gPO(DataObserver.prototype),"ObserveOnly",this).call(this,this._ExtractNestedData(p_target))}},{key:"Unobserve",value:function Unobserve(p_target){return _get(_gPO(DataObserver.prototype),"Unobserve",this).call(this,this._ExtractNestedData(p_target))}},{key:"_ExtractNestedData",value:function _ExtractNestedData(v){if(v&&!U.isInstanceOf(v,DataBlock)){if(U.isInstanceOf(v[COM_ID.DATA],DataBlock)){v=v[COM_ID.DATA]}else{v=null}}return v}}]);return DataObserver}(Observer);mdl.xp["default"]=mdl.xp=DataObserver},{122:63,14:27,13:268}],69:[function(rq,mdl,xp){"use strict";var DATA_S=rq(115);var _rq93=rq(14),__dOEx=_rq93.__dOEx,Observer=_rq93.Observer;var _add_="ADD";var _rem_="REM";var _upd_="UPD";var _mpd_="IPD";var MetadataObserver=function(___dOEx13){_inherits(MetadataObserver,___dOEx13);var _super35=_createSuper(MetadataObserver);function MetadataObserver(){_cCC(this,MetadataObserver);return _super35.call(this)}_cC(MetadataObserver,[{key:"_In",value:function _In(){_get(_gPO(MetadataObserver.prototype),"_In",this).call(this);this._observer=new Observer;this._observer.H(DATA_S.META_ADDED,this._OnMetaAd,this);this._observer.H(DATA_S.META_REMOVED,this._OnMetaRMd,this);this._observer.H(DATA_S.META_UPDATED,this._OnMetaUd,this);this._observer.H(DATA_S.META_MID_UPDATE,this._OnMetaMidU,this)}},{key:"target",get:function get(){return this._observer._target},set:function set(v){this._observer.target=v}},{key:"_GPrefix",value:function _GPrefix(p_evt){switch(p_evt){case DATA_S.META_ADDED:return _add_;case DATA_S.META_REMOVED:return _rem_;case DATA_S.META_UPDATED:return _upd_;case DATA_S.META_MID_UPDATE:return _mpd_}throw new Error("Cannot hook to a signal that isn't META_ADDED, META_REMOVED or META_UPDATED")}},{key:"H",value:function H(p_evt,p_path,p_fn,p_subscriber){var evt="".concat(this._GPrefix(p_evt),"@").concat(p_path);this.W(evt,p_fn,p_subscriber)}},{key:"Uh",value:function Uh(p_evt,p_path,p_fn,p_subscriber){var evt="".concat(this._GPrefix(p_evt),"@").concat(p_path);this.Uw(evt,p_fn,p_subscriber)}},{key:"_OnMetaAd",value:function _OnMetaAd(p_meta,p_path,v){var evt="".concat(_add_,"@").concat(p_path);this._B(evt,p_meta,p_path,v)}},{key:"_OnMetaRMd",value:function _OnMetaRMd(p_meta,p_path){var evt="".concat(_rem_,"@").concat(p_path);this._B(evt,p_meta,p_path,v,p_oldValue)}},{key:"_OnMetaUd",value:function _OnMetaUd(p_meta,p_path,v,p_oldValue){var evt="".concat(_upd_,"@").concat(p_path);this._B(evt,p_meta,p_path,v,p_oldValue)}},{key:"_OnMetaMidU",value:function _OnMetaMidU(p_meta,p_path){var evt="".concat(_mpd_,"@").concat(p_path);this._B(evt,p_meta,p_path)}},{key:"_CleanUp",value:function _CleanUp(){this.target=null;_get(_gPO(MetadataObserver.prototype),"_CleanUp",this).call(this)}}]);return MetadataObserver}(__dOEx);mdl.xp["default"]=mdl.xp=MetadataObserver},{115:62,14:27}],70:[function(rq,mdl,xp){"use strict";var _rq94=rq(13),U=_rq94.U;var _rq95=rq(18),Dictionary=_rq95.Dictionary,List=_rq95.List;var _rq96=rq(14),S=_rq96.S,POOL=_rq96.POOL,__dOEx=_rq96.__dOEx;var ID=rq(123);var IDDispenser=function(___dOEx14){_inherits(IDDispenser,___dOEx14);var _super36=_createSuper(IDDispenser);function IDDispenser(){_cCC(this,IDDispenser);return _super36.call(this)}_cC(IDDispenser,[{key:"_In",value:function _In(){_get(_gPO(IDDispenser.prototype),"_In",this).call(this);this._idMap=new Dictionary;this._idList=new List}},{key:"idList",get:function get(){return this._idList}},{key:"IsAvailable",value:function IsAvailable(p_stringID){return!this._idMap.Contains(p_stringID)}},{key:"Contains",value:function Contains(p_id){if(U.isString(p_id)){return this._idMap.Contains(p_id)}else if(U.isInstanceOf(p_id,ID)){return this._idList.Contains(p_id)}throw new Error("p_id must be either string or ID.")}},{key:"G",value:function G(p_string){return this._idMap.G(p_string)}},{key:"Create",value:function Create(p_string){if(!this.IsAvailable(p_string)){throw new Error("ID ".concat(p_string," is not available."))}var newID=POOL.Rt(ID);newID.name=p_string;this._idMap.S(p_string,newID);this._idList.A(newID);newID.W(S.RENAMING,this._OnIDRenaming,this);newID.W(S.RENAMED,this._OnIDRenamed,this);newID.W(S.RELEASED,this._OnIDReleased,this);return newID}},{key:"RM",value:function RM(p_id){if(this._idMap.RM(p_id.name)){p_id.Release();this._idList.RM(p_id);return true}return false}},{key:"_OnIDRenaming",value:function _OnIDRenaming(p_id,p_newName){if(this._idMap.Contains(p_newName)){p_id.PreventRenaming()}}},{key:"_OnIDRenamed",value:function _OnIDRenamed(p_id,p_newName,p_oldName){this._idMap.RM(p_oldName);this._idMap.S(p_newName,p_id)}},{key:"_OnIDReleased",value:function _OnIDReleased(p_id){this.RM(p_id)}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(IDDispenser.prototype),"_CleanUp",this).call(this)}}]);return IDDispenser}(__dOEx);mdl.xp["default"]=mdl.xp=IDDispenser},{123:71,18:21,14:27,13:268}],71:[function(rq,mdl,xp){"use strict";var _rq97=rq(14),S=_rq97.S,POOL=_rq97.POOL,__dOEx=_rq97.__dOEx;var ID=function(___dOEx15){_inherits(ID,___dOEx15);var _super37=_createSuper(ID);function ID(){_cCC(this,ID);return _super37.call(this)}_cC(ID,[{key:"_In",value:function _In(){_get(_gPO(ID.prototype),"_In",this).call(this);this._renamingPrevented=false;this._name=""}},{key:"PreventRenaming",value:function PreventRenaming(){this._renamingPrevented=true}},{key:"name",get:function get(){return this._name},set:function set(v){if(this._name===v){return}this._B(S.RENAMING,this,v);if(this._renamingPrevented){this._renamingPrevented=false;return}var oldName=this._name;this._name=v;this._renamingPrevented=false;this._B(S.RENAMED,this,oldName)}},{key:"_CleanUp",value:function _CleanUp(){this._name="";_get(_gPO(ID.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[ID::".concat(this.name,"]")}}],[{key:"New",value:function New(p_id){var newID=POOL.Rt(ID);newID.name=p_id;return newID}}]);return ID}(__dOEx);mdl.xp["default"]=mdl.xp=ID},{14:27}],72:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={ID:rq(123),IDDispenser:rq(124)}},{123:71,124:70}],73:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={b_Serializer:rq(125),JSONSerializer:rq(126),TEXTSerializer:rq(127),SERIALIZATION_CONTEXT:rq(128),COREJSONSerializers:rq(129)}},{129:75,128:77,125:78,126:79,127:80}],74:[function(rq,mdl,xp){var _rq98=rq(14),BINDINGS=_rq98.BINDINGS;var DataBlock=rq(130);var SERIALIZATION_CONTEXT=rq(131);var b_Serializer=rq(132);var __metaID="metadata";var __dataID="data";var DataBlockJSONSerializer=function(_b_Serializer){_inherits(DataBlockJSONSerializer,_b_Serializer);var _super38=_createSuper(DataBlockJSONSerializer);function DataBlockJSONSerializer(){_cCC(this,DataBlockJSONSerializer);return _super38.call(this)}_cC(DataBlockJSONSerializer,null,[{key:"Serialize",value:function Serialize(p_data){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var metadata=p_data[__metaID];var serializer=BINDINGS.G(SERIALIZATION_CONTEXT.JSON,metadata);var serial=p_data.Pack();serial[__metaID]=serializer.Serialize(metadata,o);return serial}},{key:"Deserialize",value:function Deserialize(p_serial){var p_data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!p_serial){throw new Error("Cannot unpack null data.")}if(!p_data){throw new Error("Cannot unpack to null target.")}var metadata=p_data.metadata,serializer=BINDINGS.G(SERIALIZATION_CONTEXT.JSON,metadata);if(__metaID in p_serial){serializer.Deserialize(p_serial[__metaID],metadata,o)}p_data.Unpack(p_serial);return p_data}}]);return DataBlockJSONSerializer}(b_Serializer);mdl.xp["default"]=mdl.xp=DataBlockJSONSerializer},{130:63,131:77,132:78,14:27}],75:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={MetadataJSONSerializer:rq(133),DataBlockJSONSerializer:rq(134)}},{134:74,133:76}],76:[function(rq,mdl,xp){var _rq99=rq(13),U=_rq99.U;var Metadata=rq(135);var b_Serializer=rq(132);var MetadataJSONSerializer=function(_b_Serializer2){_inherits(MetadataJSONSerializer,_b_Serializer2);var _super39=_createSuper(MetadataJSONSerializer);function MetadataJSONSerializer(){_cCC(this,MetadataJSONSerializer);return _super39.call(this)}_cC(MetadataJSONSerializer,null,[{key:"Serialize",value:function Serialize(p_data){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return p_data._data}},{key:"Deserialize",value:function Deserialize(p_serial){var p_data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!p_serial){throw new Error("Cannot unpack null data.")}if(!p_data){throw new Error("Cannot unpack metadata with a null target")}U.SOverwrite(p_data._data,p_serial);return p_data}}]);return MetadataJSONSerializer}(b_Serializer);mdl.xp["default"]=mdl.xp=MetadataJSONSerializer},{135:66,132:78,13:268}],77:[function(rq,mdl,xp){"use strict";var _rq100=rq(14),CSYMBOL=_rq100.CSYMBOL;var SERIALIZER=function(_CSYMBOL){_inherits(SERIALIZER,_CSYMBOL);var _super40=_createSuper(SERIALIZER);function SERIALIZER(){_cCC(this,SERIALIZER);return _super40.call(this)}return SERIALIZER}(CSYMBOL);var NONE=function(_CSYMBOL2){_inherits(NONE,_CSYMBOL2);var _super41=_createSuper(NONE);function NONE(){_cCC(this,NONE);return _super41.call(this)}return NONE}(CSYMBOL);var TEXT=function(_CSYMBOL3){_inherits(TEXT,_CSYMBOL3);var _super42=_createSuper(TEXT);function TEXT(){_cCC(this,TEXT);return _super42.call(this)}return TEXT}(CSYMBOL);var JSON=function(_CSYMBOL4){_inherits(JSON,_CSYMBOL4);var _super43=_createSuper(JSON);function JSON(){_cCC(this,JSON);return _super43.call(this)}return JSON}(CSYMBOL);_defineProperty(JSON,"META_KEY","meta");_defineProperty(JSON,"DATA_KEY","data");_defineProperty(JSON,"ERRORS_KEY","errors");_defineProperty(JSON,"CLASS","class");mdl.xp["default"]=mdl.xp={SERIALIZER:SERIALIZER,NONE:NONE,TEXT:TEXT,JSON:JSON}},{14:27}],78:[function(rq,mdl,xp){"use strict";var b_Serializer=function(){function b_Serializer(){_cCC(this,b_Serializer)}_cC(b_Serializer,null,[{key:"Serialize",value:function Serialize(p_data){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;throw new Error("not implemented")}},{key:"Deserialize",value:function Deserialize(p_input){var p_data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;throw new Error("not implemented")}}]);return b_Serializer}();mdl.xp["default"]=mdl.xp=b_Serializer},{}],79:[function(rq,mdl,xp){var _rq101=rq(14),POOL=_rq101.POOL,NFOS=_rq101.NFOS,BINDINGS=_rq101.BINDINGS;var DataBlock=rq(122);var b_Serializer=rq(125);var SERIALIZATION_CONTEXT=rq(128);var JSON=SERIALIZATION_CONTEXT.JSON;var JSONSerializer=function(_b_Serializer3){_inherits(JSONSerializer,_b_Serializer3);var _super44=_createSuper(JSONSerializer);function JSONSerializer(){_cCC(this,JSONSerializer);return _super44.call(this)}_cC(JSONSerializer,null,[{key:"Serialize",value:function Serialize(p_data){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var serializer=BINDINGS.G(SERIALIZATION_CONTEXT.JSON,p_data.constructor,null);if(!serializer){throw new Error("Could not find suitable serializer for target=".concat(p_data))}var serial=serializer.Serialize(p_data);if(!(JSON.DATA_KEY in serial)){var wrapper={};wrapper[JSON.DATA_KEY]=serial;serial=wrapper}var metas=null;if(!(JSON.META_KEY in serial)){metas={};serial[JSON.META_KEY]=metas}else{metas=serial[JSON.META_KEY]}metas[JSON.CLASS]=BINDINGS.GClassKey(p_data.constructor);return serial}},{key:"Deserialize",value:function Deserialize(p_serial){var p_data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var targetClass=null;if(p_data!=null){targetClass=p_data.constructor}else{var metas=p_serial[JSON.META_KEY];if(!metas){throw new Error("Cannot unserialize without nfos")}targetClass=BINDINGS.GClass(metas[JSON.CLASS]);if(!targetClass){throw new Error("Could not find constructor ".concat(metas.instanceOf))}p_data=POOL.Rt(targetClass)}var dataWrapper=null;if(!(JSON.DATA_KEY in p_serial)){return p_data}else{dataWrapper=p_serial[JSON.DATA_KEY]}var serializer=BINDINGS.G(SERIALIZATION_CONTEXT.JSON,targetClass,null);if(!serializer){throw new Error("Could not find suitable de-serializer for target=".concat(p_data))}return serializer.Deserialize(dataWrapper,p_data,o)}}]);return JSONSerializer}(b_Serializer);mdl.xp["default"]=mdl.xp=JSONSerializer},{122:63,128:77,125:78,14:27}],80:[function(rq,mdl,xp){var JSONSerializer=rq(126);var TEXTSerializer=function(_JSONSerializer){_inherits(TEXTSerializer,_JSONSerializer);var _super45=_createSuper(TEXTSerializer);function TEXTSerializer(){_cCC(this,TEXTSerializer);return _super45.call(this)}_cC(TEXTSerializer,null,[{key:"Serialize",value:function Serialize(p_data){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return JSON.stringify(JSONSerializer.Serialize(p_data,o))}},{key:"Deserialize",value:function Deserialize(p_serial){var p_data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return JSON.parse(JSONSerializer.Deserialize(p_serial,p_data,o))}}]);return TEXTSerializer}(JSONSerializer);mdl.xp["default"]=mdl.xp=TEXTSerializer},{126:79}],81:[function(rq,mdl,xp){mdl.xp["default"]=mdl.xp={DIALOG:rq(136),DIALOG_S:rq(137),DialogInfos:rq(138)}},{136:84,138:82,137:83}],82:[function(rq,mdl,xp){var _rq102=rq(13),U=_rq102.U;var _rq103=rq(14),COM_ID=_rq103.COM_ID,S=_rq103.S,COMMON_FLAG=_rq103.COMMON_FLAG,__dOEx=_rq103.__dOEx,OptionsHandler=_rq103.OptionsHandler;var DIALOG_S=rq(139);var DialogInfos=function(___dOEx16){_inherits(DialogInfos,___dOEx16);var _super46=_createSuper(DialogInfos);function DialogInfos(){var _this5;_cCC(this,DialogInfos);_this5=_super46.call(this);_defineProperty(_assertThisInialized(_this5),"F",void 0);return _this5}_cC(DialogInfos,[{key:"_In",value:function _In(){_get(_gPO(DialogInfos.prototype),"_In",this).call(this);this._actions=new Array(0);this._content=new Array(0);this._optionsHandler=new OptionsHandler;this._optionsHandler.H("origin","_origin");this._optionsHandler.H(COM_ID.TITLE,"_title");this._optionsHandler.H(COM_ID.MESSAGE,"_message");this._optionsHandler.H("type","_type");this._optionsHandler.H("dialogClass","_dialogClass");this._optionsHandler.H("primary","_primary");this._optionsHandler.H("secondary","_secondary");this._optionsHandler.H("content");this._optionsHandler.H("actions");this._Reset()}},{key:"_Reset",value:function _Reset(){this._origin=null;this._title="";this._message="";this._type="";this._dialogClass=null;this._primary=null;this._secondary=null;this._consumed=false;this._inputClass=null;this._actions.length=0;this._content.length=0}},{key:"origin",get:function get(){return this._origin},set:function set(v){this._origin=v}},{key:"title",get:function get(){return this._title},set:function set(v){this._title=v}},{key:"message",get:function get(){return this._message},set:function set(v){this._message=v}},{key:"type",get:function get(){return this._type},set:function set(v){this._type=v}},{key:"dialogClass",get:function get(){return this._dialogClass},set:function set(v){this._dialogClass=v}},{key:"primary",get:function get(){return this._primary},set:function set(v){this._primary=v}},{key:"secondary",get:function get(){return this._secondary},set:function set(v){this._secondary=v}},{key:"content",get:function get(){return this._content},set:function set(v){if(this._content===v){return}if(!v){this._content.length=0;return}for(var i=0,n=v.length;i<n;i++){this._content.push(v[i])}}},{key:"actions",get:function get(){return this._actions},set:function set(v){if(this._actions===v){return}if(!v){this._actions.length=0;return}this._primary=null;this._secondary=null;for(var i=0,n=v.length;i<n;i++){var action=v[i];this._actions.push(action);if(i===0){this._primary=action}else if(i===1){this._secondary=action}}}},{key:"options",get:function get(){return this._options},set:function set(v){this._options=v;this._optionsHandler.P(this,v);this._B(S.UPDATED,this)}},{key:"GOption",value:function GOption(p_id,p_fallback){return U.G(this._options,p_id,p_fallback)}},{key:"Consume",value:function Consume(){if(this._consumed){return}this._consumed=true;this._B(DIALOG_S.CONSUMED,this)}},{key:"_CleanUp",value:function _CleanUp(){this._Reset();_get(_gPO(DialogInfos.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"<? ".concat(this._title," : ").concat(this._message," />")}}]);return DialogInfos}(__dOEx);mdl.xp["default"]=mdl.xp=DialogInfos},{139:83,14:27,13:268}],83:[function(rq,mdl,xp){"use strict";var DIALOG_S=function DIALOG_S(){_cCC(this,DIALOG_S)};_defineProperty(DIALOG_S,"CONSUMED",Symbol("consumed"));mdl.xp["default"]=mdl.xp=DIALOG_S},{}],84:[function(rq,mdl,xp){"use strict";var _rq104=rq(13),U=_rq104.U;var _rq105=rq(18),List=_rq105.List,Dictionary=_rq105.Dictionary;var _rq106=rq(14),POOL=_rq106.POOL;var _rq107=rq(20),Serviceb_=_rq107.Serviceb_;var _rq108=rq(25),ACTION_REQUEST=_rq108.ACTION_REQUEST,Request=_rq108.Request;var DialogInfos=rq(140);var DIALOG=function(_Serviceb_2){_inherits(DIALOG,_Serviceb_2);var _super47=_createSuper(DIALOG);function DIALOG(){_cCC(this,DIALOG);return _super47.call(this)}_cC(DIALOG,[{key:"_In",value:function _In(){_get(_gPO(DIALOG.prototype),"_In",this).call(this);this._dialogs=new List;this._ownedDialogData=new Dictionary;this._Bind(this._PNext);this._inDialog=false}},{key:"_Start",value:function _Start(){if(!_get(_gPO(DIALOG.prototype),"Start",this).call(this)){return false}this._PNext();return true}},{key:"_Push",value:function _Push(o){var dialogInfos=null;if(!U.isInstanceOf(o,DialogInfos)){dialogInfos=POOL.Rt(DialogInfos);dialogInfos.options=o;this._ownedDialogData.S(dialogInfos,true)}else{dialogInfos=o}if(dialogInfos.origin){}if(!this._dialogs.A(dialogInfos)){throw Error("DialogInfos already exists in stack. Are you trying to push the same dialogInfo multiple times ?")}if(this._started){this._PNext()}return dialogInfos}},{key:"_PNext",value:function _PNext(){if(this._inDialog){return null}var next=this._dialogs.Shift();if(!next){this._inDialog=false;return null}this._inDialog=true;next.W(DialogInfos.CONSUMED,this._OnDialogConsumed,this);Request.Emit(ACTION_REQUEST.DIALOG,{data:next},this,this._OnRequestSuccess,this._OnRequestFail)}},{key:"_OnRequestFail",value:function _OnRequestFail(p_request){var dialog=p_request.options.infos;throw new Error("Unhandled dialog : ".concat(dialog))}},{key:"_OnRequestSuccess",value:function _OnRequestSuccess(p_request){}},{key:"_OnDialogConsumed",value:function _OnDialogConsumed(p_dialog){var dialogInfos=p_dialog.data;this._dialogs.RM(p_dialog);p_dialog.Release();if(this._ownedDialogData.G(dialogInfos)){this._ownedDialogData.RM(dialogInfos);dialogInfos.Release()}this._inDialog=false;this._PNext()}}],[{key:"Push",value:function Push(o){this.instance._Push(o)}}]);return DIALOG}(Serviceb_);mdl.xp["default"]=mdl.xp=DIALOG},{140:82,25:1,18:21,14:27,20:150,13:268}],85:[function(rq,mdl,xp){"use strict";var _rq109=rq(14),BindingKit=_rq109.BindingKit;var _rq110=rq(29),Metadata=_rq110.Metadata;var DOCUMENT_CONTEXT=rq(141);var _rq111=rq(142),MetaDocument=_rq111.MetaDocument;var Bindings=function(_BindingKit2){_inherits(Bindings,_BindingKit2);var _super48=_createSuper(Bindings);function Bindings(){_cCC(this,Bindings);return _super48.call(this)}_cC(Bindings,[{key:"_In",value:function _In(){_get(_gPO(Bindings.prototype),"_In",this).call(this);this.A({context:DOCUMENT_CONTEXT.DOCUMENT,kvps:[{key:Metadata,binding:MetaDocument}]})}}]);return Bindings}(BindingKit);mdl.xp["default"]=mdl.xp=Bindings},{141:87,142:91,14:27,29:52}],86:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={DOCUMENTS:rq(143),Document:rq(144),MetaDocument:rq(145)};rq(14).BINDINGS.Expand(rq(107))},{107:85,144:88,143:89,145:90,14:27}],87:[function(rq,mdl,xp){"use strict";var DOCUMENT=function DOCUMENT(){_cCC(this,DOCUMENT)};mdl.xp["default"]=mdl.xp={DOCUMENT:DOCUMENT}},{}],88:[function(rq,mdl,xp){"use strict";var _defineProperty4;var _rq112=rq(13),U=_rq112.U,PATH=_rq112.PATH;var _rq113=rq(14),COM_ID=_rq113.COM_ID,NFOS=_rq113.NFOS,BINDINGS=_rq113.BINDINGS,S=_rq113.S,__dOEx=_rq113.__dOEx,Observer=_rq113.Observer,Callbacks=_rq113.Callbacks;var _rq114=rq(29),SERIALIZATION_CONTEXT=_rq114.SERIALIZATION_CONTEXT,DATA_S=_rq114.DATA_S;var _rq115=rq(26),IO_S=_rq115.IO_S,ENCODING=_rq115.ENCODING,RESOURCES=_rq115.RESOURCES,Resource=_rq115.Resource,IO_TYPE=_rq115.IO_TYPE;var Document=function(___dOEx17){_inherits(Document,___dOEx17);var _super49=_createSuper(Document);function Document(){_cCC(this,Document);return _super49.call(this)}_cC(Document,[{key:"_In",value:function _In(){_get(_gPO(Document.prototype),"_In",this).call(this);this._currentPath=null;this._currentRsc=null;this._callbacks=new Callbacks;this._resourceObserver=new Observer;this._resourceObserver.H(S.RELEASED,this._OnRscReleased,this);this._resourceObserver.H(IO_S.READ_COMPLETE,this._OnReadComplete,this);this._resourceObserver.H(IO_S.WRITE_START,this._OnWriteStart,this);this._dataObserver=new Observer;this._dataObserver.H(S.RELEASED,this._OnDataReleased,this);this._dataObserver.H(DATA_S.DIRTY,this._OnDataDirty,this);this._dataObserver.H(DATA_S.DIRTY_CLEARED,this._OnDataCleaned,this);this._Bind(this._OnLoadError);this._Bind(this._OnSaveError);this._Bind(this._OnSaveSuccess)}},{key:"currentPath",get:function get(){},set:function set(v){v=PATH.SHORT(v);if(this._currentPath===v){return}this._currentPath=v;if(!U.isEmpty(v)&&this._currentRsc){if(this._currentRsc.path!=v){this._currentRsc=null}}}},{key:"currentRsc",get:function get(){return this._currentRsc},set:function set(v){if(this._currentRsc===v){return}var oldRsc=this._currentRsc;this._currentRsc=v;if(oldRsc){this._resourceObserver.Unobserve(oldRsc)}if(v){this._resourceObserver.Observe(v);this.currentPath=v.path}}},{key:"currentData",get:function get(){return this._currentData},set:function set(v){if(this._currentData===v){if(v){if(v.isDirty){this.Dirty()}else{this.ClearDirty()}}return}var oldData=this._currentData;this._currentData=v;if(oldData){this._dataObserver.Unobserve(oldData)}if(v){this._dataObserver.Observe(v);if(v.isDirty){this.Dirty()}else{this.ClearDirty()}}}},{key:"isDirty",get:function get(){return this._isDirty}},{key:"Dirty",value:function Dirty(){if(this._isDirty){return}this._isDirty=true;this._B(DATA_S.DIRTY,this)}},{key:"ClearDirty",value:function ClearDirty(){if(!this._isDirty){return}this._isDirty=false;this._B(DATA_S.DIRTY_CLEARED,this)}},{key:"_GRsc",value:function _GRsc(){var p_path=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(p_path){this.currentPath=p_path}if(!this._currentRsc){if(U.isEmpty(this._currentPath)){throw new Error("Empty path.")}this.currentRsc=RESOURCES.G(this._currentPath,o)}return this._currentRsc}},{key:"_OnRscReleased",value:function _OnRscReleased(p_rsc){this.currentRsc=null}},{key:"_OnDataReleased",value:function _OnDataReleased(p_data){this.data=null}},{key:"_OnDataDirty",value:function _OnDataDirty(p_data){this.Dirty()}},{key:"_OnDataCleaned",value:function _OnDataCleaned(p_data){this.ClearDirty()}},{key:"Load",value:function Load(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var nfo=NFOS.G(this),rsc=this._GRsc(U.G(o,"path",null),{cl:nfo.resource,encoding:nfo.encoding});if(!rsc){throw new Error("No resource set.")}if(rsc.Read({io:U.G(o,"io",nfo.defaultIOType),error:this._OnLoadError})){this._callbacks.A(o);return true}else{return false}}},{key:"_OnLoadError",value:function _OnLoadError(p_err){p_err.document=this;this._callbacks.OnErrorFlush(p_err)}},{key:"_OnReadComplete",value:function _OnReadComplete(p_rsc){this.currentData=this._Unpack(p_rsc.content,this._currentData);this._callbacks.OSFlush(this)}},{key:"_Unpack",value:function _Unpack(p_content){var p_data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var serializer=BINDINGS.G(SERIALIZATION_CONTEXT.SERIALIZER,NFOS.G(this).serializationContext),data=serializer.Deserialize(p_content,p_data,null);this.Dirty();return data}},{key:"Save",value:function Save(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!this._currentData){throw new Error("No data.")}var nfo=NFOS.G(this),rsc=this._GRsc(U.G(o,"path",null),{cl:nfo.resource,encoding:nfo.encoding});if(!rsc){throw new Error("No resource set.")}if(rsc.Write({io:U.G(o,"io",nfo.defaultIOType),error:this._OnSaveError,success:this._OnSaveSuccess})){this._callbacks.A(o);return true}else{return false}}},{key:"_OnWriteStart",value:function _OnWriteStart(p_rsc){p_rsc.content=this._Pack(this._currentData)}},{key:"_OnSaveSuccess",value:function _OnSaveSuccess(){this._callbacks.OSFlush(this)}},{key:"_OnSaveError",value:function _OnSaveError(p_err){p_err.document=this;this._callbacks.OnErrorFlush(p_err)}},{key:"_Pack",value:function _Pack(p_data){var serializer=BINDINGS.G(SERIALIZATION_CONTEXT.SERIALIZER,NFOS.G(this).serializationContext);return serializer.Serialize(p_data,null)}},{key:"Delete",value:function Delete(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null}},{key:"_CleanUp",value:function _CleanUp(){this.currentRsc=null;this._currentPath=null;_get(_gPO(Document.prototype),"_CleanUp",this).call(this)}}]);return Document}(__dOEx);_defineProperty(Document,"__NFO__",(_defineProperty4={},_defineProperty(_defineProperty4,COM_ID.ICON,"%ICON%/icon_document.svg"),_defineProperty(_defineProperty4,"resource",Resource),_defineProperty(_defineProperty4,"encoding",ENCODING.UTF8),_defineProperty(_defineProperty4,"serializationContext",SERIALIZATION_CONTEXT.NONE),_defineProperty(_defineProperty4,"defaultIOType",IO_TYPE.DEFAULT),_defineProperty4));mdl.xp["default"]=mdl.xp=Document},{14:27,29:52,26:98,13:268}],89:[function(rq,mdl,xp){"use strict";var _rq116=rq(13),U=_rq116.U;var _rq117=rq(14),BINDINGS=_rq117.BINDINGS,POOL=_rq117.POOL,SingletonEx=_rq117.SingletonEx;var _rq118=rq(29),DataBlock=_rq118.DataBlock;var DOCUMENT_CONTEXT=rq(146);var DOCUMENTS=function(_SingletonEx4){_inherits(DOCUMENTS,_SingletonEx4);var _super50=_createSuper(DOCUMENTS);function DOCUMENTS(){_cCC(this,DOCUMENTS);return _super50.call(this)}_cC(DOCUMENTS,[{key:"_In",value:function _In(){}},{key:"_G",value:function _G(o){var document,data,path;data=U.G(o,"data",null);document=U.G(o,"document",null);path=U.G(o,"path",null);if(data&&!document){document=BINDINGS.G(DOCUMENT_CONTEXT.DOCUMENT,data,null)}if(!document){throw new Error("Not enough options set to create a new document.")}document=POOL.Rt(document);if(path){document.currentPath=path}if(data){if(U.isFunc(data)){data=POOL.Rt(data)}document.currentData=data}return document}}],[{key:"G",value:function G(o){return this.instance._G(o)}}]);return DOCUMENTS}(SingletonEx);mdl.xp["default"]=mdl.xp=DOCUMENTS},{146:87,14:27,29:52,13:268}],90:[function(rq,mdl,xp){"use strict";var _rq119=rq(13),U=_rq119.U;var _rq120=rq(14),NFOS=_rq120.NFOS;var _rq121=rq(24),ENV=_rq121.ENV;var _rq122=rq(29),SERIALIZATION_CONTEXT=_rq122.SERIALIZATION_CONTEXT;var _rq123=rq(26),IO_TYPE=_rq123.IO_TYPE,JSONResource=_rq123.JSONResource;var Document=rq(147);var MetaDocument=function(_Document){_inherits(MetaDocument,_Document);var _super51=_createSuper(MetaDocument);function MetaDocument(){_cCC(this,MetaDocument);return _super51.call(this)}_cC(MetaDocument,[{key:"_CheckOptions",value:function _CheckOptions(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;o=o?o:{};o.io=ENV.IF_NODE(IO_TYPE.FILE_SYSTEM,IO_TYPE.LOCAL_STORAGE);return o}},{key:"Load",value:function Load(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return _get(_gPO(MetaDocument.prototype),"Load",this).call(this,this._CheckOptions(o))}},{key:"Save",value:function Save(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return _get(_gPO(MetaDocument.prototype),"Save",this).call(this,this._CheckOptions(o))}},{key:"Delete",value:function Delete(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return _get(_gPO(MetaDocument.prototype),"Delete",this).call(this,this._CheckOptions(o))}}]);return MetaDocument}(Document);_defineProperty(MetaDocument,"__NFO__",NFOS.Ext({resource:JSONResource,serializationContext:SERIALIZATION_CONTEXT.JSON},Document.__NFO__));mdl.xp["default"]=mdl.xp=MetaDocument},{147:88,14:27,29:52,24:92,26:98,13:268}],91:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={MetaDocument:rq(148)}},{148:90}],92:[function(rq,mdl,xp){"use struct";mdl.xp["default"]=mdl.xp={ENV_STATE:rq(149),ENV_DISPLAY:rq(150),ENV_S:rq(151),ENV:rq(152)}},{149:93,150:94,151:95,152:96}],93:[function(rq,mdl,xp){"use strict";var DOM_STATE=function DOM_STATE(){_cCC(this,DOM_STATE)};_defineProperty(DOM_STATE,"NONE","none");_defineProperty(DOM_STATE,"LOADING","loading");_defineProperty(DOM_STATE,"INTERACTIVE","interactive");_defineProperty(DOM_STATE,"COMPLETE","complete");mdl.xp["default"]=mdl.xp=DOM_STATE},{}],94:[function(rq,mdl,xp){"use strict";var ENV_DISPLAY=function ENV_DISPLAY(){_cCC(this,ENV_DISPLAY)};_defineProperty(ENV_DISPLAY,"NONE","none");_defineProperty(ENV_DISPLAY,"DEFAULT","browser");_defineProperty(ENV_DISPLAY,"FULLSCREEN","fullscreen");_defineProperty(ENV_DISPLAY,"MINIMAL","minimal-ui");_defineProperty(ENV_DISPLAY,"STANDALONE","standalone");_defineProperty(ENV_DISPLAY,"displayModes",[ENV_DISPLAY.DEFAULT,ENV_DISPLAY.FULLSCREEN,ENV_DISPLAY.MINIMAL,ENV_DISPLAY.STANDALONE]);_defineProperty(ENV_DISPLAY,"COLORSCHEME_DARK","dark");_defineProperty(ENV_DISPLAY,"COLORSCHEME_LIGHT","light");_defineProperty(ENV_DISPLAY,"COLORSCHEME_NO_PREFERENCES","no-preferences");_defineProperty(ENV_DISPLAY,"colorSchemes",[ENV_DISPLAY.COLORSCHEME_DARK,ENV_DISPLAY.COLORSCHEME_LIGHT,ENV_DISPLAY.COLORSCHEME_NO_PREFERENCES]);mdl.xp["default"]=mdl.xp=ENV_DISPLAY},{}],95:[function(rq,mdl,xp){"use strict";var ENV_S=function ENV_S(){_cCC(this,ENV_S)};_defineProperty(ENV_S,"START",Symbol("environment-start"));_defineProperty(ENV_S,"DOMSTATE_CHANGED",Symbol("displaymode-changed"));_defineProperty(ENV_S,"DISPLAYMODE_CHANGED",Symbol("color-scheme-changed"));_defineProperty(ENV_S,"COLORSCHEME_CHANGED",Symbol("domstate-changed"));mdl.xp["default"]=mdl.xp=ENV_S},{}],96:[function(rq,mdl,xp){"use strict";var _rq124=rq(13),U=_rq124.U,PATH=_rq124.PATH,LOG=_rq124.LOG;var _rq125=rq(18),List=_rq125.List;var _rq126=rq(14),SingletonEx=_rq126.SingletonEx,CallList=_rq126.CallList;var _rq127=rq(20),ServicesManager=_rq127.ServicesManager,Serviceb_=_rq127.Serviceb_;var ENV_S=rq(153);var Features=rq(154);var DOM_STATE=rq(155);var ENV=function(_SingletonEx5){_inherits(ENV,_SingletonEx5);var _super52=_createSuper(ENV);function ENV(){_cCC(this,ENV);return _super52.call(this)}_cC(ENV,[{key:"_In",value:function _In(){_get(_gPO(ENV.prototype),"_In",this).call(this);this._features=new Features;this._app=null;this._config=null;this._started=false;this._running=false;this._services=new List;this._Bind(this._BootService);this._onStart=new CallList}},{key:"features",get:function get(){return this._features}},{key:"app",get:function get(){return this._app}},{key:"paths",get:function get(){return this._config.paths}},{key:"config",get:function get(){return this._config}},{key:"RegisterServices",value:function RegisterServices(){var serviceClass;for(var _len14=arguments.length,args=new Array(_len14),_key16=0;_key16<_len14;_key16++){args[_key16]=arguments[_key16]}if(this._running){console.warn("RegisterServices called post-Start. Be sure this is intended.");args.forEach(this._BootService);return}for(var i=0,n=args.length;i<n;i++){this._services.A(args[i])}}},{key:"Start",value:function Start(p_config){if(this._started){throw new Error("Cannot ENV.Start more than once.")}this._started=true;LOG._("ENV : START","#33979b","#212121");ENV.instance._features.List();this._config=p_config;var paths=p_config.paths;if(paths){for(var member in paths){PATH.SET(member,paths[member])}}PATH.SET("%ICON%","img/icons");PATH.SET("%PATTERN%","img/patterns");var appClass=U.G(p_config,"webapp",null);if(appClass){LOG._("ENV : App found (".concat(appClass.name,")"),"#33979b","#212121");var appObject=new appClass;this._app=appObject}else{LOG._("ENV : App not found","#fff","#980700")}ServicesManager.instance.Boot();this._services.ForEach(this._BootService);if(this._features.isBrowser){switch(this._features.domState){case DOM_STATE.NONE:case DOM_STATE.LOADING:case DOM_STATE.INTERACTIVE:this._features.W(ENV_S.DOMSTATE_CHANGED,this._OnDOMStateCh,this);break;case DOM_STATE.COMPLETE:if(this._app){this._app.SUp()}this._OnStart();break}}else{this._OnStart()}}},{key:"_OnDOMStateCh",value:function _OnDOMStateCh(state){switch(this._features.domState){case DOM_STATE.LOADING:break;case DOM_STATE.INTERACTIVE:if(this._app){this._app.SUp()}break;case DOM_STATE.COMPLETE:this._features.Uw(ENV_S.DOMSTATE_CHANGED,this._OnDOMStateCh,this);this._OnStart();break}}},{key:"_OnStart",value:function _OnStart(){if(this._running){return}this._running=true;if(this._app){this._app.Start()}this._onStart.nFFlush(this);this._B(ENV_S.START,this)}},{key:"_BootService",value:function _BootService(p_serviceClass){if(!U.isInstanceOf(p_serviceClass,Serviceb_)){throw new Error("".concat(p_serviceClass," is not a service."))}p_serviceClass.instance.InializeAndStart()}}],[{key:"FEATURES",get:function get(){return this.instance._features}},{key:"APP",get:function get(){return this.instance._app}},{key:"onStart",value:function onStart(p_fn){this.instance._onStart.A(p_fn)}},{key:"IF_NODE",value:function IF_NODE(p_ifNodeIsEnabled,p_ifNodeIsDisabled){return this.instance.features.isNodeEnabled?p_ifNodeIsEnabled:p_ifNodeIsDisabled}}]);return ENV}(SingletonEx);mdl.xp["default"]=mdl.xp=ENV},{155:93,153:95,154:97,18:21,14:27,20:150,13:268}],97:[function(rq,mdl,xp){"use strict";var _rq128=rq(13),U=_rq128.U,LOG=_rq128.LOG;var _rq129=rq(14),__dOEx=_rq129.__dOEx;var ENV_DISPLAY=rq(156);var DOM_STATE=rq(157);var ENV_S=rq(158);var Features=function(___dOEx18){_inherits(Features,___dOEx18);var _super53=_createSuper(Features);function Features(){var _this6;_cCC(this,Features);_this6=_super53.call(this);_this6._isNodeEnabled=false;_this6._isBrowser=false;_this6._isMobile=false;_this6._isTablet=false;_this6._isDesktop=false;_this6._isExtension=false;_this6._isTouchEnabled=false;_this6._context=null;_this6._hasStorageArea=false;_this6._storageArea=null;_this6._prefersColorScheme=ENV_DISPLAY.COLORSCHEME_NO_PREFERENCES;_this6._displayMode=ENV_DISPLAY.NONE;_this6._domState=DOM_STATE.NONE;_this6._isCORSEnabled=false;try{_this6._context=chrome;_this6._isExtension=true;if(!chrome.extension){throw new Error}}catch(e){try{_this6._context=browser;_this6._isExtension=true;if(!browser.extension){throw new Error}}catch(e){_this6._isExtension=false;_this6._context=null}}try{_this6._storageArea=chrome.storage;_this6._hasStorageArea=!U.isVoid(_this6._storageArea);if(!_this6._hasStorageArea){throw new Error}}catch(e){try{_this6._storageArea=browser.storage;_this6._hasStorageArea=!U.isVoid(_this6._storageArea)}catch(e){_this6._storageArea=null;_this6._hasStorageArea=false}}try{var w=window;_this6._isBrowser=true;_this6._isTouchEnabled="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var domReadyState=document.readyState;if(domReadyState===DOM_STATE.COMPLETE||domReadyState===DOM_STATE.INTERACTIVE){_this6._OnDisplayModeChange();_this6.domState=domReadyState}else{document.addEventListener("readystatechange",_this6._Bind(_this6._OnDOMStateChange))}try{var xhr=new XMLHttpRequest;if(U.isVoid(xhr.withCredentials)){_this6._isCORSEnabled=false}else{_this6._isCORSEnabled=true}}catch(e){_this6._isCORSEnabled=false;console.warn(e)}}catch(e){_this6._isBrowser=false}return _this6}_cC(Features,[{key:"isBrowser",get:function get(){return this._isBrowser}},{key:"isMobile",get:function get(){return this._isMobile}},{key:"isTablet",get:function get(){return this._isTablet}},{key:"isDesktop",get:function get(){return this._isDesktop}},{key:"isTouchEnabled",get:function get(){return this._isTouchEnabled}},{key:"hasStorage",get:function get(){return this._hasStorageArea}},{key:"storageArea",get:function get(){return this._storageArea}},{key:"isExtension",get:function get(){return this._isExtension}},{key:"context",get:function get(){return this._context}},{key:"isCORSEnabled",get:function get(){return this._isCORSEnabled}},{key:"isNodeEnabled",get:function get(){return this._isNodeEnabled}},{key:"domState",get:function get(){return this._domState},set:function set(v){if(this._domState===v){return}var oldState=this._domState;this._domState=v;LOG._U("domState",this._domState,oldState,"#f7d801");switch(this._domState){case DOM_STATE.LOADING:break;case DOM_STATE.INTERACTIVE:var mode=ENV_DISPLAY.DEFAULT;if(navigator.standalone){mode=ENV_DISPLAY.STANDALONE}for(var i=0,n=ENV_DISPLAY.displayModes.length;i<n;i++){var mdq=window.matchMedia("(display-mode: ".concat(ENV_DISPLAY.displayModes[i],")"));if(mdq.matches){mode=ENV_DISPLAY.displayModes[i]}mdq.addEventListener("change",this._OnDisplayModeChange)}this._displayMode=mode;mode=ENV_DISPLAY.COLORSCHEME_NO_PREFERENCES;for(var _i18=0,_n14=ENV_DISPLAY.colorSchemes.length;_i18<_n14;_i18++){var _mdq=window.matchMedia("(prefers-color-scheme: ".concat(ENV_DISPLAY.colorSchemes[_i18],")"));if(_mdq.matches){mode=ENV_DISPLAY.colorSchemes[_i18]}_mdq.addEventListener("change",this._OnDisplayModeChange)}this._prefersColorScheme=mode;break;case DOM_STATE.COMPLETE:break}this._B(ENV_S.DOMSTATE_CHANGED,this._domState)}},{key:"_OnDOMStateChange",value:function _OnDOMStateChange(){if(document.readyState===DOM_STATE.COMPLETE){document.removeEventListener("DOMContentLoaded",this._OnDOMStateChange)}this.domState=document.readyState}},{key:"_OnDisplayModeChange",value:function _OnDisplayModeChange(){var mode=ENV_DISPLAY.DEFAULT;if(navigator.standalone){mode=ENV_DISPLAY.STANDALONE}for(var i=0,n=ENV_DISPLAY.displayModes.length;i<n;i++){var mdq=window.matchMedia("(display-mode: ".concat(ENV_DISPLAY.displayModes[i],")"));if(mdq.matches){mode=ENV_DISPLAY.displayModes[i]}}this.displayMode=mode;mode=ENV_DISPLAY.COLORSCHEME_NO_PREFERENCES;for(var _i19=0,_n15=ENV_DISPLAY.colorSchemes.length;_i19<_n15;_i19++){var _mdq2=window.matchMedia("(prefers-color-scheme: ".concat(ENV_DISPLAY.colorSchemes[_i19],")"));if(_mdq2.matches){mode=ENV_DISPLAY.colorSchemes[_i19]}}this.prefersColorScheme=mode}},{key:"displayMode",get:function get(){return this._displayMode},set:function set(v){if(this._displayMode===v){return}var oldMode=this._displayMode;this._displayMode=v;LOG._U("displayMode",this._displayMode,oldMode,"#f7d801");this._B(ENV_S.DISPLAYMODE_CHANGED,this._displayMode,oldMode)}},{key:"prefersColorScheme",get:function get(){return this._prefersColorScheme},set:function set(v){if(this._prefersColorScheme===v){return}var oldValue=this._prefersColorScheme;this._prefersColorScheme=v;LOG._U("prefersColorScheme",this._prefersColorScheme,oldValue,"#f7d801");this._B(ENV_S.COLORSCHEME_CHANGED,this._prefersColorScheme,oldValue)}},{key:"List",value:function List(){var g="✔",b="🞫",gt="889000",bt="d86100",bg="#171717";LOG._("".concat(this._isBrowser?g:b," isBrowser"),"#".concat(this._isBrowser?gt:bt),bg);LOG._("".concat(this._isExtension?g:b," isExtension"),"#".concat(this._isExtension?gt:bt),bg);LOG._("".concat(this._isMobile?g:b," isMobile"),"#".concat(this._isMobile?gt:bt),bg);LOG._("".concat(this._isTablet?g:b," isTablet"),"#".concat(this._isTablet?gt:bt),bg);LOG._("".concat(this._isDesktop?g:b," isDesktop"),"#".concat(this._isDesktop?gt:bt),bg);LOG._("".concat(this._isTouchEnabled?g:b," isToucheEnabled"),"#".concat(this._isTouchEnabled?gt:bt),bg);LOG._("".concat(this._hasStorageArea?g:b," hasStorageArea"),"#".concat(this._hasStorageArea?gt:bt),bg);LOG._("".concat(this._isCORSEnabled?g:b," isCORSEnabled"),"#".concat(this._isCORSEnabled?gt:bt),bg);LOG._("▢ displayMode : ".concat(this._displayMode),"#889000",bg);LOG._("◐ prefersColorScheme : ".concat(this._prefersColorScheme),"#889000",bg);LOG._("".concat(this._isNodeEnabled?g:b," isNodeEnabled"),"#".concat(this._isNodeEnabled?"182000":"fff"),"#".concat(this._isNodeEnabled?"7ca500":"980700"))}}]);return Features}(__dOEx);mdl.xp["default"]=mdl.xp=Features},{157:93,156:94,158:95,14:27,13:268}],98:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={ENCODING:rq(159),RESPONSE_TYPE:rq(160),IO_TYPE:rq(161),IO_S:rq(162),RESOURCES:rq(163),RESSOURCE_STATE:rq(164),Resource:rq(165),Directory:rq(166),IOP:rq(167),ResourceOperation:rq(168),BinaryResource:rq(169),BlobResource:rq(170),TextResource:rq(171),JSONResource:rq(172)}},{166:99,159:100,167:101,162:112,161:113,165:116,168:114,164:115,163:117,169:118,170:119,172:120,171:121,160:122}],99:[function(rq,mdl,xp){"use strict";var _rq130=rq(13),U=_rq130.U;var _rq131=rq(14),S=_rq131.S;var _rq132=rq(18),List=_rq132.List;var Resource=rq(173);var Directory=function(_Resource){_inherits(Directory,_Resource);var _super54=_createSuper(Directory);function Directory(){_cCC(this,Directory);return _super54.call(this)}_cC(Directory,[{key:"_In",value:function _In(){_get(_gPO(Directory.prototype),"_In",this).call(this);this._requestRsc=null;this._directories=new List;this._resources=new List}},{key:"isDir",get:function get(){return true}},{key:"_OnPathUd",value:function _OnPathUd(p_oldPath){}},{key:"_Encode",value:function _Encode(){return null}},{key:"_Decode",value:function _Decode(){var fullPath=PATH.FULL(this._path);for(var i=0,n=this._raw.length;i<n;i++){var rsc=this._requestRsc("".concat(fullPath,"/").concat(this._raw[i]))}}},{key:"A",value:function A(p_rsc){var added=false;if(p_rsc.isDir){added=this._directories.A(p_rsc)}else{added=this._resources.A(p_rsc)}if(added){p_rsc.W(S.RELEASED,this._OnRscReleased,this);p_rsc.directory=this}}},{key:"RM",value:function RM(p_rsc){var removed=false;if(p_rsc.isDir){removed=this._directories.RM(p_rsc)}else{removed=this._resources.RM(p_rsc)}if(removed){if(p_rsc.directory===this){p_rsc.directory=null}p_rsc.Uw(S.RELEASED,this._OnRscReleased,this)}}},{key:"ReleaseContent",value:function ReleaseContent(){var arr=this._resources.internalArray;for(var i=0,n=arr.length;i<n;i++){arr[arr.length-1].Release()}arr=this._directories.internalArray;for(var _i20=0,_n16=arr.length;_i20<_n16;_i20++){var dir=arr[arr.length-1];dir.ReleaseContent();dir.Release()}}},{key:"ReleasewContent",value:function ReleasewContent(){this.ReleaseContent();this.Release()}},{key:"_OnRscReleased",value:function _OnRscReleased(p_rsc){this.RM(p_rsc)}}]);return Directory}(Resource);mdl.xp["default"]=mdl.xp=Directory},{173:116,18:21,14:27,13:268}],100:[function(rq,mdl,xp){"use strict";var ENCODING=function ENCODING(){_cCC(this,ENCODING)};_defineProperty(ENCODING,"UTF8","utf8");_defineProperty(ENCODING,"UCS2","ucs2");_defineProperty(ENCODING,"UTF16le","utf16le");_defineProperty(ENCODING,"LATIN1","latin1");_defineProperty(ENCODING,"BINARY","binary");_defineProperty(ENCODING,"BASE64","base64");_defineProperty(ENCODING,"ASCII","ascii");_defineProperty(ENCODING,"HEX","hex");mdl.xp["default"]=mdl.xp=ENCODING},{}],101:[function(rq,mdl,xp){"use strict";var _rq133=rq(13),U=_rq133.U,PATH=_rq133.PATH;var _rq134=rq(14),S=_rq134.S,__dOEx=_rq134.__dOEx;var IOP=function(___dOEx19){_inherits(IOP,___dOEx19);var _super55=_createSuper(IOP);function IOP(){_cCC(this,IOP);return _super55.call(this)}_cC(IOP,[{key:"_In",value:function _In(){_get(_gPO(IOP.prototype),"_In",this).call(this);this._operation=null;this._running=false;this._globalResourceMap=null}},{key:"running",get:function get(){return this._running}},{key:"rsc",get:function get(){return this._operation.rsc}},{key:"encoding",get:function get(){this._operation.rsc.encoding}},{key:"operation",get:function get(){return this._operation},set:function set(v){this._operation=v}},{key:"Validate",value:function Validate(){if(U.isEmpty(this._operation.rsc.path)){this._OnError(new Error("Resource path is empty."));return false}return true}},{key:"P",value:function P(){throw new Error("P not implemented in io-process")}},{key:"_OnStart",value:function _OnStart(){this._running=true;this._operation.OnStart()}},{key:"_OnProgress",value:function _OnProgress(p_progress){this._operation.OnProgress(p_progress)}},{key:"_OnError",value:function _OnError(p_err){this._operation.OnError(p_err);this._OnComplete()}},{key:"_OS",value:function _OS(){this._operation.OS();this._OnComplete()}},{key:"_OnComplete",value:function _OnComplete(){this._running=false;this._B(S.COMPLETE,this);this.Release()}},{key:"_CleanUp",value:function _CleanUp(){this._operation=null;this._running=false;this._globalResourceMap=null;_get(_gPO(IOP.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[".concat(this.constructor.name,"::").concat(this._operation?this._operation.fullPath:"NO_OPERATION_SET","]")}}]);return IOP}(__dOEx);mdl.xp["default"]=mdl.xp=IOP},{14:27,13:268}],102:[function(rq,mdl,xp){"use strict";var _rq135=rq(13),U=_rq135.U,PATH=_rq135.PATH;var _rq136=rq(14),S=_rq136.S;var IOP=rq(174);var HTTPIORename=function(_IOP){_inherits(HTTPIORename,_IOP);var _super56=_createSuper(HTTPIORename);function HTTPIORename(){_cCC(this,HTTPIORename);return _super56.call(this)}_cC(HTTPIORename,[{key:"P",value:function P(){this._OnStart();this._OnProgress(0);this._OnError(new Error("HTTP delete not supported."))}}]);return HTTPIORename}(IOP);mdl.xp["default"]=mdl.xp=HTTPIORename},{174:101,14:27,13:268}],103:[function(rq,mdl,xp){"use strict";var _rq137=rq(13),U=_rq137.U,PATH=_rq137.PATH;var _rq138=rq(14),S=_rq138.S;var axios=rq("axios");var IOP=rq(174);var ENCODING=rq(175);var HTTPIOReader=function(_IOP2){_inherits(HTTPIOReader,_IOP2);var _super57=_createSuper(HTTPIOReader);function HTTPIOReader(){_cCC(this,HTTPIOReader);return _super57.call(this)}_cC(HTTPIOReader,[{key:"_In",value:function _In(){_get(_gPO(HTTPIOReader.prototype),"_In",this).call(this);this._Bind(this._OnProgress);this._Bind(this._OnRequestSuccess);this._Bind(this._OnError)}},{key:"P",value:function P(){this._OnStart();var options={onDownloadProgress:this._OnProgress,responseType:this.rsc.type};if(this.rsc.mime){options.headers={"Content-Type":this.rsc.mime}}_get(_gPO(HTTPIOReader.prototype),"_OnProgress",this).call(this,0);axios.get(this._operation.fullPath,options).then(this._OnRequestSuccess)["catch"](this._OnError)}},{key:"_OnProgress",value:function _OnProgress(p_evt){var totalLength=p_evt.lengthComputable?p_evt.total:p_evt.target.getResponseHeader("content-length")||p_evt.target.getResponseHeader("x-decompressed-content-length");console.log("onDownloadProgress",p_evt.loaded,totalLength);var progress=1;if(totalLength!==null){progress=p_evt.loaded/totalLength}_get(_gPO(HTTPIOReader.prototype),"_OnProgress",this).call(this,progress)}},{key:"_OnRequestSuccess",value:function _OnRequestSuccess(p_evt){this.rsc.raw=p_evt.data;this._OS()}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(HTTPIOReader.prototype),"_CleanUp",this).call(this)}}]);return HTTPIOReader}(IOP);mdl.xp["default"]=mdl.xp=HTTPIOReader},{175:100,174:101,14:27,13:268,axios:123}],104:[function(rq,mdl,xp){"use strict";var _rq139=rq(13),U=_rq139.U,PATH=_rq139.PATH;var _rq140=rq(14),S=_rq140.S;var IOP=rq(174);var HTTPIORename=function(_IOP3){_inherits(HTTPIORename,_IOP3);var _super58=_createSuper(HTTPIORename);function HTTPIORename(){_cCC(this,HTTPIORename);return _super58.call(this)}_cC(HTTPIORename,[{key:"_In",value:function _In(){_get(_gPO(HTTPIORename.prototype),"_In",this).call(this);this._targetPath=null}},{key:"targetPath",get:function get(){return this._targetPath},set:function set(v){this._targetPath=PATH.FULL(v)}},{key:"Validate",value:function Validate(){if(!_get(_gPO(HTTPIORename.prototype),"Validate",this).call(this)){return false}var existing=this._resources.G(PATH.SHORT(this._targetPath));if(existing&&existing!=this.rsc){this._OnError(new Error("Cannot rename resource from '".concat(this.rsc.path,"' to '").concat(this._targetPath,"' : destination already exists")));return false}return true}},{key:"P",value:function P(){this._OnStart();this._OnProgress(0);this._OnError(new Error("HTTP rename not supported."))}},{key:"_CleanUp",value:function _CleanUp(){this._targetPath=null;_get(_gPO(HTTPIORename.prototype),"_CleanUp",this).call(this)}}]);return HTTPIORename}(IOP);mdl.xp["default"]=mdl.xp=HTTPIORename},{174:101,14:27,13:268}],105:[function(rq,mdl,xp){"use strict";var _rq141=rq(13),U=_rq141.U,PATH=_rq141.PATH,MIME=_rq141.MIME;var _rq142=rq(14),S=_rq142.S;var IOP=rq(174);var BLOBResource=rq(176);var HTTPIOWriter=function(_IOP4){_inherits(HTTPIOWriter,_IOP4);var _super59=_createSuper(HTTPIOWriter);function HTTPIOWriter(){_cCC(this,HTTPIOWriter);return _super59.call(this)}_cC(HTTPIOWriter,[{key:"P",value:function P(){this._OnStart();this._OnProgress(0);try{var a=HTTPIOWriter.dlLink;a.download="".concat(PATH.name(this._operation.fullPath)).concat(ext);a.href=window.URL.createObjectURL(U.isInstanceOf(this.rsc.content,Blob)?this.rsc.content:new Blob([this.rsc.content],{type:"".concat(this.rsc.mime?this.rsc.mime.type:"text/plain")}));a.click();this._OS()}catch(p_err){this._OnError(p_err)}}}],[{key:"dlLink",get:function get(){if(this.__a){return this.__a}this.__a=document.createElement("a");this.__a.style.display="none";return this.__a}}]);return HTTPIOWriter}(IOP);mdl.xp["default"]=mdl.xp=HTTPIOWriter},{174:101,176:119,14:27,13:268}],106:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={HTTPIOReader:rq(177),HTTPIOWriter:rq(178),HTTPIORename:rq(179),HTTPIODelete:rq(180),StorageIOReader:rq(181),StorageIOWriter:rq(182),StorageIORename:rq(183),StorageIODelete:rq(184)}},{180:102,177:103,179:104,178:105,184:107,181:108,183:109,182:110}],107:[function(rq,mdl,xp){"use strict";var _rq143=rq(13),U=_rq143.U,PATH=_rq143.PATH;var _rq144=rq(14),S=_rq144.S;var _rq145=rq(24),ENV=_rq145.ENV;var axios=rq("axios");var IOP=rq(174);var ENCODING=rq(175);var StorageIODelete=function(_IOP5){_inherits(StorageIODelete,_IOP5);var _super60=_createSuper(StorageIODelete);function StorageIODelete(){_cCC(this,StorageIODelete);return _super60.call(this)}_cC(StorageIODelete,[{key:"_In",value:function _In(){_get(_gPO(StorageIODelete.prototype),"_In",this).call(this);this._Bind(this._OnStorageRMd)}},{key:"P",value:function P(){this._OnStart();this._OnProgress(0);if(ENV.FEATURES.hasStorage){var _storage=ENV.FEATURES.storageArea;_storage.sync.remove(this._operation.fullPath,this._OnStorageRMd)}else{try{localStorage.removeItem(this._operation.fullPath);this._OnProgress(1);this._OS()}catch(e){this._OnError(new Error("Key '".concat(this._operation.fullPath,"' is not set.")))}}}},{key:"_OnStorageRMd",value:function _OnStorageRMd(p_evt){this._OnProgress(1);this._OS()}}]);return StorageIODelete}(IOP);mdl.xp["default"]=mdl.xp=StorageIODelete},{175:100,174:101,14:27,24:92,13:268,axios:123}],108:[function(rq,mdl,xp){"use strict";var _rq146=rq(13),U=_rq146.U,PATH=_rq146.PATH;var _rq147=rq(14),S=_rq147.S;var _rq148=rq(24),ENV=_rq148.ENV;var axios=rq("axios");var IOP=rq(174);var ENCODING=rq(175);var StorageIOReader=function(_IOP6){_inherits(StorageIOReader,_IOP6);var _super61=_createSuper(StorageIOReader);function StorageIOReader(){_cCC(this,StorageIOReader);return _super61.call(this)}_cC(StorageIOReader,[{key:"_In",value:function _In(){_get(_gPO(StorageIOReader.prototype),"_In",this).call(this);this._Bind(this._OnStorageRead)}},{key:"P",value:function P(){this._OnStart();this._OnProgress(0);if(ENV.FEATURES.hasStorage){var _storage2=ENV.FEATURES.storageArea;_storage2.sync.get(this._operation.fullPath,this._OnStorageRead)}else{var data=localStorage.getItem(this._operation.fullPath);if(!data){this._OnError(new Error("Key '".concat(this._operation.fullPath,"' is not set.")))}else{this._OnProgress(1);this.rsc.raw=data;this._OS()}}}},{key:"_OnStorageRead",value:function _OnStorageRead(p_evt){var data=p_data[this._operation.fullPath];if(U.isVoid(data)){this._OnError(new Error("Key '".concat(this._operation.fullPath,"' is not set.")))}else{this._OnProgress(1);this.rsc.raw=data;this._OS()}}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(StorageIOReader.prototype),"_CleanUp",this).call(this)}}]);return StorageIOReader}(IOP);mdl.xp["default"]=mdl.xp=StorageIOReader},{175:100,174:101,14:27,24:92,13:268,axios:123}],109:[function(rq,mdl,xp){"use strict";var _rq149=rq(13),U=_rq149.U,PATH=_rq149.PATH;var _rq150=rq(14),S=_rq150.S;var _rq151=rq(24),ENV=_rq151.ENV;var IOP=rq(174);var StorageIORename=function(_IOP7){_inherits(StorageIORename,_IOP7);var _super62=_createSuper(StorageIORename);function StorageIORename(){_cCC(this,StorageIORename);return _super62.call(this)}_cC(StorageIORename,[{key:"_In",value:function _In(){_get(_gPO(StorageIORename.prototype),"_In",this).call(this);this._targetPath=null;this._oldPath=null}},{key:"targetPath",get:function get(){return this._targetPath},set:function set(v){this._targetPath=v}},{key:"Validate",value:function Validate(){if(!_get(_gPO(StorageIORename.prototype),"Validate",this).call(this)){return false}var existing=this._resources.G(PATH.SHORT(this._targetPath));if(existing&&existing!=this.rsc){this._OnError(new Error("Cannot rename resource from '".concat(this._operation.fullPath,"' to '").concat(this._targetPath,"' : destination already exists")));return false}return true}},{key:"P",value:function P(){this._OnStart();this._OnProgress(0);this._oldPath=this._operation.fullPath;if(ENV.FEATURES.hasStorage){var _storage3=ENV.FEATURES.storageArea;_storage3.sync.get(this._targetPath,this._OnRenameExistsCheck)}else{var existingData=localStorage.getItem(this._targetPath);if(!existingData){localStorage.setItem(this._targetPath,localStorage.getItem(this._oldPath));localStorage.removeItem(this._oldPath);this._OnProgress(1);this._UPath(this._targetPath);this._OS()}else{this._OnError(new Error("Can't rename '".concat(this._oldPath,"' to '").concat(this._targetPath,"' : data is already present.")))}}}},{key:"_OnRenameExistsCheck",value:function _OnRenameExistsCheck(p_data){var data=p_data[this._oldPath];if(U.isVoid(data)){var _storage4=ENV.FEATURES.storageArea,dataCopy={};dataCopy[this._targetPath]=data;_storage4.sync.set(dataCopy,this._OnRenameStorageWritten)}else{this._OnError(new Error("Can't rename '".concat(this._oldPath,"' to '").concat(this._targetPath,"' : data is already present.")))}}},{key:"_OnRenameStorageWritten",value:function _OnRenameStorageWritten(p_data){if(!p_data){this._OnError(runtime.lastError)}else{this._OnProgress(.5);storage.sync.remove(this._oldPath,this._OnRenameStorageOldDeleted)}}},{key:"_OnRenameStorageOldDeleted",value:function _OnRenameStorageOldDeleted(p_data){if(!p_data){this._OnError(runtime.lastError)}else{this._OnProgress(1);this._UPath(this._targetPath);this._OS()}}},{key:"_CleanUp",value:function _CleanUp(){this._targetPath=null;this._oldPath=null;_get(_gPO(StorageIORename.prototype),"_CleanUp",this).call(this)}}]);return StorageIORename}(IOP);mdl.xp["default"]=mdl.xp=StorageIORename},{174:101,14:27,24:92,13:268}],110:[function(rq,mdl,xp){"use strict";var _rq152=rq(13),U=_rq152.U,PATH=_rq152.PATH,MIME=_rq152.MIME;var _rq153=rq(14),S=_rq153.S;var _rq154=rq(24),ENV=_rq154.ENV;var IOP=rq(174);var StorageIOWriter=function(_IOP8){_inherits(StorageIOWriter,_IOP8);var _super63=_createSuper(StorageIOWriter);function StorageIOWriter(){_cCC(this,StorageIOWriter);return _super63.call(this)}_cC(StorageIOWriter,[{key:"_In",value:function _In(){_get(_gPO(StorageIOWriter.prototype),"_In",this).call(this)}},{key:"P",value:function P(){this._OnStart();this._OnProgress(0);if(ENV.FEATURES.hasStorage){var _storage5=ENV.FEATURES.storageArea,data={};data[this._operation.fullPath]=this.rsc.raw;_storage5.sync.set(data,this._OnStorageWritten)}else{this._OnProgress(1);localStorage.setItem(this._operation.fullPath,this.rsc.raw);this._OS()}}},{key:"_OnStorageWritten",value:function _OnStorageWritten(p_data){if(!p_data){this._OnError(runtime.lastError)}else{this._OnProgress(1);this._OS()}}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(StorageIOWriter.prototype),"_CleanUp",this).call(this)}}]);return StorageIOWriter}(IOP);mdl.xp["default"]=mdl.xp=StorageIOWriter},{174:101,14:27,24:92,13:268}],111:[function(rq,mdl,xp){"use strict";var _rq155=rq(13),U=_rq155.U,PATH=_rq155.PATH;var _rq156=rq(14),S=_rq156.S,Observer=_rq156.Observer,__dOEx=_rq156.__dOEx;var _rq157=rq(18),List=_rq157.List;var IOQueue=function(___dOEx20){_inherits(IOQueue,___dOEx20);var _super64=_createSuper(IOQueue);function IOQueue(){_cCC(this,IOQueue);return _super64.call(this)}_cC(IOQueue,[{key:"_In",value:function _In(){_get(_gPO(IOQueue.prototype),"_In",this).call(this);this._queue=new List;this._currentItem=null;this._running=false;this._itemObserver=new Observer;this._itemObserver.H(S.FAIL,this._OnCurrentRscPingFailed,this);this._itemObserver.H(S.COMPLETE,this._OnCurrentRscPingComplete,this)}},{key:"running",get:function get(){return this._running}},{key:"isEmpty",get:function get(){return this._queue.isEmpty}},{key:"currentItem",get:function get(){return this._currentItem},set:function set(v){if(this._currentItem===v){return}var oldValue=this._currentItem;this._currentItem=v;if(oldValue){this._itemObserver.Unobserve(oldValue)}if(v){this._itemObserver.Observe(v)}}},{key:"A",value:function A(p_process){if(p_process===this._currentItem){return}this._queue.A(p_process)}},{key:"RM",value:function RM(p_process){if(p_process===this._currentItem){return}this._queue.RM(p_process)}},{key:"PNext",value:function PNext(){if(this._running){return}this._running=true;this._currentItem=this._queue.Shift();if(!this._currentItem){this._running=false;return}this._currentItem.W(S.COMPLETE,this._OnCurrentItemComplete,this);if(this._currentItem.Validate()){this._currentItem.P()}}},{key:"_OnCurrentItemComplete",value:function _OnCurrentItemComplete(it){this._running=false;this.PNext()}},{key:"_CleanUp",value:function _CleanUp(){this._queue.Clear();_get(_gPO(IOQueue.prototype),"_CleanUp",this).call(this)}}]);return IOQueue}(__dOEx);mdl.xp["default"]=mdl.xp=IOQueue},{18:21,14:27,13:268}],112:[function(rq,mdl,xp){"use strict";var IO_S=function IO_S(){_cCC(this,IO_S)};_defineProperty(IO_S,"RSC_REGISTERED",Symbol("rscRegistered"));_defineProperty(IO_S,"RSC_UNREGISTERED",Symbol("rscUnregistered"));_defineProperty(IO_S,"READ_START",Symbol("readStart"));_defineProperty(IO_S,"READ_ERROR",Symbol("readError"));_defineProperty(IO_S,"READ_PROGRESS",Symbol("readProgress"));_defineProperty(IO_S,"READ_COMPLETE",Symbol("readComplete"));_defineProperty(IO_S,"WRITE_STAR",Symbol("writeStart"));_defineProperty(IO_S,"WRITE_ERROR",Symbol("writeError"));_defineProperty(IO_S,"WRITE_PROGRESS",Symbol("writeProgress"));_defineProperty(IO_S,"WRITE_COMPLETE",Symbol("writeComplete"));_defineProperty(IO_S,"RENAME_START",Symbol("renameStart"));_defineProperty(IO_S,"RENAME_ERROR",Symbol("renameError"));_defineProperty(IO_S,"RENAME_PROGRESS",Symbol("renameProgress"));_defineProperty(IO_S,"RENAME_COMPLETE",Symbol("renameComplete"));_defineProperty(IO_S,"DELETE_START",Symbol("deleteStart"));_defineProperty(IO_S,"DELETE_ERROR",Symbol("deleteError"));_defineProperty(IO_S,"DELETE_PROGRESS",Symbol("deleteProgress"));_defineProperty(IO_S,"DELETE_COMPLETE",Symbol("deleteComplete"));_defineProperty(IO_S,"RENAMED",Symbol("renamed"));mdl.xp["default"]=mdl.xp=IO_S},{}],113:[function(rq,mdl,xp){"use strict";var IO_TYPE=function IO_TYPE(){_cCC(this,IO_TYPE)};_defineProperty(IO_TYPE,"DEFAULT","default");_defineProperty(IO_TYPE,"REMOTE","remote");_defineProperty(IO_TYPE,"LOCAL_STORAGE","local-storage");_defineProperty(IO_TYPE,"FILE_SYSTEM","file-system");mdl.xp["default"]=mdl.xp=IO_TYPE},{}],114:[function(rq,mdl,xp){"use strict";var _rq158=rq(13),U=_rq158.U,PATH=_rq158.PATH;var _rq159=rq(14),S=_rq159.S,__dOEx=_rq159.__dOEx,S_Box=_rq159.S_Box,Callbacks=_rq159.Callbacks;var ResourceOperation=function(___dOEx21){_inherits(ResourceOperation,___dOEx21);var _super65=_createSuper(ResourceOperation);function ResourceOperation(){_cCC(this,ResourceOperation);return _super65.call(this)}_cC(ResourceOperation,[{key:"_In",value:function _In(){_get(_gPO(ResourceOperation.prototype),"_In",this).call(this);this._callbacks=new Callbacks;this._originalState=null;this._ioType=null;this._cancelled=false;this._fullPath=null;this._Reset()}},{key:"rsc",get:function get(){return this._rsc},set:function set(v){if(U.isVoid(v)){v=this}this._rsc=v}},{key:"ioType",get:function get(){return this._ioType}},{key:"fullPath",get:function get(){return this._fullPath}},{key:"_Reset",value:function _Reset(){this._rsc=null;this._originalState=null;this._callbacks.Clear();this._states=null;this._ioType=null;this._fullPath=null}},{key:"Prepare",value:function Prepare(p_rsc,p_fn,p_states){var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var args=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];this._cancelled=false;this._rsc=p_rsc;this._fullPath=PATH.FULL(p_rsc.path);this._ioType=U.G(o,"io",null);this._callbacks.A(o);this._states=p_states;this._originalState=this._rsc._state.currentState;this._rsc._state.currentState=this._states.prepare.state;args.unshift(this);p_fn.apply(null,args)}},{key:"Cancel",value:function Cancel(){this._cancelled=true;this._rsc._state.currentState=this._originalState;this.OnEnd()}},{key:"OnStart",value:function OnStart(){this._rsc._state.currentState=this._states.start;this._rsc._B(this._states.start.evt,this._rsc);if(this._states.start.fn){this._states.start.fn()}}},{key:"OnError",value:function OnError(p_err){if(this._states.error.fn){this._states.error.fn()}this._rsc._state.currentState=this._states.error.state;p_err.rsc=this._rsc;this._callbacks.OnErrorFlush(p_err);this._rsc._B(this._states.error.evt,this._rsc,p_err);this.OnEnd()}},{key:"OnProgress",value:function OnProgress(p_progress){if(this._states.progress.fn){this._states.progress.fn()}this._rsc._state.currentState=this._states.progress.state;this._rsc._B(this._states.progress.evt,this._rsc,p_progress)}},{key:"OS",value:function OS(){if(this._states.success.fn){this._states.success.fn()}this._rsc._state.currentState=this._states.success.state;this._callbacks.OSFlush(this._rsc);this._rsc._B(this._states.success.evt,this._rsc);this.OnEnd()}},{key:"OnEnd",value:function OnEnd(){if(this._rsc._operation===this){this._rsc._operation=null}this.Release()}},{key:"_CleanUp",value:function _CleanUp(){this._Reset();_get(_gPO(ResourceOperation.prototype),"_CleanUp",this).call(this)}}]);return ResourceOperation}(__dOEx);mdl.xp["default"]=mdl.xp=ResourceOperation},{14:27,13:268}],115:[function(rq,mdl,xp){"use strict";var _rq160=rq(14),Stateb_=_rq160.Stateb_;var RESSOURCE_STATE=function(_Stateb_){_inherits(RESSOURCE_STATE,_Stateb_);var _super66=_createSuper(RESSOURCE_STATE);function RESSOURCE_STATE(){_cCC(this,RESSOURCE_STATE);return _super66.call(this)}_cC(RESSOURCE_STATE,null,[{key:"NONE",get:function get(){return RESSOURCE_STATE.GOrCreate("none")}},{key:"READ_PENDING",get:function get(){return RESSOURCE_STATE.GOrCreate("read-pending")}},{key:"READING",get:function get(){return RESSOURCE_STATE.GOrCreate("reading")}},{key:"WRITE_PENDING",get:function get(){return RESSOURCE_STATE.GOrCreate("write-pending")}},{key:"WRITING",get:function get(){return RESSOURCE_STATE.GOrCreate("writing")}},{key:"RENAME_PENDING",get:function get(){return RESSOURCE_STATE.GOrCreate("rename-pending")}},{key:"RENAMING",get:function get(){return RESSOURCE_STATE.GOrCreate("renaming")}},{key:"DELETE_PENDING",get:function get(){return RESSOURCE_STATE.GOrCreate("delete-pending")}},{key:"DELETING",get:function get(){return RESSOURCE_STATE.GOrCreate("deleting")}},{key:"READY",get:function get(){return RESSOURCE_STATE.GOrCreate("ready")}}]);return RESSOURCE_STATE}(Stateb_);mdl.xp["default"]=mdl.xp=RESSOURCE_STATE},{14:27}],116:[function(rq,mdl,xp){"use strict";var _rq161=rq(13),U=_rq161.U,PATH=_rq161.PATH,MIME=_rq161.MIME;var _rq162=rq(14),S=_rq162.S,POOL=_rq162.POOL,__dOEx=_rq162.__dOEx,StateMachine=_rq162.StateMachine,__dO=_rq162.__dO,Callbacks=_rq162.Callbacks;var IO_S=rq(185);var RESSOURCE_STATE=rq(186);var ResourceOperation=rq(187);var RESPONSE_TYPE=rq(188);var Resource=function(___dOEx22){_inherits(Resource,___dOEx22);var _super67=_createSuper(Resource);function Resource(){_cCC(this,Resource);return _super67.call(this)}_cC(Resource,[{key:"_In",value:function _In(){_get(_gPO(Resource.prototype),"_In",this).call(this);this._name=null;this._path=null;this._mime=null;this._type=this.constructor.defaultType;this._encoding=null;this._stats=null;this._exists=false;this._loaded=false;this._raw=null;this._content=null;this._directory=null;this._readFn=null;this._writeFn=null;this._deleteFn=null;this._renameFn=null;this._commitRnFn=null;this._deserializeFn=null;this._serializeFn=null;this._state=new StateMachine;this._state.currentState=RESSOURCE_STATE.NONE;this._state.owner=this;this._operation=null;this._releaseOnDeleteSuccess=false;this._readOperationConfig={prepare:{state:RESSOURCE_STATE.READ_PENDING},start:{state:RESSOURCE_STATE.READING,evt:IO_S.READ_START},progress:{state:RESSOURCE_STATE.READING,evt:IO_S.READ_PROGRESS},error:{state:RESSOURCE_STATE.NONE,evt:IO_S.READ_ERROR},success:{state:RESSOURCE_STATE.READY,evt:IO_S.READ_COMPLETE,fn:this._Bind(this._OnReadSuccess)}};this._writeOperationConfig={prepare:{state:RESSOURCE_STATE.WRITE_PENDING},start:{state:RESSOURCE_STATE.WRITING,evt:IO_S.WRITE_START,fn:this._Bind(this._OnWriteStart)},progress:{state:RESSOURCE_STATE.WRITING,evt:IO_S.WRITE_PROGRESS},error:{state:RESSOURCE_STATE.NONE,evt:IO_S.WRITE_ERROR},success:{state:RESSOURCE_STATE.READY,evt:IO_S.WRITE_COMPLETE}};this._renameOperationConfig={prepare:{state:RESSOURCE_STATE.RENAME_PENDING},start:{state:RESSOURCE_STATE.RENAMING,evt:IO_S.RENAME_START},progress:{state:RESSOURCE_STATE.RENAMING,evt:IO_S.RENAME_PROGRESS},error:{state:RESSOURCE_STATE.NONE,evt:IO_S.RENAME_ERROR},success:{state:RESSOURCE_STATE.READY,evt:IO_S.RENAME_COMPLETE}};this._deleteOperationConfig={prepare:{state:RESSOURCE_STATE.DELETE_PENDING},start:{state:RESSOURCE_STATE.DELETING,evt:IO_S.DELETE_START},progress:{state:RESSOURCE_STATE.DELETING,evt:IO_S.DELETE_PROGRESS},error:{state:RESSOURCE_STATE.NONE,evt:IO_S.DELETE_ERROR},success:{state:RESSOURCE_STATE.READY,evt:IO_S.DELETE_COMPLETE,fn:this._Bind(this._OnDeleteSuccess)}}}},{key:"loaded",get:function get(){return this._loaded}},{key:"directory",get:function get(){return this._directory},set:function set(v){if(this._directory===v){return}var oldDir=this._directory;this._directory=v;this._OnDirectoryCh(oldDir)}},{key:"_OnDirectoryCh",value:function _OnDirectoryCh(p_oldValue){if(p_oldValue){p_oldValue.RM(this)}if(this._directory){this._directory.A(this)}}},{key:"isDir",get:function get(){return false}},{key:"name",get:function get(){return this._name}},{key:"path",get:function get(){return this._path},set:function set(v){if(this._path){throw new Error("Attempting to change the already set path of an rsc. Use Rename instead.")}this._path=v;this._UPathInfos()}},{key:"mime",get:function get(){return this._mime},set:function set(v){this._mime=v}},{key:"type",get:function get(){return this._type},set:function set(v){this._type=v}},{key:"encoding",get:function get(){return this._encoding},set:function set(v){this._encoding=v}},{key:"state",get:function get(){return this._state.currentState}},{key:"stats",get:function get(){return this._stats},set:function set(v){this._stats=v}},{key:"exists",get:function get(){return this._exists},set:function set(v){this._exists=v}},{key:"_UPath",value:function _UPath(p_newPath){var oldPath=this._path;this._path=p_newPath;this._UPathInfos();this._commitRnFn(this,oldPath);this._OnPathUd(oldPath);this._B(IO_S.RENAMED,this,oldPath)}},{key:"_OnPathUd",value:function _OnPathUd(p_oldPath){}},{key:"_UPathInfos",value:function _UPathInfos(){try{this._name=PATH.name(new URL(PATH.FULL(this._path)).pathname)}catch(err){this._name=PATH.name(this._path)}if(!this._mime){this._mime=MIME.G(PATH.ext(this._path))}}},{key:"raw",get:function get(){return this._raw},set:function set(v){this._raw=v}},{key:"content",get:function get(){return this._content},set:function set(v){this._content=v}},{key:"_PrepareOperation",value:function _PrepareOperation(p_fn,p_states){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(this._state.IsNotAny(RESSOURCE_STATE.NONE,RESSOURCE_STATE.READY)){console.warn("Resource ".concat(this," not in a state allowing operation"));return false}this._operation=POOL.Rt(ResourceOperation);for(var _len15=arguments.length,args=new Array(_len15>3?_len15-3:0),_key17=3;_key17<_len15;_key17++){args[_key17-3]=arguments[_key17]}this._operation.Prepare(this,p_fn,p_states,o,args);return true}},{key:"CancelOperation",value:function CancelOperation(){if(this._operation){this._operation.Cancel()}}},{key:"Read",value:function Read(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this._PrepareOperation(this._readFn,this._readOperationConfig,o)}},{key:"_OnReadSuccess",value:function _OnReadSuccess(){this._loaded=true;this._content=this._Decode()}},{key:"_Decode",value:function _Decode(){if(!this._deserializeFn){throw new Error("Deserialize not implemented in resource. If you don't use a serializer, make sure to set Resource._deserializeFn.")}return this._deserializeFn(this._raw,this)}},{key:"Write",value:function Write(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this._PrepareOperation(this._writeFn,this._writeOperationConfig,o)}},{key:"_OnWriteStart",value:function _OnWriteStart(){this._raw=this._Encode()}},{key:"_Encode",value:function _Encode(){if(!this._serializeFn){throw new Error("Serialize not implemented in resource. If you don't use a serializer, make sure to set Resource._serializeFn.")}return this._serializeFn(this._content,this)}},{key:"Rename",value:function Rename(p_newPath){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this._PrepareOperation(this._renameFn,this._renameOperationConfig,o,p_newPath)}},{key:"Delete",value:function Delete(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this._PrepareOperation(this._deleteFn,this._deleteOperationConfig,o)}},{key:"DeleteAndRelease",value:function DeleteAndRelease(){this._releaseOnDeleteSuccess=true;return this._PrepareOperation(this._deleteFn,this._deleteOperationConfig,o)}},{key:"_OnDeleteSuccess",value:function _OnDeleteSuccess(){if(U.isInstanceOf(this._content,__dO)){this._content.Release()}this._content=null;this._raw=null;this._loaded=false;if(this._releaseOnDeleteSuccess){this.Release()}}},{key:"_CleanUp",value:function _CleanUp(){if(this._operation){this.CancelOperation()}this._operation=null;this._name=null;this._path=null;this._mime=null;this._type=this.constructor.defaultType;this._encoding=null;this._stats=null;this._exists=false;this._loaded=false;this._raw=null;this._content=null;this._readFn=null;this._writeFn=null;this._readFn=null;this._writeFn=null;this._deleteFn=null;this._renameFn=null;this._commitRnFn=null;this._deserializeFn=null;this._serializeFn=null;this._releaseOnDeleteSuccess=false;this._state.currentState=RESSOURCE_STATE.NONE;_get(_gPO(Resource.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[".concat(this.constructor.name,"::").concat(this.path,"]")}}]);return Resource}(__dOEx);_defineProperty(Resource,"defaultType",RESPONSE_TYPE.TEXT);mdl.xp["default"]=mdl.xp=Resource},{185:112,187:114,186:115,188:122,14:27,13:268}],117:[function(rq,mdl,xp){"use strict";var _rq163=rq(13),U=_rq163.U,PATH=_rq163.PATH;var _rq164=rq(14),S=_rq164.S,POOL=_rq164.POOL;var _rq165=rq(18),Dictionary=_rq165.Dictionary;var _rq166=rq(20),Serviceb_=_rq166.Serviceb_;var IO_S=rq(189);var ENCODING=rq(190);var RESPONSE_TYPE=rq(191);var Resource=rq(173);var Directory=rq(192);var IOQueue=rq(193);var _rq167=rq(194),StorageIOReader=_rq167.StorageIOReader,StorageIOWriter=_rq167.StorageIOWriter,StorageIORename=_rq167.StorageIORename,StorageIODelete=_rq167.StorageIODelete,HTTPIOReader=_rq167.HTTPIOReader,HTTPIOWriter=_rq167.HTTPIOWriter,HTTPIORename=_rq167.HTTPIORename,HTTPIODelete=_rq167.HTTPIODelete;var IO_TYPE=rq(195);var ResourceOperation=rq(187);var IOP=rq(196);var RESOURCES=function(_Serviceb_3){_inherits(RESOURCES,_Serviceb_3);var _super68=_createSuper(RESOURCES);function RESOURCES(){_cCC(this,RESOURCES);return _super68.call(this)}_cC(RESOURCES,[{key:"_In",value:function _In(){_get(_gPO(RESOURCES.prototype),"_In",this).call(this);this._resources=new Dictionary;this._IOStatCheck=this._GStats;this._io={};this._io[IO_TYPE.DEFAULT]={read:HTTPIOReader,write:HTTPIOWriter,rename:HTTPIORename,delete:HTTPIODelete};this._io[IO_TYPE.REMOTE]={read:HTTPIOReader,write:HTTPIOWriter,rename:HTTPIORename,delete:HTTPIODelete};this._io[IO_TYPE.LOCAL_STORAGE]={read:StorageIOReader,write:StorageIOWriter,rename:StorageIORename,delete:StorageIODelete};this._IOQueue=new IOQueue;this._Bind(this._RequestRead);this._Bind(this._RequestWrite);this._Bind(this._RequestDelete);this._Bind(this._RequestRename);this._Bind(this._CommitRename);this._Bind(this._RequestRsc)}},{key:"_GStats",value:function _GStats(p_path,o){return null}},{key:"_TryG",value:function _TryG(p_path){return this._resources.G(PATH.SHORT(p_path))}},{key:"_G",value:function _G(p_path){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var shortPath=PATH.SHORT(p_path),rsc=this._resources.G(shortPath);if(rsc){if(rscClass&&!U.isInstanceOf(rsc,rscClass)){throw new Error("Attempting to get an existing resource (".concat(rsc.constructor.name,") with a mismatching type(").concat(rscClass.name,")"))}return rsc}var rscClass=U.G(o,"cl",null),stats=null,fullPath=PATH.FULL(p_path);try{stats=this._GStats(fullPath)}catch(err){stats=null}if(!stats){if(!rscClass){rscClass=Resource}}else if(stats.isDirectory()){if(rscClass&&!U.isInstanceOf(rscClass,Directory)){throw new Error("Directory cannot be assigned Resource constructor (".concat(rscClass.name,")"))}if(!rscClass){rscClass=Directory}}else{if(!rscClass){rscClass=Resource}}rsc=POOL.Rt(rscClass);rsc.path=shortPath;rsc.encoding=U.G(o,"encoding",ENCODING.UTF8);rsc.type=U.G(o,"type",RESPONSE_TYPE.TEXT);rsc.stats=stats;rsc.exists=stats!=null;this._RegisterRsc(rsc);return rsc}},{key:"_RegisterRsc",value:function _RegisterRsc(p_rsc){p_rsc._readFn=this._RequestRead;p_rsc._writeFn=this._RequestWrite;p_rsc._deleteFn=this._RequestDelete;p_rsc._renameFn=this._RequestRename;p_rsc._commitRnFn=this._CommitRename;if(p_rsc.isDir){p_rsc._requestRsc=this._RequestRsc}p_rsc.W(S.RELEASED,this._OnRscReleased,this);this._resources.S(p_rsc.path,p_rsc);var dirPath=PATH.dir(p_rsc.path),dirRsc=this._resources.G(dirPath);if(dirRsc&&dirRsc!=p_rsc){dirRsc.A(p_rsc)}this._B(IO_S.RSC_REGISTERED,p_rsc)}},{key:"_IOID",value:function _IOID(p_ioId,p_operation){if(U.isEmpty(p_ioId)||!(p_ioId in this._io)){return IO_TYPE.DEFAULT}return p_ioId}},{key:"_RequestRead",value:function _RequestRead(p_operation){var ioP=POOL.Rt(this._io[this._IOID(p_operation.ioType,p_operation)].read);ioP.operation=p_operation;this._PushIOP(ioP)}},{key:"_RequestWrite",value:function _RequestWrite(p_operation){var ioP=POOL.Rt(this._io[this._IOID(p_operation.ioType,p_operation)].write);ioP.operation=p_operation;this._PushIOP(ioP)}},{key:"_RequestDelete",value:function _RequestDelete(p_operation){var ioP=POOL.Rt(this._io[this._IOID(p_operation.ioType,p_operation)]["delete"]);ioP.operation=p_operation;this._PushIOP(ioP)}},{key:"_RequestRename",value:function _RequestRename(p_operation,p_newPath){var ioP=POOL.Rt(this._io[this._IOID(p_operation.ioType,p_operation)].rename);ioP.operation=p_operation;ioP.targetPath=p_newPath;this._PushIOP(ioP)}},{key:"_PushIOP",value:function _PushIOP(p_ioP){p_ioP._globalResourceMap=this._resources;this._IOQueue.A(p_ioP);this._tick.Schedule()}},{key:"_CommitRename",value:function _CommitRename(p_rsc,p_oldKey){this._resources.RM(p_oldKey);var newPath=p_rsc.path;this._resources.S(newPath,p_rsc);var dirPath=PATH.dir(newPath),dir=this._resources.G(dirPath);if(dir){p_rsc.directory=dir}else if(p_rsc.directory){p_rsc.directory=null}}},{key:"_RequestRsc",value:function _RequestRsc(p_path){var p_encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_class=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return this._G(p_path,p_encoding,p_class)}},{key:"_OnRscReleased",value:function _OnRscReleased(p_rsc){this._resources.RM(p_rsc.path);this._B(IO_S.RSC_UNREGISTERED,p_rsc)}},{key:"_Tick",value:function _Tick(p_delta){_get(_gPO(RESOURCES.prototype),"_Tick",this).call(this,p_delta);this._UQueue(this._IOQueue)}},{key:"_UQueue",value:function _UQueue(p_queue){if(!p_queue.isEmpty){this._tick.Schedule()}if(!p_queue.running&&!p_queue.isEmpty){p_queue.PNext()}}}],[{key:"G",value:function G(p_path){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.instance._G(p_path,o)}},{key:"TryG",value:function TryG(p_path){return this.instance._TryG(p_path)}},{key:"GDir",value:function GDir(p_path){return this.instance._G(p_path,{cl:Directory})}}]);return RESOURCES}(Serviceb_);mdl.xp["default"]=mdl.xp=RESOURCES},{192:99,190:100,196:101,194:106,193:111,189:112,195:113,173:116,187:114,191:122,18:21,14:27,20:150,13:268}],118:[function(rq,mdl,xp){"use strict";var _rq168=rq(13),U=_rq168.U,PATH=_rq168.PATH;var _rq169=rq(14),S=_rq169.S;var Resource=rq(197);var RESPONSE_TYPE=rq(198);var BinaryResource=function(_Resource2){_inherits(BinaryResource,_Resource2);var _super69=_createSuper(BinaryResource);function BinaryResource(){_cCC(this,BinaryResource);return _super69.call(this)}return BinaryResource}(Resource);_defineProperty(BinaryResource,"defaultType",RESPONSE_TYPE.ARRAYBUFFER);mdl.xp["default"]=mdl.xp=BinaryResource},{197:116,198:122,14:27,13:268}],119:[function(rq,mdl,xp){"use strict";var _rq170=rq(13),U=_rq170.U,PATH=_rq170.PATH;var _rq171=rq(14),S=_rq171.S;var BinaryResource=rq(199);var RESPONSE_TYPE=rq(198);var BlobResource=function(_BinaryResource){_inherits(BlobResource,_BinaryResource);var _super70=_createSuper(BlobResource);function BlobResource(){_cCC(this,BlobResource);return _super70.call(this)}_cC(BlobResource,[{key:"_In",value:function _In(){_get(_gPO(BlobResource.prototype),"_In",this).call(this);this._objectURL=null}},{key:"objectURL",get:function get(){if(this._objectURL){return this._objectURL}this._objectURL=URL.createObjectURL(this._content)}},{key:"_Encode",value:function _Encode(){if(U.isInstanceOf(this._content,Blob)){return this._content}else if(this._mime){return new Blob([this._content],{type:this._mime.type})}else{return new Blob([this._content])}}},{key:"_Decode",value:function _Decode(){this._objectURL=null;if(U.isInstanceOf(this._raw,Blob)){return this._raw}else if(this._mime){return new Blob([this._raw],{type:this._mime.type})}else{return new Blob([this._raw])}}},{key:"_CleanUp",value:function _CleanUp(){if(this._objectURL){URL.revokeObjectURL(this._objectURL);this._objectURL=null}_get(_gPO(BlobResource.prototype),"_CleanUp",this).call(this)}}]);return BlobResource}(BinaryResource);_defineProperty(BlobResource,"defaultType",RESPONSE_TYPE.BLOB);mdl.xp["default"]=mdl.xp=BlobResource},{198:122,199:121,14:27,13:268}],120:[function(rq,mdl,xp){"use strict";var _rq172=rq(13),U=_rq172.U,PATH=_rq172.PATH;var _rq173=rq(14),S=_rq173.S;var TextResource=rq(199);var RESPONSE_TYPE=rq(198);var JSONResource=function(_TextResource){_inherits(JSONResource,_TextResource);var _super71=_createSuper(JSONResource);function JSONResource(){_cCC(this,JSONResource);return _super71.call(this)}_cC(JSONResource,[{key:"_Encode",value:function _Encode(){return U.isObject(this._content)?JSON.stringify(this._content,null,"     "):"{}"}},{key:"_Decode",value:function _Decode(){return JSON.parse(_get(_gPO(JSONResource.prototype),"_Decode",this).call(this))}}]);return JSONResource}(TextResource);_defineProperty(JSONResource,"defaultType",RESPONSE_TYPE.JSON);mdl.xp["default"]=mdl.xp=JSONResource},{198:122,199:121,14:27,13:268}],121:[function(rq,mdl,xp){"use strict";var _rq174=rq(13),U=_rq174.U,PATH=_rq174.PATH;var _rq175=rq(14),S=_rq175.S;var Resource=rq(197);var RESPONSE_TYPE=rq(198);var TextResource=function(_Resource3){_inherits(TextResource,_Resource3);var _super72=_createSuper(TextResource);function TextResource(){_cCC(this,TextResource);return _super72.call(this)}_cC(TextResource,[{key:"_Encode",value:function _Encode(){return this._content?this._content:""}},{key:"_Decode",value:function _Decode(){if(U.isString(this._raw)){return this._raw}else if(U.isArrayBuffer(this._raw)){var decoder=new TextDecoder(this._encoding);return decoder.decode(ArrayBuffer.isView(this._raw)?this._raw:new DataView(this._raw,0))}try{var fileReader=new FileReaderSync;if(U.isInstanceOf(this._raw,Blob)){return fileReader.readAsString(this._raw,this._encoding)}else{return""}}catch(e){return""}}}]);return TextResource}(Resource);_defineProperty(TextResource,"defaultType",RESPONSE_TYPE.TEXT);mdl.xp["default"]=mdl.xp=TextResource},{197:116,198:122,14:27,13:268}],122:[function(rq,mdl,xp){"use strict";var RESPONSE_TYPE=function RESPONSE_TYPE(){_cCC(this,RESPONSE_TYPE)};_defineProperty(RESPONSE_TYPE,"TEXT","text");_defineProperty(RESPONSE_TYPE,"ARRAYBUFFER","arraybuffer");_defineProperty(RESPONSE_TYPE,"BLOB","blob");_defineProperty(RESPONSE_TYPE,"DOCUMENT","document");_defineProperty(RESPONSE_TYPE,"JSON","json");mdl.xp["default"]=mdl.xp=RESPONSE_TYPE},{}],123:[function(rq,mdl,xp){mdl.xp=rq(200)},{200:125}],124:[function(rq,mdl,xp){"use strict";var utils=rq(201);var settle=rq(202);var cookies=rq(203);var buildURL=rq(204);var buildFullPath=rq(205);var parseHeaders=rq(206);var isURLSameOrigin=rq(207);var createError=rq(208);mdl.xp=function xhrAdapter(config){return new Promise((function dispatchXhrRequest(resolve,reject){var requestData=config.data;var requestHeaders=config.headers;if(utils.isFormData(requestData)){delete requestHeaders["Content-Type"]}var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"";var password=config.auth.password?unescape(encodeURIComponent(config.auth.password)):"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),true);request.timeout=config.timeout;request.onreadystatechange=function handleLoad(){if(!request||request.readyState!==4){return}if(request.status===0&&!(request.responseURL&&request.responseURL.indexOf("file:")===0)){return}var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null;var responseData=!config.responseType||config.responseType==="text"?request.responseText:request.response;var response={data:responseData,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response);request=null};request.onabort=function handleAbort(){if(!request){return}reject(createError("Request aborted",config,"ECONNABORTED",request));request=null};request.onerror=function handleError(){reject(createError("Network Error",config,null,request));request=null};request.ontimeout=function handleTimeout(){var timeoutErrorMessage="timeout of "+config.timeout+"ms exceeded";if(config.timeoutErrorMessage){timeoutErrorMessage=config.timeoutErrorMessage}reject(createError(timeoutErrorMessage,config,"ECONNABORTED",request));request=null};if(utils.isStandardBrowserEnv()){var xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):undefined;if(xsrfValue){requestHeaders[config.xsrfHeaderName]=xsrfValue}}if("setRequestHeader"in request){utils.forEach(requestHeaders,(function setRequestHeader(val,key){if(typeof requestData==="undefined"&&key.toLowerCase()==="content-type"){delete requestHeaders[key]}else{request.setRequestHeader(key,val)}}))}if(!utils.isUndefined(config.withCredentials)){request.withCredentials=!!config.withCredentials}if(config.responseType){try{request.responseType=config.responseType}catch(e){if(config.responseType!=="json"){throw e}}}if(typeof config.onDownloadProgress==="function"){request.addEventListener("progress",config.onDownloadProgress)}if(typeof config.onUploadProgress==="function"&&request.upload){request.upload.addEventListener("progress",config.onUploadProgress)}if(config.cancelToken){config.cancelToken.promise.then((function onCanceled(cancel){if(!request){return}request.abort();reject(cancel);request=null}))}if(!requestData){requestData=null}request.send(requestData)}))}},{205:131,208:132,202:136,204:140,203:142,207:145,206:147,201:149}],125:[function(rq,mdl,xp){"use strict";var utils=rq(209);var bind=rq(210);var Axios=rq(211);var mergeConfig=rq(212);var defaults=rq(213);function createInstance(defaultConfig){var context=new Axios(defaultConfig);var instance=bind(Axios.prototype.request,context);utils.extend(instance,Axios.prototype,context);utils.extend(instance,context);return instance}var axios=createInstance(defaults);axios.Axios=Axios;axios.create=function create(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig))};axios.Cancel=rq(214);axios.CancelToken=rq(215);axios.isCancel=rq(216);axios.all=function all(promises){return Promise.all(promises)};axios.spread=rq(217);axios.isAxiosError=rq(218);mdl.xp["default"]=mdl.xp=axios;mdl.xp["default"]=axios},{214:126,215:127,216:128,211:129,212:135,213:138,210:139,218:144,217:148,209:149}],126:[function(rq,mdl,xp){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")};Cancel.prototype.__CANCEL__=true;mdl.xp=Cancel},{}],127:[function(rq,mdl,xp){"use strict";var Cancel=rq(219);function CancelToken(executor){if(typeof executor!=="function"){throw new TypeError("executor must be a function.")}var resolvePromise;this.promise=new Promise((function promiseExecutor(resolve){resolvePromise=resolve}));var token=this;executor((function cancel(message){if(token.reason){return}token.reason=new Cancel(message);resolvePromise(token.reason)}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason){throw this.reason}};CancelToken.source=function source(){var cancel;var token=new CancelToken((function executor(c){cancel=c}));return{token:token,cancel:cancel}};mdl.xp=CancelToken},{219:126}],128:[function(rq,mdl,xp){"use strict";mdl.xp=function isCancel(value){return!!(value&&value.__CANCEL__)}},{}],129:[function(rq,mdl,xp){"use strict";var utils=rq(201);var buildURL=rq(220);var InterceptorManager=rq(221);var dispatchRequest=rq(222);var mergeConfig=rq(223);function Axios(instanceConfig){this.defaults=instanceConfig;this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function request(config){if(typeof config==="string"){config=arguments[1]||{};config.url=arguments[0]}else{config=config||{}}config=mergeConfig(this.defaults,config);if(config.method){config.method=config.method.toLowerCase()}else if(this.defaults.method){config.method=this.defaults.method.toLowerCase()}else{config.method="get"}var chain=[dispatchRequest,undefined];var promise=Promise.resolve(config);this.interceptors.request.forEach((function unshiftRequestInterceptors(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)}));this.interceptors.response.forEach((function pushResponseInterceptors(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)}));while(chain.length){promise=promise.then(chain.shift(),chain.shift())}return promise};Axios.prototype.getUri=function getUri(config){config=mergeConfig(this.defaults,config);return buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")};utils.forEach(["delete","get","head","options"],(function forEachMethodNoData(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:(config||{}).data}))}}));utils.forEach(["post","put","patch"],(function forEachMethodwData(method){Axios.prototype[method]=function(url,data,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:data}))}}));mdl.xp=Axios},{220:140,201:149,221:130,222:133,223:135}],130:[function(rq,mdl,xp){"use strict";var utils=rq(201);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(fulfilled,rejected){this.handlers.push({fulfilled:fulfilled,rejected:rejected});return this.handlers.length-1};InterceptorManager.prototype.eject=function eject(id){if(this.handlers[id]){this.handlers[id]=null}};InterceptorManager.prototype.forEach=function forEach(fn){utils.forEach(this.handlers,(function forEachHandler(h){if(h!==null){fn(h)}}))};mdl.xp=InterceptorManager},{201:149}],131:[function(rq,mdl,xp){"use strict";var isAbsoluteURL=rq(224);var combineURLs=rq(225);mdl.xp=function buildFullPath(baseURL,requestedURL){if(baseURL&&!isAbsoluteURL(requestedURL)){return combineURLs(baseURL,requestedURL)}return requestedURL}},{225:141,224:143}],132:[function(rq,mdl,xp){"use strict";var enhanceError=rq(226);mdl.xp=function createError(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},{226:134}],133:[function(rq,mdl,xp){"use strict";var utils=rq(201);var transformData=rq(227);var isCancel=rq(228);var defaults=rq(229);function throwIfCancellationRequested(config){if(config.cancelToken){config.cancelToken.throwIfRequested()}}mdl.xp=function dispatchRequest(config){throwIfCancellationRequested(config);config.headers=config.headers||{};config.data=transformData(config.data,config.headers,config.transformRequest);config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers);utils.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(method){delete config.headers[method]}));var adapter=config.adapter||defaults.adapter;return adapter(config).then((function onAdapterResolution(response){throwIfCancellationRequested(config);response.data=transformData(response.data,response.headers,config.transformResponse);return response}),(function onAdapterRejection(reason){if(!isCancel(reason)){throwIfCancellationRequested(config);if(reason&&reason.response){reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse)}}return Promise.reject(reason)}))}},{228:128,229:138,201:149,227:137}],134:[function(rq,mdl,xp){"use strict";mdl.xp=function enhanceError(error,config,code,request,response){error.config=config;if(code){error.code=code}error.request=request;error.response=response;error.isAxiosError=true;error.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}};return error}},{}],135:[function(rq,mdl,xp){"use strict";var utils=rq(230);mdl.xp=function mergeConfig(config1,config2){config2=config2||{};var config={};var valueFromConfig2Keys=["url","method","data"];var mergeDeepPropertiesKeys=["headers","auth","proxy","params"];var defaultToConfig2Keys=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"];var directMergeKeys=["validateStatus"];function getMergedValue(target,source){if(utils.isPlainObject(target)&&utils.isPlainObject(source)){return utils.merge(target,source)}else if(utils.isPlainObject(source)){return utils.merge({},source)}else if(utils.isArray(source)){return source.slice()}return source}function mergeDeepProperties(prop){if(!utils.isUndefined(config2[prop])){config[prop]=getMergedValue(config1[prop],config2[prop])}else if(!utils.isUndefined(config1[prop])){config[prop]=getMergedValue(undefined,config1[prop])}}utils.forEach(valueFromConfig2Keys,(function valueFromConfig2(prop){if(!utils.isUndefined(config2[prop])){config[prop]=getMergedValue(undefined,config2[prop])}}));utils.forEach(mergeDeepPropertiesKeys,mergeDeepProperties);utils.forEach(defaultToConfig2Keys,(function defaultToConfig2(prop){if(!utils.isUndefined(config2[prop])){config[prop]=getMergedValue(undefined,config2[prop])}else if(!utils.isUndefined(config1[prop])){config[prop]=getMergedValue(undefined,config1[prop])}}));utils.forEach(directMergeKeys,(function merge(prop){if(prop in config2){config[prop]=getMergedValue(config1[prop],config2[prop])}else if(prop in config1){config[prop]=getMergedValue(undefined,config1[prop])}}));var axiosKeys=valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys).concat(directMergeKeys);var otherKeys=Object.keys(config1).concat(Object.keys(config2)).filter((function filterAxiosKeys(key){return axiosKeys.indexOf(key)===-1}));utils.forEach(otherKeys,mergeDeepProperties);return config}},{230:149}],136:[function(rq,mdl,xp){"use strict";var createError=rq(231);mdl.xp=function settle(resolve,reject,response){var validateStatus=response.config.validateStatus;if(!response.status||!validateStatus||validateStatus(response.status)){resolve(response)}else{reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response))}}},{231:132}],137:[function(rq,mdl,xp){"use strict";var utils=rq(201);mdl.xp=function transformData(data,headers,fns){utils.forEach(fns,(function transform(fn){data=fn(data,headers)}));return data}},{201:149}],138:[function(rq,mdl,xp){(function(process){(function(){"use strict";var utils=rq(209);var normalizeHeaderName=rq(232);var DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){if(!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])){headers["Content-Type"]=value}}function getDefaultAdapter(){var adapter;if(typeof XMLHttpRequest!=="undefined"){adapter=rq(233)}else if(typeof process!=="undefined"&&Object.prototype.toString.call(process)==="[object process]"){adapter=rq(234)}return adapter}var defaults={adapter:getDefaultAdapter(),transformRequest:[function transformRequest(data,headers){normalizeHeaderName(headers,"Accept");normalizeHeaderName(headers,"Content-Type");if(utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)){return data}if(utils.isArrayBufferView(data)){return data.buffer}if(utils.isURLSearchParams(data)){setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8");return data.toString()}if(utils.isObject(data)){setContentTypeIfUnset(headers,"application/json;charset=utf-8");return JSON.stringify(data)}return data}],transformResponse:[function transformResponse(data){if(typeof data==="string"){try{data=JSON.parse(data)}catch(e){}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(status){return status>=200&&status<300}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}};utils.forEach(["delete","get","head"],(function forEachMethodNoData(method){defaults.headers[method]={}}));utils.forEach(["post","put","patch"],(function forEachMethodwData(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)}));mdl.xp=defaults}).call(this)}).call(this,rq("_process"))},{234:124,233:124,232:146,209:149,_process:274}],139:[function(rq,mdl,xp){"use strict";mdl.xp=function bind(fn,thisArg){return function wrap(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}return fn.apply(thisArg,args)}}},{}],140:[function(rq,mdl,xp){"use strict";var utils=rq(201);function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}mdl.xp=function buildURL(url,params,paramsSerializer){if(!params){return url}var serializedParams;if(paramsSerializer){serializedParams=paramsSerializer(params)}else if(utils.isURLSearchParams(params)){serializedParams=params.toString()}else{var parts=[];utils.forEach(params,(function serialize(val,key){if(val===null||typeof val==="undefined"){return}if(utils.isArray(val)){key=key+"[]"}else{val=[val]}utils.forEach(val,(function parseValue(v){if(utils.isDate(v)){v=v.toISOString()}else if(utils.isObject(v)){v=JSON.stringify(v)}parts.push(encode(key)+"="+encode(v))}))}));serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");if(hashmarkIndex!==-1){url=url.slice(0,hashmarkIndex)}url+=(url.indexOf("?")===-1?"?":"&")+serializedParams}return url}},{201:149}],141:[function(rq,mdl,xp){"use strict";mdl.xp=function combineURLs(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},{}],142:[function(rq,mdl,xp){"use strict";var utils=rq(201);mdl.xp=utils.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value));if(utils.isNumber(expires)){cookie.push("expires="+new Date(expires).toGMTString())}if(utils.isString(path)){cookie.push("path="+path)}if(utils.isString(domain)){cookie.push("domain="+domain)}if(secure===true){cookie.push("secure")}document.cookie=cookie.join("; ")},read:function read(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function remove(name){this.write(name,"",Date.now()-864e5)}}}():function nonStandardBrowserEnv(){return{write:function write(){},read:function read(){return null},remove:function remove(){}}}()},{201:149}],143:[function(rq,mdl,xp){"use strict";mdl.xp=function isAbsoluteURL(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},{}],144:[function(rq,mdl,xp){"use strict";mdl.xp=function isAxiosError(payload){return _typeof(payload)==="object"&&payload.isAxiosError===true}},{}],145:[function(rq,mdl,xp){"use strict";var utils=rq(201);mdl.xp=utils.isStandardBrowserEnv()?function standardBrowserEnv(){var msie=/(msie|trident)/i.test(navigator.userAgent);var urlParsingNode=document.createElement("a");var originURL;function resolveURL(url){var href=url;if(msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href}urlParsingNode.setAttribute("href",href);return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:urlParsingNode.pathname.charAt(0)==="/"?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}originURL=resolveURL(window.location.href);return function isURLSameOrigin(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function nonStandardBrowserEnv(){return function isURLSameOrigin(){return true}}()},{201:149}],146:[function(rq,mdl,xp){"use strict";var utils=rq(230);mdl.xp=function normalizeHeaderName(headers,normalizedName){utils.forEach(headers,(function processHeader(value,name){if(name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()){headers[normalizedName]=value;delete headers[name]}}))}},{230:149}],147:[function(rq,mdl,xp){"use strict";var utils=rq(201);var ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];mdl.xp=function parseHeaders(headers){var parsed={};var key;var val;var i;if(!headers){return parsed}utils.forEach(headers.split("\n"),(function parser(line){i=line.indexOf(":");key=utils.trim(line.substr(0,i)).toLowerCase();val=utils.trim(line.substr(i+1));if(key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0){return}if(key==="set-cookie"){parsed[key]=(parsed[key]?parsed[key]:[]).concat([val])}else{parsed[key]=parsed[key]?parsed[key]+", "+val:val}}}));return parsed}},{201:149}],148:[function(rq,mdl,xp){"use strict";mdl.xp=function spread(callback){return function wrap(arr){return callback.apply(null,arr)}}},{}],149:[function(rq,mdl,xp){"use strict";var bind=rq(210);var toString=Object.prototype.toString;function isArray(val){return toString.call(val)==="[object Array]"}function isUndefined(val){return typeof val==="undefined"}function isBuffer(val){return val!==null&&!isUndefined(val)&&val.constructor!==null&&!isUndefined(val.constructor)&&typeof val.constructor.isBuffer==="function"&&val.constructor.isBuffer(val)}function isArrayBuffer(val){return toString.call(val)==="[object ArrayBuffer]"}function isFormData(val){return typeof FormData!=="undefined"&&val instanceof FormData}function isArrayBufferView(val){var result;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){result=ArrayBuffer.isView(val)}else{result=val&&val.buffer&&val.buffer instanceof ArrayBuffer}return result}function isString(val){return typeof val==="string"}function isNumber(val){return typeof val==="number"}function isObject(val){return val!==null&&_typeof(val)==="object"}function isPlainObject(val){if(toString.call(val)!=="[object Object]"){return false}var prototype=Object.getPrototypeOf(val);return prototype===null||prototype===Object.prototype}function isDate(val){return toString.call(val)==="[object Date]"}function isFile(val){return toString.call(val)==="[object File]"}function isBlob(val){return toString.call(val)==="[object Blob]"}function isFunction(val){return toString.call(val)==="[object Function]"}function isStream(val){return isObject(val)&&isFunction(val.pipe)}function isURLSearchParams(val){return typeof URLSearchParams!=="undefined"&&val instanceof URLSearchParams}function trim(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){if(typeof navigator!=="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")){return false}return typeof window!=="undefined"&&typeof document!=="undefined"}function forEach(obj,fn){if(obj===null||typeof obj==="undefined"){return}if(_typeof(obj)!=="object"){obj=[obj]}if(isArray(obj)){for(var i=0,l=obj.length;i<l;i++){fn.call(null,obj[i],i,obj)}}else{for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){fn.call(null,obj[key],key,obj)}}}}function merge(){var result={};function assignValue(val,key){if(isPlainObject(result[key])&&isPlainObject(val)){result[key]=merge(result[key],val)}else if(isPlainObject(val)){result[key]=merge({},val)}else if(isArray(val)){result[key]=val.slice()}else{result[key]=val}}for(var i=0,l=arguments.length;i<l;i++){forEach(arguments[i],assignValue)}return result}function extend(a,b,thisArg){forEach(b,(function assignValue(val,key){if(thisArg&&typeof val==="function"){a[key]=bind(val,thisArg)}else{a[key]=val}}));return a}function stripBOM(content){if(content.charCodeAt(0)===65279){content=content.slice(1)}return content}mdl.xp={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM}},{210:139}],150:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={SERVICE_S:rq(235),SERVICE_STATE:rq(236),Serviceb_:rq(237),ServicesManager:rq(238)}},{237:151,235:152,236:153,238:154}],151:[function(rq,mdl,xp){"use strict";var _rq176=rq(13),LOG=_rq176.LOG;var _rq177=rq(14),SingletonEx=_rq177.SingletonEx,DelayedCall=_rq177.DelayedCall;var ServicesManager=rq(239);var Serviceb_=function(_SingletonEx6){_inherits(Serviceb_,_SingletonEx6);var _super73=_createSuper(Serviceb_);function Serviceb_(){_cCC(this,Serviceb_);return _super73.call(this)}_cC(Serviceb_,[{key:"_In",value:function _In(){_get(_gPO(Serviceb_.prototype),"_In",this).call(this);this._initialized=false;this._started=false;this._running=false;this._tick=new DelayedCall(this._Bind(this._Tick))}},{key:"Inialize",value:function Inialize(){if(this._initialized){return}ServicesManager.instance.Register(this);this._initialized=true}},{key:"InializeAndStart",value:function InializeAndStart(){this.Inialize();this.Start()}},{key:"started",get:function get(){return this._started}},{key:"running",get:function get(){return this._running}},{key:"Start",value:function Start(){if(!this._initialized){console.error("Attempting to start a service (".concat(this.constructor.name,") that hasn't been initialized yet."));return false}if(this._started){return false}this._started=true;LOG._("STARTED :· ".concat(this.constructor.name),"#add800","#2e3a00");return true}},{key:"Stop",value:function Stop(){if(!this._started){return}this._started=false;LOG._("STOPPED :: ".concat(this.constructor.name),"#ef8700","#492900")}},{key:"Restart",value:function Restart(){}},{key:"_Tick",value:function _Tick(p_delta){}}]);return Serviceb_}(SingletonEx);mdl.xp["default"]=mdl.xp=Serviceb_},{239:154,14:27,13:268}],152:[function(rq,mdl,xp){"use strict";var SERVICE_STATE=rq(240);var SERVICE_S=function(){function SERVICE_S(){_cCC(this,SERVICE_S)}_cC(SERVICE_S,null,[{key:"UNINITIALIZED",get:function get(){return SERVICE_STATE.UNINITIALIZED}},{key:"INITIALIZING",get:function get(){return SERVICE_STATE.INITIALIZING}},{key:"INITIALIZED",get:function get(){return SERVICE_STATE.INITIALIZED}},{key:"STARTING",get:function get(){return SERVICE_STATE.STARTING}},{key:"STARTED",get:function get(){return SERVICE_STATE.STARTED}},{key:"STOPPING",get:function get(){return SERVICE_STATE.STOPPING}},{key:"STOPPED",get:function get(){return SERVICE_STATE.STOPPED}}]);return SERVICE_S}();mdl.xp["default"]=mdl.xp=SERVICE_S},{240:153}],153:[function(rq,mdl,xp){"use strict";var _rq178=rq(14),Stateb_=_rq178.Stateb_;var SERVICE_STATE=function(_Stateb_2){_inherits(SERVICE_STATE,_Stateb_2);var _super74=_createSuper(SERVICE_STATE);function SERVICE_STATE(){_cCC(this,SERVICE_STATE);return _super74.call(this)}_cC(SERVICE_STATE,null,[{key:"UNINITIALIZED",get:function get(){return SERVICE_STATE.GOrCreate("uninitialized")}},{key:"INITIALIZING",get:function get(){return SERVICE_STATE.GOrCreate("initializing")}},{key:"INITIALIZED",get:function get(){return SERVICE_STATE.GOrCreate("initialized")}},{key:"STARTING",get:function get(){return SERVICE_STATE.GOrCreate("starting")}},{key:"STARTED",get:function get(){return SERVICE_STATE.GOrCreate("started")}},{key:"STOPPING",get:function get(){return SERVICE_STATE.GOrCreate("stopping")}},{key:"STOPPED",get:function get(){return SERVICE_STATE.GOrCreate("stopped")}}]);return SERVICE_STATE}(Stateb_);mdl.xp["default"]=mdl.xp=SERVICE_STATE},{14:27}],154:[function(rq,mdl,xp){"use strict";var _rq179=rq(18),List=_rq179.List;var _rq180=rq(14),TIME=_rq180.TIME,SingletonEx=_rq180.SingletonEx;var ServicesManager=function(_SingletonEx7){_inherits(ServicesManager,_SingletonEx7);var _super75=_createSuper(ServicesManager);function ServicesManager(){_cCC(this,ServicesManager);return _super75.call(this)}_cC(ServicesManager,[{key:"_In",value:function _In(){_get(_gPO(ServicesManager.prototype),"_In",this).call(this);this._services=new List}},{key:"_pIn",value:function _pIn(){_get(_gPO(ServicesManager.prototype),"_pIn",this).call(this)}},{key:"Boot",value:function Boot(){}},{key:"Register",value:function Register(p_instance){this._services.A(p_instance.constructor)}}]);return ServicesManager}(SingletonEx);mdl.xp["default"]=mdl.xp=ServicesManager},{18:21,14:27}],155:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={FONT_FLAG:rq(241),Colorb_:rq(242),RGBA:rq(243),HSLA:rq(244),COLOR:rq(245),CSS:rq(246),STYLE:rq(247),Palette:rq(248),PaletteBuilder:rq(249)}},{245:157,242:156,244:158,243:159,246:160,241:162,248:164,249:163,247:165}],156:[function(rq,mdl,xp){"use strict";var Colorb_=function Colorb_(){_cCC(this,Colorb_)};mdl.xp["default"]=mdl.xp=Colorb_},{}],157:[function(rq,mdl,xp){"use strict";var _rq181=rq(13),U=_rq181.U;var _HSLA=rq(250);var _RGBA=rq(251);var COLOR=function(){function COLOR(){_cCC(this,COLOR)}_cC(COLOR,null,[{key:"HSLA",value:function HSLA(){var h=arguments.length>0&&arguments[0]!==undefined?arguments[0]:360;var s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return new _HSLA(h,s,l,a)}},{key:"RGBA",value:function RGBA(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:255;var g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:255;var b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:255;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return new _RGBA(r,g,b,a)}},{key:"RGBAtoHSLA",value:function RGBAtoHSLA(p_rgba){var r=p_rgba.r,g=p_rgba.g,b=p_rgba.b,cmin=Math.min(r,g,b),cmax=Math.max(r,g,b),delta=cmax-cmin,h=0,s=0,l=0;if(delta===0){h=0}else if(cmax===r){h=(g-b)/delta%6}else if(cmax===g){h=(b-r)/delta+2}else{h=(r-g)/delta+4}h=Math.round(h*60);if(h<0){h+=360}l=(cmax+cmin)/2;s=delta===0?0:delta/(1-Math.abs(2*l-1));s=+(s*100).toFixed(1);l=+(l*100).toFixed(1);return new _HSLA(h,s,l,p_rgba.a)}},{key:"HSLAtoRGBA",value:function HSLAtoRGBA(p_hsla){var h=p_hsla.h,s=p_hsla.s,l=p_hsla.l,c=(1-Math.abs(2*l-1))*s,x=c*(1-Math.abs(h/60%2-1)),m=l-c/2,r=0,g=0,b=0;if(0<=h&&h<60){r=c;g=x;b=0}else if(60<=h&&h<120){r=x;g=c;b=0}else if(120<=h&&h<180){r=0;g=c;b=x}else if(180<=h&&h<240){r=0;g=x;b=c}else if(240<=h&&h<300){r=x;g=0;b=c}else if(300<=h&&h<360){r=c;g=0;b=x}r=Math.round((r+m)*255);g=Math.round((g+m)*255);b=Math.round((b+m)*255);return new _RGBA(r,g,b,p_hsla.a)}}]);return COLOR}();mdl.xp["default"]=mdl.xp=COLOR},{250:158,251:159,13:268}],158:[function(rq,mdl,xp){"use strict";var Colorb_=rq(252);var HSLA=function(_Colorb_){_inherits(HSLA,_Colorb_);var _super76=_createSuper(HSLA);function HSLA(){var _this7;var p_h=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var p_s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var p_l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var p_a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;_cCC(this,HSLA);_this7=_super76.call(this);_this7._H=p_h;_this7._S=p_s;_this7._L=p_l;_this7._a=p_a;return _this7}_cC(HSLA,[{key:"S",value:function S(){var p_h=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var p_s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var p_l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var p_a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;this._H=p_h;this._S=p_s;this._L=p_l;this._a=p_a;return this}},{key:"H",get:function get(){return this._H},set:function set(v){this._H=v}},{key:"h",get:function get(){return this._H/360},set:function set(v){this._H=v*360}},{key:"S",get:function get(){return this._S},set:function set(v){this._S=v}},{key:"s",get:function get(){return this._S/100},set:function set(v){this._S=v*100}},{key:"L",get:function get(){return this._L},set:function set(v){this._L=v}},{key:"l",get:function get(){return this._L/100},set:function set(v){this._L=v*100}},{key:"A",get:function get(){return this._a*255},set:function set(v){this._a=v/255}},{key:"a",get:function get(){return this._a},set:function set(v){this._a=v}},{key:"hsl",get:function get(){return"hsl(".concat(this._H,",").concat(this._S,"%,").concat(this._L,"%)")}},{key:"hsla",get:function get(){return"hsla(".concat(this._H,",").concat(this._S,"%,").concat(this._L,"%,").concat(this._a,")")}},{key:"toString",value:function toString(){return this.hsla}}],[{key:"hex",value:function hex(p_hex){var color=new HSLA;color.hex=p_hex;return color}},{key:"G",value:function G(){var p_h=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var p_s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var p_l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var p_a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var color=new HSLA;color.R=p_h;color.G=p_s;color.B=p_l;color.a=p_a;return color}}]);return HSLA}(Colorb_);mdl.xp["default"]=mdl.xp=HSLA},{252:156}],159:[function(rq,mdl,xp){"use strict";var Colorb_=rq(252);var RGBA=function(_Colorb_2){_inherits(RGBA,_Colorb_2);var _super77=_createSuper(RGBA);function RGBA(){var _this8;var p_r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var p_g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var p_b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var p_a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;_cCC(this,RGBA);_this8=_super77.call(this);_this8._R=p_r;_this8._G=p_g;_this8._B=p_b;_this8._a=p_a;return _this8}_cC(RGBA,[{key:"S",value:function S(){var p_r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var p_g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var p_b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var p_a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;this._R=p_r;this._G=p_g;this._B=p_b;this._a=p_a;return this}},{key:"R",get:function get(){return this._R},set:function set(v){this._R=v}},{key:"r",get:function get(){return this._R/255},set:function set(v){this._R=v*255}},{key:"G",get:function get(){return this._G},set:function set(v){this._G=v}},{key:"g",get:function get(){return this._G/255},set:function set(v){this._G=v*255}},{key:"B",get:function get(){return this._B},set:function set(v){this._B=v}},{key:"b",get:function get(){return this._B/255},set:function set(v){this._B=v*255}},{key:"A",get:function get(){return this._a*255},set:function set(v){this._a=v/255}},{key:"a",get:function get(){return this._a},set:function set(v){this._a=v}},{key:"hex",get:function get(){var p_r=this._R.toString(16);p_r=p_r.length===1?"0"+p_r:p_r;var p_g=this._G.toString(16);p_g=p_g.length===1?"0"+p_g:p_g;var p_b=this._B.toString(16);p_b=p_b.length===1?"0"+p_b:p_b;return"#".concat(p_r).concat(p_g).concat(p_b)},set:function set(v){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v);if(result){this._R=parseInt(result[1],16);this._G=parseInt(result[2],16);this._B=parseInt(result[3],16)}else{this._R=0;this._G=0;this._B=0}}},{key:"hexa",get:function get(){var p_r=this._R.toString(16);p_r=p_r.length===1?"0"+p_r:p_r;var p_g=this._G.toString(16);p_g=p_g.length===1?"0"+p_g:p_g;var p_b=this._B.toString(16);p_b=p_b.length===1?"0"+p_b:p_b;var p_a=this.A.toString(16);p_a=p_a.length===1?"0"+p_a:p_a;return"#".concat(p_r).concat(p_g).concat(p_b).concat(p_a)},set:function set(v){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v);if(result){this._R=parseInt(result[1],16);this._G=parseInt(result[2],16);this._B=parseInt(result[3],16);this._a=parseInt(result[4],16)/255}else{this._R=0;this._G=0;this._B=0;this._a=0}}},{key:"rgb",get:function get(){return"rgb(".concat(this._R,",").concat(this._G,",").concat(this._B,")")}},{key:"rgba",get:function get(){return"rgba(".concat(this._R,",").concat(this._G,",").concat(this._B,",").concat(this._a,")")}},{key:"toString",value:function toString(){return this.rgba}}],[{key:"hex",value:function hex(p_hex){var color=new RGBA;color.hex=p_hex;return color}},{key:"G",value:function G(){var p_r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var p_g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var p_b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var p_a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var color=new RGBA;color.R=p_r;color.G=p_g;color.B=p_b;color.a=p_a;return color}}]);return RGBA}(Colorb_);mdl.xp["default"]=mdl.xp=RGBA},{252:156}],160:[function(rq,mdl,xp){"use strict";var _rq182=rq(13),U=_rq182.U,UDOM=_rq182.UDOM;var _rq183=rq(14),Singleton=_rq183.Singleton;var __media="@media ";var _CSS=function(_Singleton3){_inherits(CSS,_Singleton3);var _super78=_createSuper(CSS);function CSS(){_cCC(this,CSS);return _super78.call(this)}_cC(CSS,null,[{key:"CSSImport",value:function CSSImport(p_import_path){var element=UDOM.New("style",{type:"text/css"});element.innerText='@import url("'.concat(p_import_path,'")');return element}},{key:"Style",value:function Style(p_properties){var element=UDOM.New("style");var css=null;if(U.IsString(p_properties)){css=p_properties}else{css="";if(p_properties!=null&&p_properties!=undefined){for(var att in p_properties){css+=_CSS.CSS(att,p_properties[att])}}}element.innerText=css;return element}},{key:"CSS",value:function CSS(p_id,p_properties){if(!U.isObject(p_properties)){return""}if(p_id.indexOf(__media)===0){var css="";for(var p in p_properties){css+=_CSS.CSS(p,p_properties[p])}return"".concat(p_id,"{").concat(css,"}")}else{return"".concat(p_id,"{").concat(_CSS.InlineCSS(p_properties),"}")}}},{key:"InlineCSS",value:function InlineCSS(p_properties){if(!U.isObject(p_properties)){return""}var css="";if(p_properties!=null&&p_properties!=undefined){for(var att in p_properties){css+="".concat(att,":").concat(p_properties[att],";")}}return css}},{key:"Merge",value:function Merge(p_base,p_source){if(!p_base){return JSON.parse(JSON.stringify(p_source))}for(var name in p_source){var baseValue=p_base[name],sourceValue=p_source[name];if(name in p_base){if(U.isArray(sourceValue)){if(sourceValue[0]===null){var arrCopy=_toConsumableArray(sourceValue);arrCopy.unshift();p_base[name]=arrCopy}else{if(U.isArray(baseValue)){for(var i=0,n=sourceValue.length;i<n;i++){var itemValue=sourceValue[i];if(!baseValue.includes(itemValue)){baseValue.push(itemValue)}}}else{p_base[name]=_toConsumableArray(sourceValue)}}}else if(U.isObject(sourceValue)){this.Merge(baseValue,sourceValue)}else{p_base[name]=sourceValue}}else{if(U.isArray(sourceValue)){p_base[name]=_toConsumableArray(sourceValue)}else if(U.isObject(sourceValue)){p_base[name]=JSON.parse(JSON.stringify(sourceValue))}else{p_base[name]=sourceValue}}}return p_base}},{key:"Compose",value:function Compose(p_base,p_source){if(!p_base){return JSON.parse(JSON.stringify(p_source))}for(var name in p_source){var baseValue=p_base[name],sourceValue=p_source[name];if(name in p_base){if(U.isArray(sourceValue)){if(U.isArray(baseValue)){if(baseValue[0]===null){continue}for(var i=0,n=sourceValue.length;i<n;i++){var itemValue=sourceValue[i];if(!baseValue.includes(itemValue)){baseValue.unshift(itemValue)}}}}else if(U.isObject(sourceValue)){this.Compose(baseValue,sourceValue)}else{p_base[name]=sourceValue}}else{if(U.isArray(sourceValue)){p_base[name]=_toConsumableArray(sourceValue)}else if(U.isObject(sourceValue)){p_base[name]=JSON.parse(JSON.stringify(sourceValue))}else{p_base[name]=sourceValue}}}return p_base}},{key:"Extends",value:function Extends(p_base,p_source){if(!p_base){return JSON.parse(JSON.stringify(p_source))}for(var name in p_source){var baseValue=p_base[name],sourceValue=p_source[name];if(name in p_base){if(U.isArray(sourceValue)){if(U.isArray(baseValue)){if(baseValue[0]===null){continue}for(var i=0,n=sourceValue.length;i<n;i++){var itemValue=sourceValue[i];if(!baseValue.includes(itemValue)){baseValue.unshift(itemValue)}}}}else if(U.isObject(sourceValue)){this.Extends(baseValue,sourceValue)}}else{if(U.isArray(sourceValue)){p_base[name]=_toConsumableArray(sourceValue)}else if(U.isObject(sourceValue)){p_base[name]=JSON.parse(JSON.stringify(sourceValue))}else{p_base[name]=sourceValue}}}return p_base}}]);return CSS}(Singleton);mdl.xp["default"]=mdl.xp=_CSS},{14:27,13:268}],161:[function(rq,mdl,xp){"use strict";var _rq184=rq(14),COMMON_FLAG=_rq184.COMMON_FLAG;var COLOR=rq(253);var PaletteBuilder=rq(254);var DefaultStylesheet=function(_PaletteBuilder){_inherits(DefaultStylesheet,_PaletteBuilder);var _super79=_createSuper(DefaultStylesheet);function DefaultStylesheet(){_cCC(this,DefaultStylesheet);return _super79.call(this)}_cC(DefaultStylesheet,[{key:"Build",value:function Build(palette){var defaultColors={};defaultColors[COMMON_FLAG.INFOS]=COLOR.RGBA(102,175,204);defaultColors[COMMON_FLAG.WARNING]=COLOR.RGBA(255,206,0);defaultColors[COMMON_FLAG.ERROR]=COLOR.RGBA(226,5,0);defaultColors[COMMON_FLAG.READY]=COLOR.RGBA(120,164,0);defaultColors[COMMON_FLAG.DIRTY]=COLOR.RGBA(164,100,0);defaultColors[COMMON_FLAG.LOADING]=COLOR.RGBA(102,119,204);defaultColors[COMMON_FLAG.PROCESSING]=COLOR.RGBA(102,119,204);defaultColors[COMMON_FLAG.WAITING]=COLOR.RGBA(102,119,204);defaultColors[COMMON_FLAG.ACTIVE]=COLOR.RGBA(62,193,136);palette.AColors(defaultColors);palette.ADocumentRulesets({"html, body":{margin:0,padding:0,"font-family":"'Regular', sans-serif","font-size":"0.85rem","font-weight":400,"line-height":1.5,color:"#dedede","text-align":"left","background-color":"#1e1e1e",overflow:"hidden"}});palette.AVariables({"margin-medium":"10px","padding-medium":"5px","scroll-size-small":"2px","scroll-size":"4px","color-warning":COLOR.RGBA().rgba,"size-xs":"16px","size-s":"24px","size-m":"32px","size-l":"50px","size-xl":"108px"});palette.ASuffixes({"small-scroll":{"::-webkit-scrollbar-track":{"background-color":"|color-warning|"},"::-webkit-scrollbar":{width:"|scroll-size-small|",height:"|scroll-size-small|","background-color":"|color-warning|"},"::-webkit-scrollbar-thumb":{"background-color":"|color-warning|"},":hover::-webkit-scrollbar":{width:"|scroll-size|",height:"|scroll-size|"},":hover::-webkit-scrollbar-thumb":{"background-color":"|color-warning|"}}});palette.ASuffixes({"interactive-shadow":{"":{filter:"drop-shadow(0px 2px 1px rgba(0,0,0,0.1))"},"(.focused)":{cursor:"pointer","z-index":99999,filter:"drop-shadow(0px 2px 5px rgba(0,0,0,1))"},"(.selected)":{filter:"drop-shadow(0px 2px 2px rgba(0,0,0,0.2))"},"(.selected.focused)":{filter:"drop-shadow(0px 2px 5px rgba(0,0,0,1))"},"(.disabled)":{}},"interactive-area":{"":{"background-color":"#000","border-radius":"5px"},"(.selected)":{},"(.selected.focused)":{},"(.disabled)":{}}});palette.ARulesets({h4:{"margin-block-start":0,"margin-block-end":0}});palette.AProperties({layer:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","box-sizing":"border-box"},"invisible-fill":{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","box-sizing":"border-box",opacity:"0"},cover:{"background-size":"cover","background-position":"center"}});palette.AProperties({"icon-small":{width:"20px",height:"20px","@":["cover"]}});palette.AProperties({"drop-shadow":{filter:"drop-shadow(0px 5px 5px rgba(0,0,0,0.2))"}})}}]);return DefaultStylesheet}(PaletteBuilder);mdl.xp["default"]=mdl.xp=DefaultStylesheet},{253:157,254:163,14:27}],162:[function(rq,mdl,xp){"use strict";var FONT_FLAG=function FONT_FLAG(){_cCC(this,FONT_FLAG)};_defineProperty(FONT_FLAG,"TITLE","title");_defineProperty(FONT_FLAG,"LABEL","label");_defineProperty(FONT_FLAG,"TEXT","text");_defineProperty(FONT_FLAG,"TAG","font-tag");_defineProperty(FONT_FLAG,"SMALL","font-small");_defineProperty(FONT_FLAG,"MEDIUM","font-medium");_defineProperty(FONT_FLAG,"LARGE","font-large");_defineProperty(FONT_FLAG,"XLARGE","font-xlarge");mdl.xp["default"]=mdl.xp=FONT_FLAG},{}],163:[function(rq,mdl,xp){"use strict";var PaletteBuilder=function(){function PaletteBuilder(){_cCC(this,PaletteBuilder)}_cC(PaletteBuilder,[{key:"Build",value:function Build(palette){}}]);return PaletteBuilder}();mdl.xp["default"]=mdl.xp=PaletteBuilder},{}],164:[function(rq,mdl,xp){"use strict";var _rq185=rq(13),U=_rq185.U,PATH=_rq185.PATH,UDOM=_rq185.UDOM;var _rq186=rq(18),Dictionary=_rq186.Dictionary;var _rq187=rq(14),NFOS=_rq187.NFOS,__dO=_rq187.__dO;var CSS=rq(255);var __DELIM_KVP="|";var __REF="@";var Palette=function(___dO6){_inherits(Palette,___dO6);var _super80=_createSuper(Palette);function Palette(){_cCC(this,Palette);return _super80.call(this)}_cC(Palette,[{key:"_In",value:function _In(){_get(_gPO(Palette.prototype),"_In",this).call(this);this._STYLE=null;this._fonts={};this._colors={};this._variables={};this._rulesets={};this._suffixes={};this._properties={};this._documentRulesets={};this._externalCSSMap={};this._themeId="default";this._cache=new Dictionary}},{key:"InFrom",value:function InFrom(p_palette){this._fonts=JSON.parse(JSON.stringify(p_palette._fonts));this._colors=CSS.Merge(this._colors,p_palette._colors);this._variables=JSON.parse(JSON.stringify(p_palette._variables));this._rulesets=JSON.parse(JSON.stringify(p_palette._rulesets));this._suffixes=JSON.parse(JSON.stringify(p_palette._suffixes));this._properties=JSON.parse(JSON.stringify(p_palette._properties));this._documentRulesets=JSON.parse(JSON.stringify(p_palette._documentRulesets));this._externalCSSMap=JSON.parse(JSON.stringify(p_palette._externalCSSMap))}},{key:"ACSSLink",value:function ACSSLink(p_key,p_path){this._externalCSSMap[p_key]=p_path}},{key:"GCSSLink",value:function GCSSLink(p_key){if(p_key in this._externalCSSMap){p_key=this._externalCSSMap[p_key]}if(p_key[0]===__REF){p_key="./css/themes/".concat(this._themeId).concat(p_key.substring(1))}else{p_key=PATH.FULL(p_key)}return p_key}},{key:"AFontFace",value:function AFontFace(p_family,p_url){this._fonts[p_family]=PATH.FULL(p_url)}},{key:"AColors",value:function AColors(p_colors){for(var name in p_colors){var color=p_colors[name];this._colors[name]=color;this._variables["".concat(__DELIM_KVP).concat(name).concat(__DELIM_KVP)]=color}}},{key:"ADocumentRulesets",value:function ADocumentRulesets(p_ruleSs){}},{key:"AVariables",value:function AVariables(p_vars){for(var name in p_vars){this._variables["".concat(__DELIM_KVP).concat(name).concat(__DELIM_KVP)]=p_vars[name]}}},{key:"ASuffixes",value:function ASuffixes(p_suffixes){this._suffixes=CSS.Merge(this._suffixes,p_suffixes)}},{key:"AProperties",value:function AProperties(p_properties){this._properties=CSS.Merge(this._properties,p_properties)}},{key:"ARulesets",value:function ARulesets(p_rulesets){for(var el in p_rulesets){this.ASingleRuleset(el,p_rulesets[el])}}},{key:"ASingleRuleset",value:function ASingleRuleset(p_el,p_ruleS){var g=this._rulesets;if(p_el in g){g[p_el]=CSS.Merge(g[p_el],p_ruleS)}else{g[p_el]=p_ruleS}}},{key:"G",value:function G(p_class,p_generator){var p_invalidateCache=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var style=this._cache.G(p_class);if(!U.isVoid(style)&&!p_invalidateCache){return style}if(style){style.length=0}else{style=new Array(0)}var nfos=NFOS.G(p_class);if(nfos){if(nfos.css){for(var i=nfos.css.length-1;i>=0;i--){style.push(UDOM.New("link",{href:this.GCSSLink(nfos.css[i]),rel:"stylesheet"}))}}if(nfos.ignoreLocal){this._cache.S(p_class,style);return style}}var styleObject=p_generator();if(!U.isEmpty(styleObject)){if(!U.isObject(styleObject)){throw new Error("Generator must return an object.")}var styleString="";for(var el in styleObject){this._PSuffixes(el,styleObject[el],styleObject)}for(var _el in styleObject){styleString+=CSS.CSS(_el,this._PSingleRuleset(_el,styleObject[_el]))}var styleElement=UDOM.New("style");styleElement.innerText=styleString;style.push(styleElement)}this._cache.S(p_class,style);return style}},{key:"_PSuffixes",value:function _PSuffixes(p_el,p_ruleset,p_parent){var refCandidate=p_el[0]===__REF;if(!U.isArray(p_ruleset)){if(refCandidate&&U.isObject(p_ruleset)){if(p_el.indexOf("@media")===0||p_el.indexOf("@supports")===0){for(var el in p_ruleset){this._PSuffixes(el,p_ruleset[el],p_ruleset)}}}return}if(!refCandidate||!U.isArray(p_ruleset)){return}var prefix=p_el.substr(1,p_el.length-1);for(var i=0,n=p_ruleset.length;i<n;i++){var kitName=p_ruleset[i];if(!(kitName in this._suffixes)){continue}var kit=this._suffixes[kitName],id=void 0,kitRuleset=void 0;for(var k in kit){id="".concat(prefix).concat(k);kitRuleset=kit[k];if(id in p_parent){p_parent[id]=CSS.Compose(p_parent[id],kitRuleset)}else{p_parent[id]=CSS.Compose(null,kitRuleset)}}}delete p_parent[p_el]}},{key:"_PSingleRuleset",value:function _PSingleRuleset(p_el,p_ruleset){var isObject=U.isObject(p_ruleset);if(p_el[0]===__REF&&isObject){if(p_el.indexOf("@media")===0||p_el.indexOf("@supports")===0){for(var el in p_ruleset){this._PSingleRuleset(el,p_ruleset[el])}console.log(p_ruleset);return p_ruleset}}var g=this._rulesets,isGlobal=p_el in g;if(isObject){if(isGlobal){CSS.Compose(p_ruleset,g[p_el])}if(__REF in p_ruleset){var propGroup=p_ruleset[__REF];for(var i=0,n=propGroup.length;i<n;i++){var groupName=propGroup[i];if(groupName===null){continue}if(groupName in this._properties){CSS.Compose(p_ruleset,this._properties[groupName])}else{throw new Error("".concat(groupName," is not a valid property kit"))}}delete p_ruleset[__REF]}}else if(isGlobal){p_ruleset=CSS.Compose(null,g[p_el]);isObject=true}else{p_ruleset=""}if(isObject){for(var r in p_ruleset){var rule=p_ruleset[r];if(U.isString(rule)&&rule.includes(__DELIM_KVP)){p_ruleset[r]=this._ReplaceVars(rule)}}}return p_ruleset}},{key:"_ReplaceVars",value:function _ReplaceVars(p_str){for(var name in this._variables){p_str=p_str.replace(name,this._variables[name])}return p_str}}]);return Palette}(__dO);mdl.xp["default"]=mdl.xp=Palette},{255:160,18:21,14:27,13:268}],165:[function(rq,mdl,xp){"use strict";var _rq188=rq(13),U=_rq188.U,UDOM=_rq188.UDOM;var _rq189=rq(14),Singleton=_rq189.Singleton,POOL=_rq189.POOL,COMMON_FLAG=_rq189.COMMON_FLAG;var Colorb_=rq(256);var COLOR=rq(253);var Palette=rq(257);var CSS=rq(255);var DefaultStylesheet=rq(258);var STYLE=function(_Singleton4){_inherits(STYLE,_Singleton4);var _super81=_createSuper(STYLE);function STYLE(){_cCC(this,STYLE);return _super81.call(this)}_cC(STYLE,[{key:"_In",value:function _In(){_get(_gPO(STYLE.prototype),"_In",this).call(this);this._defaultPalette=POOL.Rt(Palette);this._defaultPalette._STYLE=this;this._current=this._defaultPalette;this._headerStyle=null;this._cssPaths={};this._InDefaults()}},{key:"_InDefaults",value:function _InDefaults(){var cssBuilder=new DefaultStylesheet;cssBuilder.Build(this._defaultPalette)}},{key:"defaultPalette",get:function get(){return this._defaultPalette}},{key:"current",get:function get(){return this._current},set:function set(v){if(v===null){v=this._defaultPalette}this._current=v}}],[{key:"CreatePalette",value:function CreatePalette(){var p_initwDefaults=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var p_makeCurrent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var newPalette=POOL.Rt(Palette);newPalette._STYLE=this;if(p_initwDefaults){newPalette.InFrom(this.instance.defaultPalette)}if(p_makeCurrent){this.instance.current=newPalette}return newPalette}},{key:"DeployCurrent",value:function DeployCurrent(){if(!this._isBrowser){return}var pal=this.instance.current;var css="";for(var f in pal._fonts){css+="@font-face { font-family: '".concat(f,"'; src: url('").concat(pal._fonts[f],"');}\n")}css+="\n";var styleObject=pal._documentRulesets,ruleset;for(var el in styleObject){pal._PSuffixes(el,styleObject[el],styleObject)}for(var _el2 in styleObject){css+=CSS.CSS(_el2,pal._PSingleRuleset(_el2,styleObject[_el2]))}var externalCSSRules=this.instance.current._externalCSSMap;for(var cssKey in externalCSSRules){this.instance.current.PrintCSSLink(cssKey,document.head)}if(U.isVoid(this._headerStyle)){this._headerStyle=document.createElement("style");this._headerStyle.innerText=css;UDOM.Attach(this._headerStyle,document.head)}else{this._headerStyle.innerText=css}}},{key:"G",value:function G(p_class,p_generator){var p_invalidateCache=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return this.instance.current.G(p_class,p_generator,p_invalidateCache)}},{key:"TF",value:function TF(p_text,p_format){var p_type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"span";p_text=p_format.strong?"<strong>".concat(p_text,"</strong>"):p_text;var css="";if(p_format.style){css=" style='".concat(CSS.InlineCSS(this.instance.current._PSingleRuleset("",p_format.style)),"' ")}else if(p_format.color){var color=p_format.color;if(U.isString(color)){if(color in this.instance.current._colors){color=this.instance.current._colors[color]}}css=" style='color:".concat(color,";' ")}var cl=p_format["class"]?" class='".concat(p_format["class"],"'"):"";return"<".concat(p_type).concat(cl).concat(css,">").concat(p_text,"</").concat(p_type,">")}}]);return STYLE}(Singleton);mdl.xp["default"]=mdl.xp=STYLE},{253:157,256:156,255:160,258:161,257:164,14:27,13:268}],166:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={US:rq(259),UF:rq(260),UI_ID:rq(261),UI:rq(262),INPUT:rq(263),M:rq(264),KB:rq(265),dHel:rq(266),dO:rq(267),dOC_:rq(268),W:rq(269),OrientableW:rq(270),CgW:rq(271),CgBuilder:rq(272),CgViewBuilder:rq(273),FlagBox:rq(274),FlagEnum:rq(275),WSelection:rq(276),Frame:rq(277),T_bar:rq(278),PopIn:rq(279),TreeItem:rq(280),TreeItemGroup:rq(281),TreeRoot:rq(282),View:rq(283),Layer:rq(284),LayerC_:rq(285),DrawerNav:rq(286),Drawer:rq(287),b_Manipulator:rq(288),ImageManipulator:rq(289),TextManipulator:rq(290),Extb_:rq(291),ExtDrag:rq(292),ExtDrop:rq(293),ExtExpand:rq(294),Extm:rq(295),ExtmMove:rq(296),Bb_:rq(297),T_B:rq(298),BEx:rq(299),BDragHandle:rq(300),DOMTemplate:rq(301),TPLFacadeLabel:rq(302),TPLFacadeTitles:rq(303),TPLHeaderBodyFooter:rq(304),TPLBodyExpand:rq(305),TPLBodyHeaderTitles:rq(306),TPLFacadeExpandLabel:rq(307),TPLFacadeExpandTitle:rq(308)}},{297:167,300:168,299:169,298:170,267:172,268:171,266:173,301:174,291:175,292:176,293:177,294:178,295:180,296:179,272:181,273:182,274:183,275:184,277:185,279:186,278:187,276:188,263:189,265:190,288:192,289:193,290:194,264:195,305:196,306:197,307:198,308:199,302:200,303:201,304:202,280:204,281:203,282:205,262:209,260:206,261:207,259:208,287:211,286:210,284:213,285:212,283:214,269:217,271:215,270:216}],167:[function(rq,mdl,xp){"use strict";var _rq190=rq(13),U=_rq190.U;var _rq191=rq(14),NFOS=_rq191.NFOS,S=_rq191.S,Observer=_rq191.Observer,OptionsHandler=_rq191.OptionsHandler;var _rq192=rq(25),Request=_rq192.Request;var _rq193=rq(25),Command=_rq193.Command;var UI=rq(309);var US=rq(310);var UF=rq(311);var W=rq(312);var FlagEnum=rq(313);var Bb_=function(_W){_inherits(Bb_,_W);var _super82=_createSuper(Bb_);function Bb_(){_cCC(this,Bb_);return _super82.call(this)}_cC(Bb_,[{key:"_In",value:function _In(){var _this9=this;_get(_gPO(Bb_.prototype),"_In",this).call(this);this._alwaysDisplayCommand=U.Default(this._alwaysDisplayCommand,false);this._command=null;this._isCommandTrigger=true;this._isCommandContext=true;this._isToggled=false;this._commandObserver=new Observer;this._commandObserver.H(S.UPDATED,this._OnCommandUd,this);this._flags.A(this,UF.TOGGLED);this._sizeEnum=new FlagEnum(UF.sizes);this._sizeEnum.A(this);this._flavorEnum=new FlagEnum(UF.flavors);this._flavorEnum.A(this);this._variantEnum=new FlagEnum(UF.variants);this._variantEnum.A(this);this._optionsHandler=new OptionsHandler(null,this._Bind(this._OnOptionsWillU));this._optionsHandler.H("data");this._optionsHandler.H("htitle");this._optionsHandler.H("trigger");this._optionsHandler.H("toggle");this._optionsHandler.H("request");this._optionsHandler.H("command");this._optionsHandler.H("isCommandTrigger");this._optionsHandler.H("isCommandContext");this._optionsHandler.H("alwaysVisible","alwaysDisplayCommand");this._optionsHandler.H("flagOn",(function(v){for(var i=0,n=v.length;i<n;i++){_this9._flags.S(v[i],true)}}));this._optionsHandler.H("flagOff",(function(v){for(var i=0,n=v.length;i<n;i++){_this9._flags.S(v[i],false)}}));this._optionsHandler.H("size",(function(v){_this9._sizeEnum.S(v)}));this._optionsHandler.H("flavor",(function(v){_this9._flavorEnum.S(v)}));this._optionsHandler.H("variant",(function(v){_this9._variantEnum.S(v)}))}},{key:"_pIn",value:function _pIn(){_get(_gPO(Bb_.prototype),"_pIn",this).call(this);this._sizeEnum.S(this.constructor.__default_size);this._flavorEnum.S(this.constructor.__default_flavor);this._variantEnum.S(this.constructor.__default_variant)}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(v){this._sizeEnum.S(v)}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(v){this._flavorEnum.S(v)}},{key:"variant",get:function get(){return this._variantEnum.currentFlag},set:function set(v){this._variantEnum.S(v)}},{key:"isToggled",get:function get(){return this._isToggled}},{key:"isActivable",set:function set(v){_set(_gPO(Bb_.prototype),"isActivable",v,this,true);this._flags.S(UF.DISABLED,!this._isActivable)}},{key:"isCommandTrigger",get:function get(){return this._isCommandTrigger},set:function set(v){this._isCommandTrigger=v}},{key:"isCommandContext",get:function get(){return this._isCommandContext},set:function set(v){this._isCommandContext=v}},{key:"alwaysDisplayCommand",get:function get(){return this._alwaysDisplayCommand},set:function set(v){this._alwaysDisplayCommand=v;if(v&&this._command){this.visible=true}}},{key:"_R",value:function _R(){this.focusArea=this}},{key:"options",set:function set(v){if(!v){return}this._optionsHandler.P(this,v);this._flags.S(UF.NO_SCALE,v.noscale?v.noscale:false)}},{key:"_OnOptionsWillU",value:function _OnOptionsWillU(o){if(!o){return}o.htitle=U.G(o,"htitle",U.Default(o.label,""))}},{key:"command",get:function get(){return this._command},set:function set(p_command){if(this._command===p_command){return}var oldValue=this._command;this._command=p_command;if(oldValue){this._commandObserver.Unobserve(p_command)}if(p_command){this._commandObserver.Observe(p_command);this._OnCommandUd(p_command);this.htitle=p_command.name;this.order=p_command.order}else{this.order=0}}},{key:"_OnCommandUd",value:function _OnCommandUd(p_command){this.visible=this._alwaysDisplayCommand?true:p_command.isEnabled}},{key:"trigger",get:function get(){return this._trigger},set:function set(v){this._trigger=v}},{key:"toggle",get:function get(){return this._toggle},set:function set(v){this._toggle=v}},{key:"request",get:function get(){return this._request},set:function set(v){this._request=v}},{key:"Activate",value:function Activate(p_evt){if(!_get(_gPO(Bb_.prototype),"Activate",this).call(this,p_evt)){return false}if(this._isCommandTrigger&&this._command){this._command.emitter=this;if(this._isCommandContext){this._command.Execute(this)}else{this._command.Execute()}}if(this._trigger){var thisArg=U.G(this._trigger,"thisArg",null);if(this._trigger.argArray){var _this$_trigger$fn;(_this$_trigger$fn=this._trigger.fn).call.apply(_this$_trigger$fn,[thisArg].concat(_toConsumableArray(this._trigger.argArray)))}else if(this._trigger.arg){if(this._trigger.arg===UF.SELF){this._trigger.fn.call(thisArg,this)}else{this._trigger.fn.call(thisArg,this._trigger.arg)}}else{this._trigger.fn.call(thisArg)}}if(this._toggle){if(this._isToggled){if(this._toggle.yoyo){this.Deactivate()}}else{this._isToggled=true;this._flags.S(UF.TOGGLED,true);var _thisArg=U.G(this._toggle,"thisArg",null);if(this._toggle.argArray){var _this$_toggle$fn;(_this$_toggle$fn=this._toggle.fn).call.apply(_this$_toggle$fn,[_thisArg].concat(_toConsumableArray(this._toggle.argArray)))}else if(this._toggle.arg){if(this._toggle.arg===UF.SELF){this._toggle.fn.call(_thisArg,this)}else{this._toggle.fn.call(_thisArg,this._toggle.arg)}}else{this._toggle.fn.call(_thisArg)}}}if(this._request){if(!this._request.type){throw new Error("Cannot generate request of type 'null'")}var requestEmitter=U.G(this._request,"emitter",this),options=U.G(this._request,"options");var proxy=U.G(this._request,"proxy",null);if(proxy){var _thisArg2=U.G(proxy,"thisArg",null);if(proxy.argArray){options=proxy.fn.apply(_thisArg2,proxy.argArray)}else if(proxy.arg){options=proxy.fn.call(_thisArg2,proxy.arg)}else{options=proxy.fn.call(_thisArg2)}}requestEmitter._EmitLocalRequest(opts.type,options,U.G(this._request,"onSuccess",null),U.G(this._request,"onFail",null),U.G(this._request,"timeout",0),U.G(this._request,"cl",Request))}this._B(US.TRIGGERED,this);return true}},{key:"Deactivate",value:function Deactivate(){if(!this._isToggled){return}this._isToggled=false;this._flags.S(UF.TOGGLED,false);if(this._toggle){if(this._toggle.fnOff){var thisArg=U.G(this._toggle,"thisArg",null);if(this._toggle.argArray){var _this$_toggle$fnOff;(_this$_toggle$fnOff=this._toggle.fnOff).call.apply(_this$_toggle$fnOff,[thisArg].concat(_toConsumableArray(this._toggle.argArray)))}else if(this._toggle.arg){if(this._toggle.arg===UF.SELF){this._toggle.fnOff.call(thisArg,this)}else{this._toggle.fnOff.call(thisArg,this._toggle.arg)}}else{this._toggle.fnOff.call(thisArg)}}}this._B(US.DEACTIVATED,this)}},{key:"_CleanUp",value:function _CleanUp(){this.htitle="";this.command=null;this._isCommandTrigger=true;this._isCommandContext=true;this._isToggled=false;this.toggle=null;this.trigger=null;this.request=null;this.isActivable=true;this._flags.ApplyAll(false);this._sizeEnum.S(this.constructor.__default_size);this._flavorEnum.S(this.constructor.__default_flavor);this._variantEnum.S(this.constructor.__default_variant);_get(_gPO(Bb_.prototype),"_CleanUp",this).call(this)}}]);return Bb_}(W);_defineProperty(Bb_,"__NFO__",NFOS.Ext({css:["@/buttons/shared.css"]},W,["css"]));_defineProperty(Bb_,"__default_size",null);_defineProperty(Bb_,"__default_flavor",null);_defineProperty(Bb_,"__default_variant",null);mdl.xp["default"]=mdl.xp=Bb_},{313:184,309:209,311:206,310:208,312:217,25:1,14:27,13:268}],168:[function(rq,mdl,xp){"use strict";var _rq194=rq(13),U=_rq194.U;var _rq195=rq(14),NFOS=_rq195.NFOS;var _rq196=rq(34),CSS=_rq196.CSS;var UF=rq(314);var UI=rq(315);var T_B=rq(316);var BDragHandle=function(_T_B){_inherits(BDragHandle,_T_B);var _super83=_createSuper(BDragHandle);function BDragHandle(){_cCC(this,BDragHandle);return _super83.call(this)}_cC(BDragHandle,[{key:"_Style",value:function _Style(){return CSS.Extends({":host":_defineProperty({cursor:"move"},"cursor","grab"),":host(.focused)":_defineProperty({cursor:"move"},"cursor","grab")},_get(_gPO(BDragHandle.prototype),"_Style",this).call(this))}}]);return BDragHandle}(T_B);_defineProperty(BDragHandle,"__NFO__",NFOS.Ext({css:["@/buttons/button-drag-handle.css"]},T_B,["css"]));mdl.xp["default"]=mdl.xp=BDragHandle;UI.Register("nkmjs-button-drag-handle",BDragHandle)},{315:209,314:206,316:170,14:27,34:155,13:268}],169:[function(rq,mdl,xp){"use strict";var _rq197=rq(13),U=_rq197.U,UDOM=_rq197.UDOM;var _rq198=rq(14),NFOS=_rq198.NFOS;var _rq199=rq(34),CSS=_rq199.CSS,FONT_FLAG=_rq199.FONT_FLAG;var UF=rq(314);var UI_ID=rq(317);var UI=rq(318);var Bb_=rq(319);var _rq200=rq(320),TextManipulator=_rq200.TextManipulator,ImageManipulator=_rq200.ImageManipulator;var BEx=function(_Bb_){_inherits(BEx,_Bb_);var _super84=_createSuper(BEx);function BEx(){_cCC(this,BEx);return _super84.call(this)}_cC(BEx,[{key:"_In",value:function _In(){_get(_gPO(BEx.prototype),"_In",this).call(this);this._optionsHandler.H(UI_ID.ICON,null,"");this._optionsHandler.H(UI_ID.LABEL,null,"");this._optionsHandler.H("uppercaseText");this._icon=null;this._label=null;this._flags.A(this,UF.NO_ICON,UF.NO_LABEL)}},{key:"_OnDataUd",value:function _OnDataUd(p_data){_get(_gPO(BEx.prototype),"_OnDataUd",this).call(this,p_data)}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._flags.S(UF.NO_ICON,!this._icon.S(v))}},{key:"label",get:function get(){return this._label},set:function set(v){this._flags.S(UF.NO_LABEL,!this._label.S(v))}},{key:"_R",value:function _R(){_get(_gPO(BEx.prototype),"_R",this).call(this);this._icon=new ImageManipulator(UDOM.New("span",{class:UI_ID.ICON},this._host));this._label=new TextManipulator(UDOM.New("span",{class:UI_ID.LABEL},this._host))}},{key:"_CleanUp",value:function _CleanUp(){this._icon.S(null);this._label.S(null);_get(_gPO(BEx.prototype),"_CleanUp",this).call(this)}}]);return BEx}(Bb_);_defineProperty(BEx,"__NFO__",NFOS.Ext({css:["@/buttons/button-ex.css"]},Bb_,["css"]));mdl.xp["default"]=mdl.xp=BEx;UI.Register("nkmjs-button-ex",BEx)},{319:167,320:191,314:206,317:207,318:209,14:27,34:155,13:268}],170:[function(rq,mdl,xp){"use strict";var _rq201=rq(13),U=_rq201.U,UDOM=_rq201.UDOM;var _rq202=rq(14),NFOS=_rq202.NFOS;var _rq203=rq(34),CSS=_rq203.CSS;var UF=rq(314);var UI_ID=rq(317);var UI=rq(318);var Bb_=rq(319);var ImageManipulator=rq(321);var T_B=function(_Bb_2){_inherits(T_B,_Bb_2);var _super85=_createSuper(T_B);function T_B(){_cCC(this,T_B);return _super85.call(this)}_cC(T_B,[{key:"_In",value:function _In(){_get(_gPO(T_B.prototype),"_In",this).call(this);this._optionsHandler.H(UI_ID.ICON,null,"");this._icon=null}},{key:"_OnDataUd",value:function _OnDataUd(p_data){_get(_gPO(T_B.prototype),"_OnDataUd",this).call(this,p_data)}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._icon.S(v)}},{key:"_R",value:function _R(){_get(_gPO(T_B.prototype),"_R",this).call(this);this._icon=new ImageManipulator(UDOM.New("span",{class:UI_ID.ICON},this._host),false)}},{key:"_pR",value:function _pR(){this._icon.S(null)}},{key:"_CleanUp",value:function _CleanUp(){this._icon.S(null);_get(_gPO(T_B.prototype),"_CleanUp",this).call(this)}}]);return T_B}(Bb_);_defineProperty(T_B,"__NFO__",NFOS.Ext({css:["@/buttons/button-tool.css"]},Bb_,["css"]));mdl.xp["default"]=mdl.xp=T_B;UI.Register("nkmjs-tool-button",T_B)},{319:167,321:193,314:206,317:207,318:209,14:27,34:155,13:268}],171:[function(rq,mdl,xp){"use strict";var _rq204=rq(13),U=_rq204.U,UDOM=_rq204.UDOM;var UI=rq(309);var US=rq(310);var dO=rq(322);var dOC_=function(_dO){_inherits(dOC_,_dO);var _super86=_createSuper(dOC_);function dOC_(){_cCC(this,dOC_);return _super86.call(this)}_cC(dOC_,[{key:"_In",value:function _In(){_get(_gPO(dOC_.prototype),"_In",this).call(this);this._displayObjects=new Array(0)}},{key:"_pIn",value:function _pIn(){_get(_gPO(dOC_.prototype),"_pIn",this).call(this);if(!this._wrapper){this._wrapper=this._host}}},{key:"count",get:function get(){return this._displayObjects.length}},{key:"At",value:function At(p_index){return this._displayObjects[p_index]}},{key:"A",value:function A(p_displayObject){var p_cssClass=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_container=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var p_index=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;if(p_index>=this._displayObjects.length||p_index<0){p_index=-1}if(U.isFunc(p_displayObject)&&U.isInstanceOf(p_displayObject,dO)){p_displayObject=UI.Rt(p_displayObject)}if(!p_displayObject){throw new Error("Cannot A an empty display object.")}if(this._displayObjects.includes(p_displayObject)){if(p_index===-1){return p_displayObject}this.Move(p_displayObject,p_index);return p_displayObject}if(!p_container||p_container===this){p_container=this._wrapper}else if(U.isInstanceOf(p_container,dOC_)){p_container=p_container.wrapper}if(p_index===-1){this._displayObjects.push(p_displayObject);p_index=this._displayObjects.length-1;try{p_container.appendChild(p_displayObject)}catch(err){throw err}}else{this._displayObjects.splice(p_index,0,p_displayObject);p_container.insertBefore(p_displayObject,this._displayObjects[p_index])}p_displayObject.parent=this;if(p_cssClass){if(p_cssClass.includes(" ")){var classes=p_cssClass.split(" ");for(var i=0,n=classes.length;i<n;i++){p_displayObject.classList.add(classes[i])}}else{p_displayObject.classList.add(p_cssClass)}}this._OnChildAd(p_displayObject,p_index);return p_displayObject}},{key:"Move",value:function Move(p_displayObject,p_index){if(!this._displayObjects.includes(p_displayObject)){throw new Error("Provided display object is not a child of this container.")}console.warning("DisplayObject.Move is not implemented.");this._OnChildMoved(p_displayObject,p_index,p_index)}},{key:"RM",value:function RM(p_displayObject){var index=this._displayObjects.indexOf(p_displayObject);if(index===-1){return p_displayObject}return this.RMAt(index)}},{key:"RMAt",value:function RMAt(p_index){if(p_index<0||p_index>=this._displayObjects.length){return null}var removeddO=this._displayObjects[p_index];this._displayObjects.splice(p_index,1);if(removeddO.parent===this){removeddO.parent=null;UDOM.Detach(removeddO)}this._OnChildRMd(removeddO,p_index);return removeddO}},{key:"_OnChildAd",value:function _OnChildAd(p_displayObject,p_index){this._B(US.CHILD_ADDED,this,p_displayObject,p_index)}},{key:"_OnChildMoved",value:function _OnChildMoved(p_displayObject,p_index,p_oldIndex){this._B(US.CHILD_MOVED,this,p_displayObject,p_index,p_oldIndex)}},{key:"_OnChildRMd",value:function _OnChildRMd(p_displayObject,p_index){this._B(US.CHILD_ADDED,this,p_displayObject,p_index)}}]);return dOC_}(dO);mdl.xp["default"]=mdl.xp=dOC_},{322:172,309:209,310:208,13:268}],172:[function(rq,mdl,xp){"use strict";var _rq205=rq(13),U=_rq205.U,UDOM=_rq205.UDOM,PATH=_rq205.PATH;var _rq206=rq(18),Dictionary=_rq206.Dictionary,List=_rq206.List,DictionaryList=_rq206.DictionaryList;var _rq207=rq(25),RELAY=_rq207.RELAY,Request=_rq207.Request;var _rq208=rq(14),S_Box=_rq208.S_Box,NFOS=_rq208.NFOS;var _rq209=rq(34),STYLE=_rq209.STYLE,CSS=_rq209.CSS;var UI=rq(309);var UF=rq(311);var dHel=rq(323);var FlagBox=rq(324);var dO=function(_DisposableHTMLElemen){_inherits(dO,_DisposableHTMLElemen);var _super87=_createSuper(dO);function dO(){_cCC(this,dO);return _super87.call(this)}_cC(dO,[{key:"_In",value:function _In(){_get(_gPO(dO.prototype),"_In",this).call(this);this._isTransformDirty=false;this._transforms={};this._wrapper=null;this._host=null;this._styles=null;this._shadowConfig={mode:"open"};this._visible=true;this._flags=new FlagBox;this._requestS_Box=null;this._order=null;this._parent=null}},{key:"_pIn",value:function _pIn(){_get(_gPO(dO.prototype),"_pIn",this).call(this);this._BuildHost();this._wrapper=this._host;this._PrintStyle();this._R();this._pR()}},{key:"order",get:function get(){return this._order},set:function set(v){if(this._order===v){return}this._order=v;if(v===null){this.style.removeProperty("--order")}else{this.style.setProperty("--order",v)}}},{key:"host",get:function get(){return this._host}},{key:"wrapper",get:function get(){return this._wrapper}},{key:"_BuildHost",value:function _BuildHost(){this._host=this.attachShadow(this._shadowConfig)}},{key:"_Style",value:function _Style(){}},{key:"_PrintStyle",value:function _PrintStyle(){var p_invalidateCache=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._styles){for(var i=0,n=this._styles.length;i<n;i++){this._styles[i].remove()}this._styles.length=0}this._styles=STYLE.G(this.constructor,this._Bind(this._Style),p_invalidateCache);for(var _i21=0,_n17=this._styles.length;_i21<_n17;_i21++){UDOM.Attach(this._styles[_i21].cloneNode(true),this._host)}}},{key:"_R",value:function _R(){}},{key:"_pR",value:function _pR(){}},{key:"BringToFront",value:function BringToFront(){UDOM.ToFront(this)}},{key:"parent",get:function get(){return this._parent},set:function set(v){if(this._parent===v){return}var oldParent=this._parent;this._parent=v;if(oldParent){oldParent.RM(this)}if(this._parent){this._parent.A(this)}this._OnParentCh(oldParent)}},{key:"_OnParentCh",value:function _OnParentCh(p_oldParent){}},{key:"visible",get:function get(){return this._visible},set:function set(v){if(this._visible===v){return}this._visible=v;if(!v){this.style.display="none"}else{this.style.removeProperty("display")}}},{key:"flags",get:function get(){return this._flags}},{key:"_EmitLocalRequest",value:function _EmitLocalRequest(p_requestType){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_onSuccess=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var p_onFail=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var p_timeout=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var p_requestClass=arguments.length>5&&arguments[5]!==undefined?arguments[5]:Request;this._HandleLocalRequest(Request.Emit(p_requestType,o,this,p_onSuccess,p_onFail,p_timeout,p_requestClass,false))}},{key:"_HandleLocalRequest",value:function _HandleLocalRequest(p_request){if(p_request.emitter!=this&&this._requestS_Box){this._requestS_Box.B(p_request.requestType,p_request)}if(this._parent){this._parent._HandleLocalRequest(p_request)}else{RELAY.HandleRequest(p_request)}}},{key:"_RegisterLocalRequestHandler",value:function _RegisterLocalRequestHandler(p_requestType,p_fn){if(!this._requestS_Box){this._requestS_Box=new S_Box}this._requestS_Box.A(p_requestType,p_fn,this)}},{key:"_UnregisterLocalRequestHandler",value:function _UnregisterLocalRequestHandler(p_requestType,p_fn){if(!this._requestS_Box){return}this._requestS_Box.RM(p_requestType,p_fn,this)}},{key:"transforms",get:function get(){return this._transforms},set:function set(v){if(this._transforms===v){return}this._transforms=v;this._DirtyTransform()}},{key:"dirty",get:function get(){return this._isTransformDirty}},{key:"_DirtyTransform",value:function _DirtyTransform(){if(this._isTransformDirty){return}this._isTransformDirty=true;UI.ADirty(this)}},{key:"x",get:function get(){return U.G(this._transforms,"x",0)},set:function set(v){if(this._transforms.x!=v){this._transforms.x=v;this._DirtyTransform()}}},{key:"y",get:function get(){return U.G(this._transforms,"y",0)},set:function set(v){if(this._transforms.y!=v){this._transforms.y=v;this._DirtyTransform()}}},{key:"z",get:function get(){return U.G(this._transforms,"z",0)},set:function set(v){if(this._transforms.z!=v){this._transforms.z=v;this._DirtyTransform()}}},{key:"rotation",get:function get(){return U.G(this._transforms,"rotation",0)},set:function set(v){if(this._transforms.rotation!=v){this._transforms.rotation=v;this._DirtyTransform()}}},{key:"rotationX",get:function get(){return U.G(this._transforms,"rotationX",0)},set:function set(v){if(this._transforms.rotationX!=v){this._transforms.rotationX=v;this._DirtyTransform()}}},{key:"rotationY",get:function get(){return U.G(this._transforms,"rotationY",0)},set:function set(v){if(this._transforms.rotationY!=v){this._transforms.rotationY=v;this._DirtyTransform()}}},{key:"rotationZ",get:function get(){return U.G(this._transforms,"rotationZ",0)},set:function set(v){if(this._transforms.rotationZ!=v){this._transforms.rotationZ=v;this._DirtyTransform()}}},{key:"scale",get:function get(){return U.G(this._transforms,"scale",0)},set:function set(v){if(this._transforms.scale!=v){this._transforms.scale=v;this._DirtyTransform()}}},{key:"scaleX",get:function get(){return U.G(this._transforms,"scaleX",0)},set:function set(v){if(this._transforms.scaleX!=v){this._transforms.scaleX=v;this._DirtyTransform()}}},{key:"scaleY",get:function get(){return U.G(this._transforms,"scaleY",0)},set:function set(v){if(this._transforms.scaleY!=v){this._transforms.scaleY=v;this._DirtyTransform()}}},{key:"scaleZ",get:function get(){return U.G(this._transforms,"scaleZ",0)},set:function set(v){if(this._transforms.scaleZ!=v){this._transforms.scaleZ=v;this._DirtyTransform()}}},{key:"ApplyTransforms",value:function ApplyTransforms(){var t=this._transforms;if(!t){this.style.removeProperty("transform");return}var rr=U.G(t,"rotation",0),rx=U.G(t,"rotationX",0),ry=U.G(t,"rotationY",0),rz=U.G(t,"rotationZ",0),r="".concat(rr===0?"":"rotate(".concat(rr,"deg)")).concat(rx===0?"":"rotateX(".concat(rx,"deg)")).concat(ry===0?"":"rotateX(".concat(ry,"deg)")).concat(rz===0?"":"rotateZ(".concat(rz,"deg)")),tx=U.G(t,"x",0),ty=U.G(t,"y",0),tz=U.G(t,"z",0),tt="".concat(tx===0?"":"translateX(".concat(tx,"px)")).concat(ty===0?"":"translateY(".concat(ty,"px)")).concat(tz===0?"":"translateZ(".concat(tz,"px)")),ss=U.G(t,"scale",1),sx=U.G(t,"scaleX",1),sy=U.G(t,"scaleY",1),sz=U.G(t,"scaleZ",1),s="".concat(ss===1?"":"scale(".concat(ss,",").concat(ss,")")).concat(sx===1?"":"scaleX(".concat(sx,")")).concat(sy===1?"":"scaleX(".concat(sy,")")).concat(sz===1?"":"scaleZ(".concat(sz,")"));this.style.transform="".concat(tt).concat(r).concat(s);this._isTransformDirty=false}},{key:"size",set:function set(v){this.width=v;this.height=v}},{key:"width",set:function set(v){this.style.width=U.isEmpty(v)?"":"".concat(v,"px")}},{key:"height",set:function set(v){this.style.height=U.isEmpty(v)?"":"".concat(v,"px")}},{key:"sizeRel",set:function set(v){this.widthRel=v;this.heightRel=v}},{key:"widthRel",set:function set(v){this.style.width=U.isEmpty(v)?"":"".concat(v,"%")}},{key:"heightRel",set:function set(v){this.style.height=U.isEmpty(v)?"":"".concat(v,"%")}},{key:"_CleanUp",value:function _CleanUp(){this.visible=true;this.parent=null;this.order=null;this._transforms={};this.style.removeProperty("transform");_get(_gPO(dO.prototype),"_CleanUp",this).call(this);UDOM.Detach(this)}},{key:"displayPath",get:function get(){var arr=new Array(0),p=this._parent;while(p!=null){arr.push(p.constructor.name);p=p.parent}arr.reverse();arr.push(this.constructor.name);return arr.join(".")}}]);return dO}(dHel);mdl.xp["default"]=mdl.xp=dO},{323:173,324:183,309:209,311:206,25:1,18:21,14:27,34:155,13:268}],173:[function(rq,mdl,xp){"use strict";var _rq210=rq(14),S=_rq210.S,S_Box=_rq210.S_Box;var _rq211=rq(13),UDOM=_rq211.UDOM;var US=rq(310);var uinc=0;var dHel=function(_HTMLElement){_inherits(dHel,_HTMLElement);var _super88=_createSuper(dHel);function dHel(){var _this10;_cCC(this,dHel);_this10=_super88.call(this);_this10._In();_this10._pIn();return _this10}_cC(dHel,[{key:"_In",value:function _In(){this._uinc=uinc++;this._returnFn=null;this._releasing=false;this._releasePrevented=false;this._signals=new S_Box;this._released=false;this._isPainted=false;this._isFirstPaint=true}},{key:"_pIn",value:function _pIn(){}},{key:"_Bind",value:function _Bind(p_func){return this[p_func.name]=p_func.bind(this)}},{key:"isPainted",get:function get(){return this._isPainted}},{key:"_OnPaintChange",value:function _OnPaintChange(){if(this._isPainted){if(this._isFirstPaint){this._signals.B(US.FIRST_PAINT,this)}this._signals.B(US.PAINTED,this)}else{this._signals.B(US.UNPAINTED,this)}}},{key:"_B",value:function _B(p_signalId){var _this$_signals3;for(var _len16=arguments.length,args=new Array(_len16>1?_len16-1:0),_key18=1;_key18<_len16;_key18++){args[_key18-1]=arguments[_key18]}(_this$_signals3=this._signals).B.apply(_this$_signals3,[p_signalId].concat(args))}},{key:"W",value:function W(p_evt,p_fn){var p_suscriber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._signals.A(p_evt,p_fn,p_suscriber)}},{key:"WOnce",value:function WOnce(p_evt,p_fn){var p_suscriber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._signals.AOnce(p_evt,p_fn,p_suscriber)}},{key:"Uw",value:function Uw(p_signalId,p_fn){var p_suscriber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._signals.RM(p_signalId,p_fn,p_suscriber)}},{key:"returnFunc",set:function set(value){this._returnFn=value}},{key:"returnContext",set:function set(value){this._returnContext=value}},{key:"PreventRelease",value:function PreventRelease(){this._releasePrevented=true}},{key:"Release",value:function Release(){if(this._releasing){return}this._releasing=true;this._B(S.RELEASING,this);if(this._releasePrevented){this._releasing=false;this._releasePrevented=false;return}this._released=true;this._B(S.RELEASED,this);this._CleanUp();UDOM.Detach(this);if(this._returnFn!=undefined){this._returnFn(this)}this._releasing=false}},{key:"_CleanUp",value:function _CleanUp(){this._releasePrevented=false;this._signals.Clear();this._isFirstPaint=true;this.constructor.__paintingObserver.unobserve(this)}},{key:"Wake",value:function Wake(){this._released=false;this._Wake();this._pWake();this.constructor.__paintingObserver.observe(this)}},{key:"_Wake",value:function _Wake(){}},{key:"_pWake",value:function _pWake(){}},{key:"toString",value:function toString(){return"<".concat(this.constructor.name,">")}}]);return dHel}(_wrapNativeSuper(HTMLElement));_defineProperty(dHel,"__usePaintCallback",false);_defineProperty(dHel,"__paintingObserver",new IntersectionObserver((function(entries,observer){for(var i=0,n=entries.length;i<n;i++){var entry=entries[i],target=entry.target;if(entry.isIntersecting){if(target._isPainted){continue}target._isPainted=true;if(target.constructor.__usePaintCallback){target._OnPaintChange()}target._isFirstPaint=false}else{if(!target._isPainted){continue}target._isPainted=false;if(target.constructor.__usePaintCallback){target._OnPaintChange()}}}}),{threshold:0}));mdl.xp["default"]=mdl.xp=dHel},{310:208,14:27,13:268}],174:[function(rq,mdl,xp){"use strict";var _rq212=rq(13),U=_rq212.U,UDOM=_rq212.UDOM;var _rq213=rq(14),COM_ID=_rq213.COM_ID;var DOMTemplate=function(){function DOMTemplate(){_cCC(this,DOMTemplate)}_cC(DOMTemplate,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if("_wrapper"in p_host){p_host=p_host._wrapper}var owner=U.G(o,COM_ID.OWNER,this);if(!owner){owner=this}var tpl=this.constructor.__HTMLtemplate;if(!tpl){this.constructor._CreateTemplate();tpl=this.constructor.__HTMLtemplate}for(var i=0,n=tpl.length;i<n;i++){var nodeInfos=tpl[i],node=nodeInfos.node.cloneNode(true);if(nodeInfos.parent){owner[nodeInfos.parent].appendChild(node)}else{p_host.appendChild(node)}if(nodeInfos.id){owner[nodeInfos.id]=node}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){if(this.__HTMLtemplate){throw new Error("HTMLTemplate (".concat(this.name,") initialized more than once."))}this.__HTMLtemplate=new Array(0)}},{key:"_A",value:function _A(p_element){var p_id=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_parentId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var node={node:p_element};if(p_id){node.id=p_id}if(p_parentId){node.parent=p_parentId}this.__HTMLtemplate.push(node)}},{key:"R",value:function R(p_tpl,p_host,o){var tpl=new p_tpl;tpl.R(p_host,o);return tpl}}]);return DOMTemplate}();_defineProperty(DOMTemplate,"__HTMLtemplate",null);mdl.xp["default"]=mdl.xp=DOMTemplate},{14:27,13:268}],175:[function(rq,mdl,xp){"use strict";var _rq214=rq(13),U=_rq214.U;var _rq215=rq(14),__dOEx=_rq215.__dOEx,POOL=_rq215.POOL;var Extb_=function(___dOEx23){_inherits(Extb_,___dOEx23);var _super89=_createSuper(Extb_);function Extb_(){var _this11;_cCC(this,Extb_);_this11=_super89.call(this);_this11._isEnabled=false;_this11._childExtensions=null;return _this11}_cC(Extb_,[{key:"A",value:function A(p_ext){if(!this._childExtensions){this._childExtensions=new Array(0)}if(this._childExtensions.includes(p_ext)){return p_ext}if(U.isFunc(p_ext)){p_ext=POOL.Rt(p_ext)}this._childExtensions.push(p_ext);p_ext.enabled=this._isEnabled;return p_ext}},{key:"RM",value:function RM(p_ext){if(!this._childExtensions||this._childExtensions.includes(p_ext)){return null}this._childExtensions.push(p_ext);p_ext.Disable();return p_ext}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(v){if(v){this.Enable()}else{this.Disable()}}},{key:"Enable",value:function Enable(){if(this._isEnabled){return false}this._isEnabled=true;if(this._childExtensions){for(var i=0,n=this._childExtensions.length;i<n;i++){this._childExtensions[i].Enable()}}return true}},{key:"Disable",value:function Disable(){if(!this._isEnabled){return false}this._isEnabled=false;if(this._childExtensions){for(var i=0,n=this._childExtensions.length;i<n;i++){this._childExtensions[i].Disable()}}return true}},{key:"_CleanUp",value:function _CleanUp(){this.Disable();this._childExtensions.length=0;this._childExtensions=null;_get(_gPO(Extb_.prototype),"_CleanUp",this).call(this)}}]);return Extb_}(__dOEx);mdl.xp["default"]=mdl.xp=Extb_},{14:27,13:268}],176:[function(rq,mdl,xp){"use strict";var _rq216=rq(13),UDOM=_rq216.UDOM;var _rq217=rq(14),S=_rq217.S,Observer=_rq217.Observer,__dOEx=_rq217.__dOEx;var UI=rq(315);var INPUT=rq(325);var UF=rq(314);var US=rq(326);var Extb_=rq(327);var M=rq(328);var _dragDataContent=new Array(0);var ExtDrag=function(_Extb_){_inherits(ExtDrag,_Extb_);var _super90=_createSuper(ExtDrag);function ExtDrag(){_cCC(this,ExtDrag);return _super90.call(this)}_cC(ExtDrag,[{key:"_In",value:function _In(){_get(_gPO(ExtDrag.prototype),"_In",this).call(this);this._isEnabled=true;this._target=null;this._activator=null;this._feedbackHost=null;this._grabDataCallback=null;this._ownerObserver=new Observer;this._ownerObserver.H(US.DRAG_STARTED,this._OnOwnerDragStarted,this);this._ownerObserver.H(US.DRAG_ENDED,this._OnOwnerDragEnded,this);this._ownerObserver.H(S.RELEASED,this._OnOwnerReleased,this);this._Bind(this._mUp);this._Bind(this._mDown);this._Bind(this._mDragStart);this._Bind(this._mDrag);this._Bind(this._mDragEnd);this._hintElement=null}},{key:"_OnOwnerReleased",value:function _OnOwnerReleased(p_was){this.owner=null}},{key:"grabDataCallback",get:function get(){return this._grabDataCallback},set:function set(v){this._grabDataCallback=v}},{key:"activator",get:function get(){return this._activator},set:function set(v){if(this._activator===v){return}var oldValue=this._activator;this._activator=v;if(this._isEnabled){if(oldValue){oldValue.removeEventListener("mousedown",this._mDown)}if(v){v.addEventListener("mousedown",this._mDown)}}}},{key:"owner",get:function get(){return this._owner},set:function set(v){if(this._owner===v){return}this._owner=v;this._ownerObserver.ObserveOnly(v)}},{key:"Sup",value:function Sup(p_target){var p_activator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_feedback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var oldTarget=this._target;this._target=p_target;this.activator=p_activator?p_activator:p_target;this._feedbackHost=p_feedback?p_feedback:p_target;if(oldTarget){oldTarget.flags.RM(oldTarget,UF.DRAGGED)}if(p_target){p_target.flags.A(p_target,UF.DRAGGED)}}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(v){if(v){this.Enable()}else{this.Disable()}}},{key:"Enable",value:function Enable(){if(!_get(_gPO(ExtDrag.prototype),"Enable",this).call(this)){return false}if(this._activator){this._activator.addEventListener("mousedown",this._mDown)}return true}},{key:"Disable",value:function Disable(){if(!_get(_gPO(ExtDrag.prototype),"Disable",this).call(this)){return false}if(this._activator){this._activator.removeEventListener("mousedown",this._mDown)}return true}},{key:"_mDown",value:function _mDown(p_evt){if(!this._isEnabled||p_evt.button!==M.BTN_LEFT){return}this._target.setAttribute("draggable",true);this._target.addEventListener("dragstart",this._mDragStart);M.W(M.M_UP,this._mUp)}},{key:"_mUp",value:function _mUp(p_evt){if(!this._isEnabled||p_evt.button!==M.BTN_LEFT){return}M.Uw(M.M_UP,this._mUp);this._EndDrag()}},{key:"_mDragStart",value:function _mDragStart(p_evt){if(this._feedbackHost){console.log(p_evt);p_evt.dataTransfer.setDragImage(this._feedbackHost,-10,-10)}M.Uw(M.M_UP,this._mUp);this._target.addEventListener("dragend",this._mDragEnd);this._target.addEventListener("drag",this._mDrag);_dragDataContent.length=0;this._OwnerB(US.DRAG_STARTED);UI.DragStarted(_dragDataContent,this._target);this._ShowHint()}},{key:"_mDrag",value:function _mDrag(p_evt){M.instance._mMove(p_evt);this._OwnerB(US.DRAGGED)}},{key:"_mDragEnd",value:function _mDragEnd(p_evt){this._EndDrag();this._OwnerB(US.DRAG_ENDED);UI.DragEnded()}},{key:"_GrabData",value:function _GrabData(){return this._grabDataCallback()}},{key:"_EndDrag",value:function _EndDrag(){this._target.removeAttribute("draggable");this._target.removeEventListener("dragstart",this._mDragStart);this._target.removeEventListener("dragend",this._mDragEnd);this._target.removeEventListener("drag",this._mDrag);this._HideHint()}},{key:"_OwnerB",value:function _OwnerB(p_evt){this._owner._B(p_evt,this._owner)}},{key:"_OnOwnerDragStarted",value:function _OnOwnerDragStarted(p_target){if(!this._isEnabled){return}_dragDataContent.push(this._GrabData());this._target.flags.S(UF.DRAGGED,true)}},{key:"_OnOwnerDragEnded",value:function _OnOwnerDragEnded(p_target){if(!this._isEnabled){return}this._target.flags.S(UF.DRAGGED,false)}},{key:"_ShowHint",value:function _ShowHint(){if(this._feedbackHost){if(this._hintElement){UDOM.Attach(this._hintElement,this._feedbackHost)}else{this._hintElement=UDOM.New("div",{class:"ext-overlay drag-overlay"},this._feedbackHost)}}}},{key:"_HideHint",value:function _HideHint(){if(this._hintElement){UDOM.Detach(this._hintElement)}}},{key:"_CleanUp",value:function _CleanUp(){this._HideHint();this._hintElement=null;this._EndDrag();_get(_gPO(ExtDrag.prototype),"_CleanUp",this).call(this)}}]);return ExtDrag}(Extb_);mdl.xp["default"]=mdl.xp=ExtDrag},{325:189,328:195,315:209,314:206,326:208,327:175,14:27,13:268}],177:[function(rq,mdl,xp){"use strict";var _rq218=rq(13),UDOM=_rq218.UDOM;var INPUT=rq(325);var M=rq(328);var UI=rq(315);var UF=rq(314);var US=rq(326);var Extb_=rq(327);var _activeTarget=null;var ExtDrop=function(_Extb_2){_inherits(ExtDrop,_Extb_2);var _super91=_createSuper(ExtDrop);function ExtDrop(){_cCC(this,ExtDrop);return _super91.call(this)}_cC(ExtDrop,[{key:"_In",value:function _In(){_get(_gPO(ExtDrop.prototype),"_In",this).call(this);this._target=null;this._feedbackHost=null;this._hooks=new Array(0);this._allowedHs=new Array(0);this._onDragOverHs=new Array(0);this._onLeaveHs=new Array(0);this._isAcceptingCurrentData=false;this._isActive=false;this._Bind(this._mDragEnter);this._Bind(this._mDragLeave);this._Bind(this._mDragOver);this._Bind(this._mDrop);this._hintElement=null}},{key:"target",get:function get(){return this._target},set:function set(v){if(this._target===v){return}var oldValue=this._target;this._target=v;if(this._isEnabled){if(oldValue){oldValue.removeEventListener("dragenter",this._mDragEnter)}if(v){v.addEventListener("dragenter",this._mDragEnter)}}}},{key:"Sup",value:function Sup(p_target){var p_feedback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var oldTarget=this._target;this.target=p_target;this._feedbackHost=p_feedback?p_feedback:p_target;if(oldTarget){oldTarget.flags.RM(oldTarget,UF.ALLOW_DROP)}if(p_target){p_target.flags.A(p_target,UF.ALLOW_DROP)}}},{key:"Enable",value:function Enable(){if(!_get(_gPO(ExtDrop.prototype),"Enable",this).call(this)){return false}if(this._target){this._target.addEventListener("dragenter",this._mDragEnter)}return true}},{key:"Disable",value:function Disable(){if(!_get(_gPO(ExtDrop.prototype),"Disable",this).call(this)){return false}if(this._target){this._target.removeEventListener("dragenter",this._mDragEnter)}return true}},{key:"_mDragEnter",value:function _mDragEnter(p_evt){this._allowedHs.length=0;this._onDragOverHs.length=0;this._onLeaveHs.length=0;var dragList=UI.DRAG_DATA;outerloop:for(var i=0,n=this._hooks.length;i<n;i++){var hook=this._hooks[i],pass=false;innerloop:for(var d=0,n2=dragList.length;d<n2;d++){var dragData=dragList[d];if(hook.check.thisArg){pass=hook.check.fn.call(hook.check.thisArg,dragData)}else{pass=hook.check.fn(dragData)}if(pass){break innerloop}}if(pass){this._allowedHs.push(hook);if(hook.drag){this._onDragOverHs.push(hook.drag)}if(hook.leave){this._onLeaveHs.push(hook.leave)}}}if(this._allowedHs.length===0){this._isAcceptingCurrentData=false;this._Clear()}else{this._isAcceptingCurrentData=true;this._target.addEventListener("dragleave",this._mDragLeave);this._target.addEventListener("dragover",this._mDragOver)}}},{key:"_dragEnd",value:function _dragEnd(p_extDrag){this._Clear()}},{key:"_mDragLeave",value:function _mDragLeave(p_evt){this._Clear()}},{key:"_mDragOver",value:function _mDragOver(p_evt){if(p_evt.defaultPrevented){this._Activate(false);return}if(this._isAcceptingCurrentData){p_evt.preventDefault();this._Activate(true);var dragData=UI.DRAG_DATA;for(var i=0,n=this._onDragOverHs.length;i<n;i++){var hook=this._onDragOverHs[i];if(hook.thisArg){hook.fn.call(hook.thisArg,dragData)}else{hook.fn(dragData)}}}}},{key:"_mDrop",value:function _mDrop(p_evt){var dragList=UI.DRAG_DATA,pass=false;for(var d=0,n=dragList.length;d<n;d++){var dragData=dragList[d];for(var i=0,n2=this._allowedHs.length;i<n2;i++){var hook=this._allowedHs[i];if(hook.check.thisArg){pass=hook.check.fn.call(hook.check.thisArg,dragData)}else{pass=hook.check.fn(dragData)}if(!pass){continue}if(hook.drop){hook.drop.fn.call(hook.drop.thisArg,dragData)}else{hook.drop.fn(dragData)}}}UI.DRAG_TARGET._B(US.DROPPED,UI.DRAG_TARGET);this._Clear()}},{key:"_Activate",value:function _Activate(p_toggle){if(this._isActive===p_toggle){return}this._isActive=p_toggle;if(this._feedbackHost){this._feedbackHost.flags.S(UF.ALLOW_DROP,p_toggle);for(var i=0,n=this._allowedHs.length;i<n;i++){var hook=this._allowedHs[i],flags=hook.flag;if(!flags){continue}if(Array.isArray(flags)){for(var _i22=0,n2=flags.length;_i22<n2;_i22++){this._feedbackHost.flags.S(flags[_i22],p_toggle)}}else{this._feedbackHost.flags.S(flags,p_toggle)}}}if(p_toggle){ExtDrop.ACTIVE_TARGET=this;this._target.addEventListener("drop",this._mDrop);UI.instance.Uw(US.DRAG_ENDED,this._dragEnd,this)}else{if(ExtDrop.ACTIVE_TARGET===this){ExtDrop.ACTIVE_TARGET=null}this._target.removeEventListener("drop",this._mDrop);UI.instance.W(US.DRAG_ENDED,this._dragEnd,this)}}},{key:"_Clear",value:function _Clear(){var dragData=UI.DRAG_DATA;for(var i=0,n=this._onLeaveHs.length;i<n;i++){var hook=this._onLeaveHs[i];if(hook.thisArg){hook.fn.call(hook.thisArg,dragData)}else{hook.fn(dragData)}}this._target.removeEventListener("dragleave",this._mDragLeave);this._target.removeEventListener("dragover",this._mDragOver);this._Activate(false)}},{key:"_ShowHint",value:function _ShowHint(){if(this._feedbackHost){if(this._hintElement){UDOM.Attach(this._hintElement,this._feedbackHost)}else{this._hintElement=UDOM.New("div",{class:"ext-overlay drag-overlay"},this._feedbackHost)}}}},{key:"_HideHint",value:function _HideHint(){if(this._hintElement){UDOM.Detach(this._hintElement)}}},{key:"H",value:function H(p_hookOptions){this._hooks.push(p_hookOptions)}},{key:"_CleanUp",value:function _CleanUp(){this._hooks.length=0;_get(_gPO(ExtDrop.prototype),"_CleanUp",this).call(this)}}],[{key:"ACTIVE_TARGET",get:function get(){return _activeTarget},set:function set(v){var oldTarget=_activeTarget;_activeTarget=v;if(oldTarget){oldTarget._Activate(false)}if(_activeTarget){_activeTarget._Activate(true)}}}]);return ExtDrop}(Extb_);mdl.xp["default"]=mdl.xp=ExtDrop},{325:189,328:195,315:209,314:206,326:208,327:175,13:268}],178:[function(rq,mdl,xp){"use strict";var _rq219=rq(13),U=_rq219.U;var _rq220=rq(14),__dOEx=_rq220.__dOEx;var UF=rq(314);var US=rq(326);var dO=rq(329);var Extb_=rq(327);var ExtExpand=function(_Extb_3){_inherits(ExtExpand,_Extb_3);var _super92=_createSuper(ExtExpand);function ExtExpand(){_cCC(this,ExtExpand);return _super92.call(this)}_cC(ExtExpand,[{key:"_In",value:function _In(){_get(_gPO(ExtExpand.prototype),"_In",this).call(this);this._target=null;this._wrapper=null;this._isExpanded=false;this._activator=null;this._activateOnAlt=false;this._Bind(this._mClick)}},{key:"isExpanded",get:function get(){return this._isExpanded}},{key:"activateOnAlt",get:function get(){return this._activateOnAlt},set:function set(v){this._activateOnAlt=v}},{key:"activator",get:function get(){return this._activator},set:function set(v){var oldValue=this._activator;this._activator=v;if(this._isEnabled){if(oldValue){if(U.isInstanceOf(oldValue,dO)){oldValue.Uw(US.ACTIVATED,this._OnWActivated,this)}else{oldValue.removeEventListener("click",this._mClick)}}if(v){if(U.isInstanceOf(v,dO)){v.W(US.ACTIVATED,this._OnWActivated,this)}else{v.addEventListener("click",this._mClick)}}}}},{key:"Sup",value:function Sup(p_target,p_wrapper){var p_activator=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var p_activateOnAlt=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this._target=p_target;this._wrapper=p_wrapper;if(!p_target){return}p_target.flags.A(p_target,UF.EXPANDED,UF.COLLAPSED);if(p_wrapper){p_target.flags.A(p_wrapper,UF.EXPANDED,UF.COLLAPSED)}this._UFlags();this._B(this._isExpanded?US.EXPANDED:US.COLLAPSED);if(p_activator){this.activator=p_activator;this._activateOnAlt=p_activateOnAlt}}},{key:"Enable",value:function Enable(){if(!_get(_gPO(ExtExpand.prototype),"Enable",this).call(this)){return false}if(this._activator){if(U.isInstanceOf(this._activator,dO)){this._activator.W(US.ACTIVATED,this._OnWActivated,this)}else{this._activator.addEventListener("click",this._mClick)}}return true}},{key:"Disable",value:function Disable(){if(!_get(_gPO(ExtExpand.prototype),"Disable",this).call(this)){return false}if(this._activator){if(U.isInstanceOf(this._activator,dO)){this._activator.Uw(US.ACTIVATED,this._OnWActivated,this)}else{this._activator.removeEventListener("click",this._mClick)}}return true}},{key:"_OnWActivated",value:function _OnWActivated(p_widget,p_evt){this.Toggle()}},{key:"_mClick",value:function _mClick(p_evt){if(p_evt.detail>1){if(this._activateOnAlt){this.Toggle()}}else if(!this._activateOnAlt){this.Toggle()}}},{key:"Toggle",value:function Toggle(){if(this._isExpanded){this.Collapse()}else{this.Expand()}}},{key:"Expand",value:function Expand(){var p_scrollTo=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this._isExpanded){return}this._isExpanded=true;this._UFlags();if(p_scrollTo){this._target.scrollIntoView({behavior:"auto",block:"nearest",inline:"start"})}this._B(US.EXPANDED)}},{key:"Collapse",value:function Collapse(){if(!this._isExpanded){return}this._isExpanded=false;this._UFlags();this._B(US.COLLAPSED)}},{key:"_UFlags",value:function _UFlags(){if(!this._target){return}this._target.flags.S(UF.EXPANDED,this._isExpanded);this._target.flags.S(UF.COLLAPSED,!this._isExpanded)}},{key:"_CleanUp",value:function _CleanUp(){this._HideHint();this._hintElement=null;this._target=null;_get(_gPO(ExtExpand.prototype),"_CleanUp",this).call(this)}}]);return ExtExpand}(Extb_);mdl.xp["default"]=mdl.xp=ExtExpand},{329:172,314:206,326:208,327:175,14:27,13:268}],179:[function(rq,mdl,xp){"use strict";var _rq221=rq(13),U=_rq221.U;var _rq222=rq(14),S=_rq222.S,__dOEx=_rq222.__dOEx;var UF=rq(314);var FlagEnum=rq(330);var INPUT=rq(325);var Extb_=rq(327);var ExtmMove=function(_Extb_4){_inherits(ExtmMove,_Extb_4);var _super93=_createSuper(ExtmMove);function ExtmMove(){var _this12;var p_element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_cCC(this,ExtmMove);_this12=_super93.call(this);_this12._element=p_element;_this12._ismOver=false;_this12._Bind(_this12._mOver);_this12._Bind(_this12._mOut);_this12._Bind(_this12._mMove);_this12._moveFn=null;_this12._startPos=null;_this12._currentPos=null;_this12._currentOffset=null;return _this12}_cC(ExtmMove,[{key:"element",get:function get(){return this._element},set:function set(v){if(this._element===v){return}var oldElement=this._element;this._element=v;if(this._isEnabled){if(oldElement){oldElement.removeEventListener("mouseenter",this._mOver)}if(this._element){this._element.addEventListener("mouseenter",this._mOver)}}}},{key:"Enable",value:function Enable(){if(!_get(_gPO(ExtmMove.prototype),"Enable",this).call(this)){return false}if(this._element){this._element.addEventListener("mouseenter",this._mOver)}return true}},{key:"Disable",value:function Disable(){if(!_get(_gPO(ExtmMove.prototype),"Disable",this).call(this)){return false}if(this._element){this._element.removeEventListener("mouseenter",this._mOver)}return true}},{key:"ismOver",get:function get(){return this._ismOver}},{key:"startPos",get:function get(){return this._startPos}},{key:"currentPos",get:function get(){return this._currentPos}},{key:"currentOffset",get:function get(){return this._currentOffset}},{key:"PinStart",value:function PinStart(){this._startPos.x=this._currentPos.x;this._startPos.y=this._currentPos.y}},{key:"distanceToStart",get:function get(){var a=this._startPos.x-this._currentPos.x;var b=this._startPos.y-this._currentPos.y;return Math.sqrt(a*a+b*b)}},{key:"distanceOffset",get:function get(){var a=this._currentOffset.x;var b=this._currentOffset.y;return Math.sqrt(a*a+b*b)}},{key:"moveFn",set:function set(v){this._moveFn=v}},{key:"_mOver",value:function _mOver(p_evt){if(this._ismOver){return}this._ismOver=true;this._startPos={x:p_evt.clientX,y:p_evt.clientY};this._currentPos={x:p_evt.clientX,y:p_evt.clientY};this._currentOffset={x:0,y:0};this._element.addEventListener("mousemove",this._mMove)}},{key:"_mOut",value:function _mOut(p_evt){if(!this._ismOver){return}this._ismOver=false;this._element.removeEventListener("mousemove",this._mMove)}},{key:"_mMove",value:function _mMove(p_evt){this._currentOffset.x=this._currentPos.x-p_evt.clientX;this._currentOffset.y=this._currentPos.y-p_evt.clientY;this._currentPos.x=p_evt.clientX;this._currentPos.y=p_evt.clientY;if(this._moveFn){this._moveFn(this)}}}]);return ExtmMove}(Extb_);mdl.xp["default"]=mdl.xp=ExtmMove},{330:184,325:189,314:206,327:175,14:27,13:268}],180:[function(rq,mdl,xp){"use strict";var UI=rq(315);var M=rq(328);var US=rq(326);var Extb_=rq(327);var Extm=function(_Extb_5){_inherits(Extm,_Extb_5);var _super94=_createSuper(Extm);function Extm(){var _this13;var p_element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_cCC(this,Extm);_this13=_super94.call(this);_this13._element=p_element;_this13._hooks={};_this13._using={};_this13._buttons={};_this13._ismOver=false;_this13._isAnyBtnDown=false;_this13._Bind(_this13._mOver);_this13._Bind(_this13._mOut);_this13._Bind(_this13._mDown);_this13._Bind(_this13._mUp);_this13._Bind(_this13._mUpOutside);_this13._Bind(_this13._mWheel);_this13._focusFn=null;return _this13}_cC(Extm,[{key:"wheelFn",set:function set(v){this._wheelFn=v}},{key:"focusFn",set:function set(v){this._focusFn=v}},{key:"element",get:function get(){return this._element},set:function set(v){if(this._element===v){return}var oldElement=this._element;this._element=v;if(this._isEnabled){if(oldElement){oldElement.removeEventListener("mouseenter",this._mOver)}if(this._element){this._element.addEventListener("mouseenter",this._mOver)}}}},{key:"Enable",value:function Enable(){if(!_get(_gPO(Extm.prototype),"Enable",this).call(this)){return false}if(this._element){this._element.addEventListener("mouseenter",this._mOver)}return true}},{key:"Disable",value:function Disable(){if(!_get(_gPO(Extm.prototype),"Disable",this).call(this)){return false}if(this._element){this._element.removeEventListener("mouseenter",this._mOver)}return true}},{key:"ismOver",get:function get(){return this._ismOver}},{key:"ismDown",value:function ismDown(){var p_btn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(p_btn===null){for(var btn in this._buttons){if(this._buttons[btn]===M.DOWN){return true}}return false}return p_btn in this._buttons&&this._buttons[p_btn]===M.DOWN}},{key:"_mOver",value:function _mOver(p_evt){this._ismOver=true;this._element.addEventListener("mousedown",this._mDown);this._element.addEventListener("mouseup",this._mUp);this._element.addEventListener("mouseleave",this._mOut);if(this._isAnyBtnDown){M.Uw(M.M_UP,this._mUpOutside)}if(this._focusFn){this._focusFn(true)}if(this._wheelFn){this._element.addEventListener("wheel",this._mWheel)}}},{key:"_mOut",value:function _mOut(p_evt){this._ismOver=false;this._element.removeEventListener("mousedown",this._mDown);this._element.removeEventListener("mouseup",this._mUp);this._element.removeEventListener("mouseleave",this._mOut);if(this._isAnyBtnDown){M.W(M.M_UP,this._mUpOutside)}else if(this._focusFn){this._focusFn(false)}if(this._wheelFn){this._element.removeEventListener("wheel",this._mWheel)}}},{key:"_mDown",value:function _mDown(p_evt){M.instance.StartUsing(this._using);this._isAnyBtnDown=true;var eNum=p_evt.button;this._buttons[eNum]=M.DOWN;this._Trigger("".concat(eNum,"_").concat(M.DOWN));UI.W(US.DRAG_ENDED,this._mUpOutside)}},{key:"_mUp",value:function _mUp(p_evt){var eNum=p_evt.button;if(this._buttons[eNum]===M.DOWN){this._buttons[eNum]=M.UP;this._Trigger("".concat(eNum,"_").concat(M.UP));if(p_evt.detail===1){this._Trigger("".concat(eNum,"_").concat(M.RELEASE))}else if(p_evt.detail===2){this._Trigger("".concat(eNum,"_").concat(M.RELEASE_TWICE))}}else{this._buttons[eNum]=M.UP;this._Trigger("".concat(eNum,"_").concat(M.UP))}delete this._buttons[eNum];this._isAnyBtnDown=this.ismDown();if(!this._isAnyBtnDown){UI.Uw(US.DRAG_ENDED,this._mUpOutside);M.instance.StopUsing(this._using)}}},{key:"_mUpOutside",value:function _mUpOutside(p_evt){if(p_evt){var eNum=p_evt.button;if(this._buttons[eNum]===M.DOWN){this._Trigger("".concat(eNum,"_").concat(M.RELEASE_OUTSIDE))}delete this._buttons[eNum]}else{for(var key in this._buttons){this._Trigger("".concat(this._buttons[key],"_").concat(M.RELEASE_OUTSIDE))}this._buttons={}}this._isAnyBtnDown=this.ismDown();if(!this._isAnyBtnDown){if(this._focusFn){this._focusFn(false)}M.Uw(M.M_UP,this._mUpOutside);UI.Uw(US.DRAG_ENDED,this._mUpOutside);M.instance.StopUsing(this._using)}}},{key:"_mWheel",value:function _mWheel(p_evt){if(this._wheelFn){this._wheelFn(p_evt)}}},{key:"H",value:function H(p_button,p_state,p_fn){var id="".concat(p_button,"_").concat(p_state),fnList=this._hooks[id];if(!this._using[p_button]){this._using[p_button]=1}else{this._using[p_button]++}if(!fnList){fnList=this._hooks[id]=new Array(0)}else{fnList=this._hooks[id]}if(fnList.includes(p_fn)){return}fnList.push(p_fn)}},{key:"Uh",value:function Uh(p_button,p_state,p_fn){var id="".concat(p_button,"_").concat(p_state),fnList=this._hooks[id];if(!fnList){return}if(this._using[p_button]){this._using[p_button]--;if(this._using[p_button]<=0){delete this._using[p_button]}}var index=fnList.indexOf(p_fn);if(index==-1){return}fnList.splice(index,1)}},{key:"_Trigger",value:function _Trigger(p_id,p_evt){if(!this._isEnabled){return}var fnList=this._hooks[p_id];if(!fnList){return}for(var i=0,n=fnList.length;i<n;i++){fnList[i](p_evt)}}}]);return Extm}(Extb_);mdl.xp["default"]=mdl.xp=Extm},{328:195,315:209,326:208,327:175}],181:[function(rq,mdl,xp){"use strict";var _rq223=rq(13),U=_rq223.U;var _rq224=rq(14),BINDINGS=_rq224.BINDINGS,S=_rq224.S;var _rq225=rq(29),CgItem=_rq225.CgItem,Cg=_rq225.Cg,CgWer=_rq225.CgWer;var CgBuilder=function(_CgWer2){_inherits(CgBuilder,_CgWer2);var _super95=_createSuper(CgBuilder);function CgBuilder(){_cCC(this,CgBuilder);return _super95.call(this)}_cC(CgBuilder,[{key:"_In",value:function _In(){_get(_gPO(CgBuilder.prototype),"_In",this).call(this);this._defaultItemClass=null;this._defaultGroupClass=null;this._host=null}},{key:"host",get:function get(){return this._host},set:function set(v){this._host=v}},{key:"_OnCgItemAd",value:function _OnCgItemAd(p_catalog,it){if(!_get(_gPO(CgBuilder.prototype),"_OnCgItemAd",this).call(this,p_catalog,it)){return false}var mappedObject=null;if(U.isInstanceOf(it,Cg)){mappedObject=this._owner.A(BINDINGS.G(this._owner,it,this._defaultGroupClass),"item group",this._host)}else{mappedObject=this._owner.A(BINDINGS.G(this._owner,it,this._defaultItemClass),"item",this._host)}this._map.set(it,mappedObject);mappedObject.data=it;this._B(S.ITEM_ADDED,this,it,mappedObject);return true}},{key:"_OnCgItemRMd",value:function _OnCgItemRMd(p_catalog,it){var mappedObject=_get(_gPO(CgBuilder.prototype),"_OnCgItemRMd",this).call(this,p_catalog,it);if(mappedObject===false){return false}this._B(S.ITEM_REMOVED,this,it,mappedObject);if(mappedObject){mappedObject.Release()}return mappedObject}},{key:"_OnCgSorted",value:function _OnCgSorted(p_catalog){var list=this._catalog._items,index=0;for(var i=0,n=list.length;i<n;i++){var item=this._items[i],mappedObject=this._map.get(item);if(!mappedObject){continue}if(item.isDir){mappedObject.order=index}else{mappedObject.order=this._itemCount+index}index++}_get(_gPO(CgBuilder.prototype),"_OnCgSorted",this).call(this,p_catalog)}},{key:"_CleanUp",value:function _CleanUp(){this._defaultItemClass=null;this._defaultGroupClass=null;this._host=null;_get(_gPO(CgBuilder.prototype),"_CleanUp",this).call(this)}}]);return CgBuilder}(CgWer);mdl.xp["default"]=mdl.xp=CgBuilder},{14:27,29:52,13:268}],182:[function(rq,mdl,xp){"use strict";var _rq226=rq(13),U=_rq226.U;var _rq227=rq(14),S=_rq227.S;var _rq228=rq(29),CgItem=_rq228.CgItem,Cg=_rq228.Cg,CgWer=_rq228.CgWer;var UI=rq(315);var UI_ID=rq(317);var View=rq(331);var CgViewBuilder=function(_CgWer3){_inherits(CgViewBuilder,_CgWer3);var _super96=_createSuper(CgViewBuilder);function CgViewBuilder(){_cCC(this,CgViewBuilder);return _super96.call(this)}_cC(CgViewBuilder,[{key:"_In",value:function _In(){_get(_gPO(CgViewBuilder.prototype),"_In",this).call(this);this._reverseMap=new Map}},{key:"_OnCgItemAd",value:function _OnCgItemAd(p_catalog,it){if(!_get(_gPO(CgViewBuilder.prototype),"_OnCgItemAd",this).call(this,p_catalog,it)){return false}var view=it.GOption("view",null);if(!view){var viewType=it.GOption("viewType",null);if(!viewType){throw new Error("Drawer's item has neither a view or a viewType set.")}if(!U.isInstanceOf(viewType,View)){throw new Error("viewType (".concat(viewType.name,") is not of type View"))}view=UI.Rt(viewType);it.SOption(UI_ID.VIEW,view)}else{if(!U.isInstanceOf(view,View)){throw new Error("view is not of type View.")}}this._map.set(it,view);this._reverseMap.set(view,it);if(it.data){view.data=it.data}else{view.data=it}this._B(S.ITEM_ADDED,this,it,view);return true}},{key:"_OnCgItemRMd",value:function _OnCgItemRMd(p_catalog,it){var mappedView=_get(_gPO(CgViewBuilder.prototype),"_OnCgItemRMd",this).call(this,p_catalog,it);if(mappedView===false){return false}this._reverseMap["delete"](mappedView);this._B(S.ITEM_REMOVED,this,it,mappedView);mappedView.Release();return mappedView}}]);return CgViewBuilder}(CgWer);mdl.xp["default"]=mdl.xp=CgViewBuilder},{315:209,317:207,331:214,14:27,29:52,13:268}],183:[function(rq,mdl,xp){"use strict";var _rq229=rq(13),U=_rq229.U,UDOM=_rq229.UDOM;var _rq230=rq(18),Dictionary=_rq230.Dictionary,List=_rq230.List,DictionaryList=_rq230.DictionaryList;var _rq231=rq(25),RELAY=_rq231.RELAY,Request=_rq231.Request;var _rq232=rq(14),S_Box=_rq232.S_Box;var _rq233=rq(34),STYLE=_rq233.STYLE,CSS=_rq233.CSS;var UI=rq(315);var UF=rq(314);var __NULL=Symbol("null");var FlagBox=function(){function FlagBox(){_cCC(this,FlagBox);this._elements=null;this._flags=new Dictionary}_cC(FlagBox,[{key:"S",value:function S(p_flag,p_toggle){if(p_toggle){this._flags.S(p_flag,true);this.Apply(p_flag,true)}else{this._flags.S(p_flag,false);this.Apply(p_flag,false)}return p_toggle}},{key:"IsS",value:function IsS(p_flag){var flag=this._flags.G(p_flag);if(!flag){return false}return flag}},{key:"Toggle",value:function Toggle(p_flag){this.S(p_flag,!this.IsS(p_flag))}},{key:"A",value:function A(p_element){if(!this._elements){this._elements=new DictionaryList}for(var i=0,n=arguments.length<=1?0:arguments.length-1;i<n;i++){this._elements.S(i+1<1||arguments.length<=i+1?undefined:arguments[i+1],p_element)}}},{key:"RM",value:function RM(p_element){if(!this._elements){return}for(var i=0,n=arguments.length<=1?0:arguments.length-1;i<n;i++){this._elements.RM(i+1<1||arguments.length<=i+1?undefined:arguments[i+1],p_element)}}},{key:"Apply",value:function Apply(p_flag,p_toggle){if(!this._elements){return}var list=this._elements.G(p_flag);if(!list){return}if(p_toggle){for(var i=0,n=list.length;i<n;i++){list[i].classList.add(p_flag)}}else{for(var _i23=0,_n18=list.length;_i23<_n18;_i23++){list[_i23].classList.remove(p_flag)}}}},{key:"ApplyAll",value:function ApplyAll(p_toggle){if(!this._elements){return}var flagList=this._elements.keys;for(var i=0,n=flagList.length;i<n;i++){var flag=flagList[i],elList=this._elements.G(flag);for(var e=0,en=elList.length;e<en;e++){if(p_toggle){elList[e].classList.add(flag)}else{elList[e].classList.remove(flag)}}}}},{key:"Clear",value:function Clear(){this._flags.Clear();if(!this._elements){return}this._elements.Clear()}}]);return FlagBox}();mdl.xp["default"]=mdl.xp=FlagBox},{315:209,314:206,25:1,18:21,14:27,34:155,13:268}],184:[function(rq,mdl,xp){"use strict";var _rq234=rq(13),U=_rq234.U,UDOM=_rq234.UDOM;var _rq235=rq(18),Dictionary=_rq235.Dictionary,List=_rq235.List,DictionaryList=_rq235.DictionaryList;var _rq236=rq(25),RELAY=_rq236.RELAY,Request=_rq236.Request;var _rq237=rq(14),S_Box=_rq237.S_Box,S_Ber=_rq237.S_Ber,POOL=_rq237.POOL;var _rq238=rq(34),STYLE=_rq238.STYLE,CSS=_rq238.CSS;var UI=rq(315);var UF=rq(314);var FlagEnum=function(){function FlagEnum(){var p_enum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_cCC(this,FlagEnum);this._elements=new Array(0);this._managed=new Array(0);this._enum=p_enum?p_enum:new Array(0);this._currentFlag=null;this._onFlagCh=POOL.Rt(S_Ber)}_cC(FlagEnum,[{key:"currentFlag",get:function get(){return this._currentFlag}},{key:"onFlagCh",get:function get(){return this._onFlagCh}},{key:"AEnum",value:function AEnum(){for(var _len17=arguments.length,values=new Array(_len17),_key19=0;_key19<_len17;_key19++){values[_key19]=arguments[_key19]}if(values.length===1&&U.isArray(values[0])){values=values[0]}for(var i=0,n=values.length;i<n;i++){if(!this._enum.includes(values[i])){this._enum.push(values[i])}}}},{key:"RMEnum",value:function RMEnum(){for(var _len18=arguments.length,values=new Array(_len18),_key20=0;_key20<_len18;_key20++){values[_key20]=arguments[_key20]}if(values.length===1&&U.isArray(values[0])){values=values[0]}var index;for(var i=0,n=values.length;i<n;i++){index=this._enum.indexOf(values[i]);if(index!=-1){this._enum.slice(index,1)}}}},{key:"A",value:function A(){for(var _len19=arguments.length,values=new Array(_len19),_key21=0;_key21<_len19;_key21++){values[_key21]=arguments[_key21]}for(var i=0,n=values.length;i<n;i++){if(!this._elements.includes(values[i])){this._elements.push(values[i])}}}},{key:"RM",value:function RM(){for(var i=0,n=arguments.length;i<n;i++){var index=this._elements.indexOf(i<0||arguments.length<=i?undefined:arguments[i]);if(index!=-1){this._elements.slice(index,1)}}}},{key:"AManaged",value:function AManaged(){for(var _len20=arguments.length,values=new Array(_len20),_key22=0;_key22<_len20;_key22++){values[_key22]=arguments[_key22]}for(var i=0,n=values.length;i<n;i++){if(!this._managed.includes(values[i])){this._managed.push(values[i])}}}},{key:"RMManaged",value:function RMManaged(){for(var i=0,n=arguments.length;i<n;i++){var index=this._managed.indexOf(i<0||arguments.length<=i?undefined:arguments[i]);if(index!=-1){this._managed.slice(index,1)}}}},{key:"Apply",value:function Apply(p_key,p_list){for(var i=0,n=p_list.length;i<n;i++){var item=p_list[i];if(p_key in item){item[p_key]=this._currentFlag}}}},{key:"S",value:function S(p_flag){if(p_flag&&!this._enum.includes(p_flag)){throw new Error("flag '".concat(p_flag,"' not part of enum ").concat(this._enum))}for(var i=0,n=this._managed.length;i<n;i++){this._managed[i].S(p_flag)}if(this._currentFlag===p_flag){return}var oldFlag=this._currentFlag,el;this._currentFlag=p_flag;if(!oldFlag&&p_flag){for(var _i24=0,_n19=this._elements.length;_i24<_n19;_i24++){this._elements[_i24].classList.add(p_flag)}}else if(oldFlag&&!p_flag){for(var _i25=0,_n20=this._elements.length;_i25<_n20;_i25++){this._elements[_i25].classList.remove(oldFlag)}}else{for(var _i26=0,_n21=this._elements.length;_i26<_n21;_i26++){el=this._elements[_i26];el.classList.add(p_flag);el.classList.remove(oldFlag)}}this._onFlagCh.B(p_flag,oldFlag)}},{key:"Bump",value:function Bump(p_flag){var currentIndex=this._enum.indexOf(this._currentFlag),bumpIndex=this._enum.indexOf(p_flag);if(bumpIndex>currentIndex){this.S(p_flag)}}},{key:"Clear",value:function Clear(){this.S(null);this._flags.Clear();this._elements.length=0;this._enum.length=0}}]);return FlagEnum}();mdl.xp["default"]=mdl.xp=FlagEnum},{315:209,314:206,25:1,18:21,14:27,34:155,13:268}],185:[function(rq,mdl,xp){"use strict";var _rq239=rq(13),U=_rq239.U,UDOM=_rq239.UDOM;var _rq240=rq(14),NFOS=_rq240.NFOS;var UI=rq(315);var UF=rq(314);var _rq241=rq(320),ImageManipulator=_rq241.ImageManipulator;var dO=rq(329);var Frame=function(_dO2){_inherits(Frame,_dO2);var _super97=_createSuper(Frame);function Frame(){_cCC(this,Frame);return _super97.call(this)}_cC(Frame,[{key:"_In",value:function _In(){_get(_gPO(Frame.prototype),"_In",this).call(this);this._imgManipulator=null}},{key:"_Style",value:function _Style(){return{":host":{transition:"all 0.15s ease",position:"relative","min-width":0,"@":["cover"]},":host(.focused)":{},":host(.focused) .toolbar":{},":host(.selected)":{},":host(.selected.focused)":{}}}},{key:"_R",value:function _R(){this._imgManipulator=new ImageManipulator(this,false)}},{key:"S",value:function S(v){return this._imgManipulator.S(v)}},{key:"_CleanUp",value:function _CleanUp(){this._imgManipulator.S(null);_get(_gPO(Frame.prototype),"_CleanUp",this).call(this)}}]);return Frame}(dO);mdl.xp["default"]=mdl.xp=Frame;UI.Register("nkmjs-frame",Frame)},{329:172,320:191,315:209,314:206,14:27,13:268}],186:[function(rq,mdl,xp){"use strict";var _rq242=rq(13),U=_rq242.U,UDOM=_rq242.UDOM;var _rq243=rq(14),TIME=_rq243.TIME,S=_rq243.S,OptionsHandler=_rq243.OptionsHandler;var UI=rq(315);var UF=rq(314);var US=rq(326);var dOC_=rq(332);var FlagEnum=rq(333);var PopIn=function(_dOContain){_inherits(PopIn,_dOContain);var _super98=_createSuper(PopIn);function PopIn(){_cCC(this,PopIn);return _super98.call(this)}_cC(PopIn,[{key:"_In",value:function _In(){_get(_gPO(PopIn.prototype),"_In",this).call(this);this._content=null;this._options=null;this._placement=null;this._placementEnum=new FlagEnum(UF.placements);this._placementEnum.A(this);this._modeEnum=new FlagEnum(PopIn.MODE_ANCHOR,PopIn.MODE_FLOAT_INSIDE,PopIn.MODE_FLOAT_OUTSIDE);this._modeEnum.A(this);this._optionsHandler=new OptionsHandler(this._Bind(this._OnOptionsPed));this._optionsHandler.H("mode");this._optionsHandler.H("context",null,document.body);this._optionsHandler.H("anchor");this._optionsHandler.H("placement",null,PopIn.CENTER);this._optionsHandler.H("origin",null,PopIn.CENTER);this._ownsContent=false;this._Bind(this._UAnchoredPosition)}},{key:"options",get:function get(){return this._options},set:function set(o){this._options=o;this.content=o.content;if(this._content){this._optionsHandler.P(this,this._options)}else{throw new Error("PopIn options has no content set.")}}},{key:"mode",get:function get(){return this._modeEnum.currentFlag},set:function set(v){this._modeEnum.S(v)}},{key:"placement",get:function get(){return this._placement},set:function set(v){this._placement=v}},{key:"origin",get:function get(){return this._placement},set:function set(v){this._placement=v}},{key:"content",get:function get(){return this._content},set:function set(v){var _this14=this;if(this._content===v){return}if(this._content){if(this._ownsContent){this._content.Release()}else{}this._content=null}if(!v){this._ownsContent=false;return}this._ownsContent=U.isFunc(v);this._content=this.A(v,"content");this._content.W(US.CLOSE_REQUESTED,(function(){_this14.Release()}))}},{key:"context",get:function get(){return this._context},set:function set(v){if(this._context===v){return}if(this._context){UDOM.Detach(this)}this._context=v;if(this._context){UDOM.Attach(this,this._context)}}},{key:"anchor",get:function get(){return this._anchor},set:function set(v){if(this._anchor===v){return}this._anchor=v;if(this._anchor){TIME.W(S.TICK,this._UAnchoredPosition)}else{TIME.Uw(S.TICK,this._UAnchoredPosition)}}},{key:"_OnOptionsPed",value:function _OnOptionsPed(o){}},{key:"_Style",value:function _Style(){return{":host":{position:"absolute",border:"2px solid #ff0000",display:"flex"},":host(.mode-float-inside)":{},":host(.mode-anchor)":{}}}},{key:"_UAnchoredPosition",value:function _UAnchoredPosition(){var rect=UDOM.Rect(this._anchor,this.parentElement),centerX=rect.x+rect.width*.5,centerY=rect.y+rect.height*.5,x=centerX+rect.width*this._placement.x,y=centerY+rect.height*this._placement.y;if(this._placement.x<.5){}else{}if(this._placement.y<.5){}else{}this.style.left="".concat(x,"px");this.style.top="".concat(y,"px")}},{key:"_CleanUp",value:function _CleanUp(){this._ownsContent=false;this.context=null;this.content=null;this.anchor=null;this.mode=null;this._options=null;_get(_gPO(PopIn.prototype),"_CleanUp",this).call(this)}}],[{key:"Pop",value:function Pop(o){var popin=UI.Rt(PopIn);popin.options=o;return popin}}]);return PopIn}(dOC_);_defineProperty(PopIn,"MODE_ANCHOR","mode-anchor");_defineProperty(PopIn,"MODE_FLOAT_INSIDE","mode-float-inside");_defineProperty(PopIn,"MODE_FLOAT_OUTSIDE","mode-float-outside");_defineProperty(PopIn,"LEFT",{x:-.5,y:0});_defineProperty(PopIn,"RIGHT",{x:.5,y:0});_defineProperty(PopIn,"TOP",{x:0,y:-.5});_defineProperty(PopIn,"BOTTOM",{x:0,y:.5});_defineProperty(PopIn,"TOP_LEFT",{x:-.5,y:-.5});_defineProperty(PopIn,"TOP_RIGHT",{x:.5,y:-.5});_defineProperty(PopIn,"BOTTOM_LEFT",{x:-.5,y:.5});_defineProperty(PopIn,"BOTTOM_RIGHT",{x:.5,y:.5});_defineProperty(PopIn,"CENTER",{x:0,y:0});mdl.xp["default"]=mdl.xp=PopIn;UI.Register("nkmjs-pop-in",PopIn)},{332:171,315:209,314:206,326:208,333:184,14:27,13:268}],187:[function(rq,mdl,xp){"use strict";var _rq244=rq(13),U=_rq244.U,UDOM=_rq244.UDOM;var _rq245=rq(14),NFOS=_rq245.NFOS,S=_rq245.S;var _rq246=rq(18),Dictionary=_rq246.Dictionary;var UI=rq(318);var UF=rq(314);var OrientableW=rq(334);var T_B=rq(335);var Bb_=rq(319);var FlagEnum=rq(333);var US=rq(326);var _flag_STRETCH="stretch";var _flag_STRETCH_SAME="stretch-same";var T_bar=function(_OrientableW){_inherits(T_bar,_OrientableW);var _super99=_createSuper(T_bar);function T_bar(){_cCC(this,T_bar);return _super99.call(this)}_cC(T_bar,[{key:"_In",value:function _In(){_get(_gPO(T_bar.prototype),"_In",this).call(this);this._defaultBClass=T_B;this._optionsMap=new Dictionary;this._handles=new Array(0);this._groups={};this._radioMap={};this._flags.A(this,T_bar.FLAG_STRETCH,T_bar.FLAG_STRETCH_SAME);this._stretchEnum=new FlagEnum([_flag_STRETCH,_flag_STRETCH_SAME]);this._stretchEnum.A(this);this._sizeEnum=new FlagEnum(UF.sizes);this._sizeEnum.A(this);this._sizeEnum.onFlagCh.A(this._Bind(this._OnSizeCh))}},{key:"_pIn",value:function _pIn(){_get(_gPO(T_bar.prototype),"_pIn",this).call(this);this._sizeEnum.S(this.constructor.__default_size)}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(v){this._sizeEnum.S(v)}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex","justify-content":"flex-start","align-items":"center"},":host(.vertical)":{"flex-flow":"column nowrap"},":host(.horizontal)":{"flex-flow":"row nowrap"},".group":{position:"relative",flex:"0 0 auto",display:"flex","justify-content":"flex-start","align-items":"center"},".item":{position:"relative",flex:"0 0 auto","min-width":"0","min-height":"0"},":host(.stretch), :host(.stretch-same)":{"align-items":"stretch","align-content":"stretch",flex:"1 1 auto"}}}},{key:"stretch",set:function set(v){this._stretchEnum.S(v)}},{key:"_R",value:function _R(){this.focusArea=this}},{key:"_OnSizeCh",value:function _OnSizeCh(p_newValue,p_oldValue){this._sizeEnum.Apply("size",this._handles)}},{key:"CreateHandle",value:function CreateHandle(o){var p_class=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var cl=U.Default(p_class,o.cl,this._defaultBClass),handle,group=U.G(o,"group",null),toggle=group?U.G(o,"toggle",null):null;if(group){group=this.GGroup(group,true);handle=this.A(cl,"item",group.element);group.handles.push(handle);if(toggle){handle.W(US.ACTIVATED,this._OnRadioActivated,this);handle.W(US.DEACTIVATED,this._OnRadioDeactivated,this)}}else{handle=this.A(cl,"item")}this._optionsMap.S(handle,o);handle.W(S.RELEASED,this._OnHandleReleased,this);if(U.isInstanceOf(handle,Bb_)){handle.options=o;handle.size=this._sizeEnum.currentFlag}handle.flags.S(this._orientation,true);this._handles.push(handle);return handle}},{key:"GGroup",value:function GGroup(p_group){var p_create=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(p_group in this._groups){return this._groups[p_group]}if(!p_create){return null}var group={element:UDOM.New("span",{class:"group"},this),handles:[]};this._groups[p_group]=group;return group}},{key:"_OnRadioActivated",value:function _OnRadioActivated(p_handle){var handleOptions=this._optionsMap.G(p_handle),radio=handleOptions.radio;if(radio in this._radioMap){var was=this._radioMap[radio];was.Deactivate()}this._radioMap[radio]=p_handle}},{key:"_OnRadioDeactivated",value:function _OnRadioDeactivated(p_handle){var handleOptions=this._optionsMap.G(p_handle),radio=handleOptions.radio;if(radio in this._radioMap){var was=this._radioMap[radio];if(was===p_handle){delete this._radioMap[radio]}}}},{key:"_OnHandleReleased",value:function _OnHandleReleased(p_handle){var options=this._optionsMap.G(p_handle),groupId=U.G(options,"group",null);if(groupId){var group=this.GGroup(groupId);group.handles.splice(group.handles.indexOf(p_handle),1);if(group.handles.length===0){UDOM.Detach(group.element);group.element=null;group.handles.length=0;delete this._groups[groupId]}}p_handle.classList.remove("item");this._optionsMap.RM(p_handle);var index=this._handles.indexOf(p_handle);if(index!=-1){this._handles.splice(index,1)}}},{key:"Clear",value:function Clear(){while(this._handles.length!=0){this._handles.pop().Release()}}},{key:"_CleanUp",value:function _CleanUp(){this.Clear();this._sizeEnum.S(this.constructor.__default_size);_get(_gPO(T_bar.prototype),"_CleanUp",this).call(this)}}],[{key:"FLAG_STRETCH",get:function get(){return _flag_STRETCH}},{key:"FLAG_STRETCH_SAME",get:function get(){return _flag_STRETCH_SAME}}]);return T_bar}(OrientableW);_defineProperty(T_bar,"__NFO__",NFOS.Ext({css:["@/helpers/toolbar.css"]},OrientableW,["css"]));_defineProperty(T_bar,"__default_size",UF.SIZE_M);mdl.xp["default"]=mdl.xp=T_bar;UI.Register("nkmjs-toolbar",T_bar)},{319:167,335:170,314:206,326:208,318:209,334:216,333:184,18:21,14:27,13:268}],188:[function(rq,mdl,xp){"use strict";var _rq247=rq(14),S=_rq247.S,__dOEx=_rq247.__dOEx;var _rq248=rq(18),List=_rq248.List;var US=rq(326);var INPUT=rq(325);var WSelection=function(___dOEx24){_inherits(WSelection,___dOEx24);var _super100=_createSuper(WSelection);function WSelection(){_cCC(this,WSelection);return _super100.call(this)}_cC(WSelection,[{key:"_In",value:function _In(){_get(_gPO(WSelection.prototype),"_In",this).call(this);this._stack=new List;this._shareEvents=true;this._allowMultiple=true;this._clearing=false;this._sharingEvent=false}},{key:"shareEvents",get:function get(){return this._shareEvents},set:function set(v){this._shareEvents=v}},{key:"allowMultiple",get:function get(){return this._allowMultiple},set:function set(v){this._allowMultiple=v;if(!v){this.Clear()}}},{key:"A",value:function A(it){if(this._stack.Contains(it)){if(INPUT.ctrl){this.RM(it)}return false}if(!this._allowMultiple||!INPUT.ctrl){this.Clear()}this._stack.A(it);it.W(US.SELECTION_LOST,this._OnItemSelectionLost,this);it.W(US.DRAG_STARTED,this._OnItemDragStarted,this);it.W(US.DRAG_ENDED,this._OnItemDragEnded,this);it.W(S.RELEASED,this._OnItemReleased,this);it.Select(true);this._B(S.ITEM_ADDED,it);return true}},{key:"RM",value:function RM(it){if(this._stack.RM(it)){it.Select(false);it.Uw(US.SELECTION_LOST,this._OnItemSelectionLost,this);it.Uw(US.DRAG_STARTED,this._OnItemDragStarted,this);it.Uw(US.DRAG_ENDED,this._OnItemDragEnded,this);it.Uw(S.RELEASED,this._OnItemReleased,this);this._B(S.ITEM_REMOVED,it)}}},{key:"_OnItemSelectionLost",value:function _OnItemSelectionLost(it){this.RM(it)}},{key:"_OnItemReleased",value:function _OnItemReleased(it){this.RM(it)}},{key:"_OnItemDragStarted",value:function _OnItemDragStarted(it){this._SpreadEvent(US.DRAG_STARTED,it)}},{key:"_OnItemDragEnded",value:function _OnItemDragEnded(it){this._SpreadEvent(US.DRAG_ENDED,it)}},{key:"_SpreadEvent",value:function _SpreadEvent(p_evt,p_emitter){if(!this._shareEvents||this._sharingEvent){return}this._sharingEvent=true;var list=this._stack.internalArray;for(var i=0,n=list.length;i<n;i++){var item=list[i];if(item!=p_emitter){item._B(p_evt,item)}}this._sharingEvent=false}},{key:"Clear",value:function Clear(){var stack=this._stack;while(!stack.isEmpty){this.RM(stack.last)}}}]);return WSelection}(__dOEx);mdl.xp["default"]=mdl.xp=WSelection},{325:189,326:208,18:21,14:27}],189:[function(rq,mdl,xp){"use strict";var _rq249=rq(18),Dictionary=_rq249.Dictionary;var _rq250=rq(14),SingletonEx=_rq250.SingletonEx;var M=rq(336);var INPUT=function(_SingletonEx8){_inherits(INPUT,_SingletonEx8);var _super101=_createSuper(INPUT);function INPUT(){_cCC(this,INPUT);return _super101.call(this)}_cC(INPUT,[{key:"_In",value:function _In(){_get(_gPO(INPUT.prototype),"_In",this).call(this);this._running=false;this._down=new Dictionary;this._Bind(this._KHandle);this._Bind(this._KBlur);this._shiftKey=false;this._ctrlKey=false;this._altKey=false;this._currentKeyEvent=null;if(this._isBrowser){this._Start();this._mouse=M.instance}}},{key:"_Start",value:function _Start(){if(this._running){return}window.addEventListener("keydown",this._KHandle);window.addEventListener("keyup",this._KHandle);window.addEventListener("keypress",this._KHandle);window.addEventListener("blur",this._KBlur);this._running=true}},{key:"_Stop",value:function _Stop(){if(!this._running){return}window.removeEventListener("keydown",this._KHandle);window.removeEventListener("keyup",this._KHandle);window.removeEventListener("keypress",this._KHandle);window.removeEventListener("blur",this._KBlur);this._running=false}},{key:"running",get:function get(){return this._running}},{key:"currentKeyEvent",get:function get(){return this._currentKeyEvent}},{key:"shiftKey",get:function get(){return this._shiftKey}},{key:"ctrlKey",get:function get(){return this._ctrlKey}},{key:"altKey",get:function get(){return this._altKey}},{key:"mouse",get:function get(){return this._mouse}},{key:"_KHandle",value:function _KHandle(p_evt){this._currentKeyEvent=p_evt;this._shiftKey=p_evt.shiftKey;this._ctrlKey=p_evt.ctrlKey;this._altKey=p_evt.altKey;var type=p_evt.type,key=p_evt.key,code=p_evt.code,which=p_evt.which;if(type==="keydown"){if(p_evt.repeat){this._B(INPUT.KEY_REPEAT);this._B("R_".concat(which))}else{this._down.S(which,true);this._B(INPUT.KEY_DOWN);this._B("D_".concat(which))}}else if(type==="keyup"){this._down.RM(which);this._B(INPUT.KEY_UP,which);this._B("U_".concat(which))}this._currentKeyEvent=null}},{key:"_KBlur",value:function _KBlur(p_evt){var keys=this._down.keys;for(var i=0,n=keys.length;i<n;i++){this._B(INPUT.KEY_UP,null);this._B("U_".concat(keys[i]),null)}this._down.Clear()}}],[{key:"shift",get:function get(){return this.instance.shiftKey}},{key:"ctrl",get:function get(){return this.instance.ctrlKey}},{key:"alt",get:function get(){return this.instance.altKey}},{key:"ONKeyUp",value:function ONKeyUp(p_key,p_fn){this.W("U_".concat(p_key),p_fn)}},{key:"OFFKeyUp",value:function OFFKeyUp(p_key,p_fn){this.Uw("U_".concat(p_key),p_fn)}},{key:"ONKeyDown",value:function ONKeyDown(p_key,p_fn){this.W("D_".concat(p_key),p_fn)}},{key:"OFFKeyDown",value:function OFFKeyDown(p_key,p_fn){this.Uw("D_".concat(p_key),p_fn)}},{key:"ONKeyRepeat",value:function ONKeyRepeat(p_key,p_fn){this.W("R_".concat(p_key),p_fn)}},{key:"OFFKeyRepeat",value:function OFFKeyRepeat(p_key,p_fn){this.Uw("R_".concat(p_key),p_fn)}},{key:"M",get:function get(){return this.instance._mouse}}]);return INPUT}(SingletonEx);_defineProperty(INPUT,"KEY_UP",Symbol("keyUp"));_defineProperty(INPUT,"KEY_DOWN",Symbol("keyDown"));_defineProperty(INPUT,"KEY_REPEAT",Symbol("keyRepeat"));mdl.xp["default"]=mdl.xp=INPUT},{336:195,18:21,14:27}],190:[function(rq,mdl,xp){"use strict";var KB=function KB(){_cCC(this,KB)};_defineProperty(KB,"_backspace",8);_defineProperty(KB,"_tab",9);_defineProperty(KB,"_enter",13);_defineProperty(KB,"_shift",16);_defineProperty(KB,"_ctrl",17);_defineProperty(KB,"_alt",18);_defineProperty(KB,"_pause",19);_defineProperty(KB,"_capsLock",20);_defineProperty(KB,"_escape",27);_defineProperty(KB,"_pageUp",33);_defineProperty(KB,"_space",32);_defineProperty(KB,"_pageDown",34);_defineProperty(KB,"_end",35);_defineProperty(KB,"_home",36);_defineProperty(KB,"_arrowLeft",37);_defineProperty(KB,"_arrowUp",38);_defineProperty(KB,"_arrowRight",39);_defineProperty(KB,"_arrowDown",40);_defineProperty(KB,"_printScreen",44);_defineProperty(KB,"_insert",45);_defineProperty(KB,"_delete",46);_defineProperty(KB,"_0",48);_defineProperty(KB,"_1",49);_defineProperty(KB,"_2",50);_defineProperty(KB,"_3",51);_defineProperty(KB,"_4",52);_defineProperty(KB,"_5",53);_defineProperty(KB,"_6",54);_defineProperty(KB,"_7",55);_defineProperty(KB,"_8",56);_defineProperty(KB,"_9",57);_defineProperty(KB,"_a",65);_defineProperty(KB,"_b",66);_defineProperty(KB,"_c",67);_defineProperty(KB,"_d",68);_defineProperty(KB,"_e",69);_defineProperty(KB,"_f",70);_defineProperty(KB,"_g",71);_defineProperty(KB,"_h",72);_defineProperty(KB,"_i",73);_defineProperty(KB,"_j",74);_defineProperty(KB,"_k",75);_defineProperty(KB,"_l",76);_defineProperty(KB,"_m",77);_defineProperty(KB,"_n",78);_defineProperty(KB,"_o",79);_defineProperty(KB,"_p",80);_defineProperty(KB,"_q",81);_defineProperty(KB,"_r",82);_defineProperty(KB,"_s",83);_defineProperty(KB,"_t",84);_defineProperty(KB,"_u",85);_defineProperty(KB,"_v",86);_defineProperty(KB,"_w",87);_defineProperty(KB,"_x",88);_defineProperty(KB,"_y",89);_defineProperty(KB,"_z",90);_defineProperty(KB,"_leftWindowKey",91);_defineProperty(KB,"_rightWindowKey",92);_defineProperty(KB,"_selectKey",93);_defineProperty(KB,"_numpad0",96);_defineProperty(KB,"_numpad1",97);_defineProperty(KB,"_numpad2",98);_defineProperty(KB,"_numpad3",99);_defineProperty(KB,"_numpad4",100);_defineProperty(KB,"_numpad5",101);_defineProperty(KB,"_numpad6",102);_defineProperty(KB,"_numpad7",103);_defineProperty(KB,"_numpad8",104);_defineProperty(KB,"_numpad9",105);_defineProperty(KB,"_multiply",106);_defineProperty(KB,"_add",107);_defineProperty(KB,"_subtract",109);_defineProperty(KB,"_decimalPoint",110);_defineProperty(KB,"_divide",111);_defineProperty(KB,"_f1",112);_defineProperty(KB,"_f2",113);_defineProperty(KB,"_f3",114);_defineProperty(KB,"_f4",115);_defineProperty(KB,"_f5",116);_defineProperty(KB,"_f6",117);_defineProperty(KB,"_f7",118);_defineProperty(KB,"_f8",119);_defineProperty(KB,"_f9",120);_defineProperty(KB,"_f10",121);_defineProperty(KB,"_f11",122);_defineProperty(KB,"_f12",123);_defineProperty(KB,"_numLock",144);_defineProperty(KB,"_scrollLock",145);_defineProperty(KB,"_myComputer",182);_defineProperty(KB,"_myCalculator",183);_defineProperty(KB,"_semiColon",186);_defineProperty(KB,"_equalSign",187);_defineProperty(KB,"_comma",188);_defineProperty(KB,"_dash",189);_defineProperty(KB,"_period",190);_defineProperty(KB,"_forwardSlash",191);_defineProperty(KB,"_openBracket",219);_defineProperty(KB,"_backSlash",220);_defineProperty(KB,"_closeBraket",221);_defineProperty(KB,"_singleQuote",222);mdl.xp["default"]=mdl.xp=KB},{}],191:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={b_Manipulator:rq(337),ImageManipulator:rq(338),TextManipulator:rq(339)}},{337:192,338:193,339:194}],192:[function(rq,mdl,xp){"use strict";var _rq251=rq(13),U=_rq251.U;var _rq252=rq(14),S=_rq252.S,__dOEx=_rq252.__dOEx;var UF=rq(314);var FlagEnum=rq(330);var b_Manipulator=function(){function b_Manipulator(){var p_element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_autoHide=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var p_sizeControl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_cCC(this,b_Manipulator);this._element=p_element;this._content=null;this._autoHide=p_autoHide;this._isVisible=true;if(p_sizeControl){this._sizeFlags=new FlagEnum(UF.sizes)}else{this._sizeFlags=null}}_cC(b_Manipulator,[{key:"isVisible",get:function get(){return this._isVisible}},{key:"element",get:function get(){return this._element},set:function set(v){if(this._element===v){return}var oldFlag=null;if(this._sizeFlags){var oldElement=this._element;oldFlag=this._sizeFlags._currentFlag;this._sizeFlags.S(null);if(oldElement){this._sizeFlags.RM(oldElement)}}this._element=v;if(this._sizeFlags){if(this._element){this._sizeFlags.A(this._element)}this._sizeFlags.S(oldFlag)}}},{key:"order",get:function get(){return this._element.style.order},set:function set(v){this._element.style.order=v}},{key:"content",get:function get(){return this._content}},{key:"size",get:function get(){return this._sizeFlags}},{key:"S",value:function S(v){var result=this._U(this._element,v);var oldContent=this._content;if(oldContent&&U.isInstanceOf(oldContent,__dOEx)){oldContent.Uw(S.UPDATED,this._OnContentU,this);oldContent.Uw(S.RENAMED,this._OnContentU,this);oldContent.Uw(S.RELEASED,this._OnContentReleased,this)}if(v&&U.isInstanceOf(this._content,__dOEx)){this._content=v;this._content.W(S.UPDATED,this._OnContentU,this);this._content.W(S.RENAMED,this._OnContentU,this);this._content.W(S.RELEASED,this._OnContentReleased,this)}else{this._content=null}return this._Toggle(result)}},{key:"_U",value:function _U(p_element,v){return true}},{key:"_OnContentU",value:function _OnContentU(){this._Toggle(this._U(this._element,this._content))}},{key:"_Toggle",value:function _Toggle(p_toggle){if(this._isVisible!=p_toggle&&this._autoHide){this._isVisible=p_toggle;if(!p_toggle){this._element.style.setProperty("display","none")}else{this._element.style.removeProperty("display")}}return p_toggle}},{key:"_OnContentReleased",value:function _OnContentReleased(p_content){this.content=null}}]);return b_Manipulator}();mdl.xp["default"]=mdl.xp=b_Manipulator},{330:184,314:206,14:27,13:268}],193:[function(rq,mdl,xp){"use strict";var _rq253=rq(13),U=_rq253.U,PATH=_rq253.PATH;var UI_ID=rq(317);var b_Manipulator=rq(337);var ImageManipulator=function(_b_Manipulator){_inherits(ImageManipulator,_b_Manipulator);var _super102=_createSuper(ImageManipulator);function ImageManipulator(){var p_element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_autoHide=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var p_sizeControl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_cCC(this,ImageManipulator);return _super102.call(this,p_element,p_autoHide,p_sizeControl)}_cC(ImageManipulator,[{key:"content",get:function get(){return this._element?this._element.style.backgroundImage:null}},{key:"_U",value:function _U(p_element,v){if(U.isVoid(v)){p_element.style.removeProperty("backgroundImage");return false}else{var path="";if(U.isString(v)){path=v}else if(UI_ID.ICON in v){path=v[UI_ID.ICON]}else if(UI_ID.PATH in v){path=v[UI_ID.PATH]}else if("img"in v){path=v.img}else if("objectURL"in v){path=v.objectURL}if(path===""||!U.isString(path)){return false}path=PATH.FULL(path);p_element.style.backgroundImage="url(".concat(path,")");return true}}}]);return ImageManipulator}(b_Manipulator);mdl.xp["default"]=mdl.xp=ImageManipulator},{317:207,337:192,13:268}],194:[function(rq,mdl,xp){"use strict";var _rq254=rq(13),U=_rq254.U;var HSLA=rq(340);var RGBA=rq(341);var b_Manipulator=rq(337);var TextManipulator=function(_b_Manipulator2){_inherits(TextManipulator,_b_Manipulator2);var _super103=_createSuper(TextManipulator);function TextManipulator(){var p_element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var p_autoHide=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var p_sizeControl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_cCC(this,TextManipulator);return _super103.call(this,p_element,p_autoHide,p_sizeControl)}_cC(TextManipulator,[{key:"content",get:function get(){return this._element?this._element.innerHTML:null}},{key:"uppercase",set:function set(v){if(v){this._element.style.setProperty("text-transform","uppercase")}else{this._element.style.removeProperty("text-transform")}}},{key:"ellipsis",set:function set(v){if(v){this._element.style.setProperty("white-space","nowrap");this._element.style.setProperty("overflow","hidden");this._element.style.setProperty("text-overflow","ellipsis")}else{this._element.style.removeProperty("white-space");this._element.style.removeProperty("overflow");this._element.style.removeProperty("text-overflow")}}},{key:"selectable",set:function set(v){if(v){this._element.style.setProperty("user-select","text")}else{this._element.style.removeProperty("user-select")}}},{key:"bold",set:function set(v){if(v){this._element.style.setProperty("font-weight","bolder")}else{this._element.style.removeProperty("font-weight")}}},{key:"italic",set:function set(v){if(v){this._element.style.setProperty("font-style","italic")}else{this._element.style.removeProperty("font-style")}}},{key:"color",set:function set(v){if(v){this._element.style.setProperty("color",v)}else{this._element.style.removeProperty("color")}}},{key:"_U",value:function _U(p_element,v){if(U.isVoid(v)){p_element.innerHTML="";return false}else{var text="";if(U.isString(v)){text=v}else if("name"in v){text=v.name}else if("title"in v){text=v.title}else if("objectURL"in v){text=v.objectURL}if(text===""){return false}p_element.innerHTML=text;return true}}}]);return TextManipulator}(b_Manipulator);mdl.xp["default"]=mdl.xp=TextManipulator},{337:192,340:158,341:159,13:268}],195:[function(rq,mdl,xp){"use strict";var _rq255=rq(18),Dictionary=_rq255.Dictionary;var _rq256=rq(14),SingletonEx=_rq256.SingletonEx,DelayedCall=_rq256.DelayedCall;var US=rq(310);var M=function(_SingletonEx9){_inherits(M,_SingletonEx9);var _super104=_createSuper(M);function M(){_cCC(this,M);return _super104.call(this)}_cC(M,[{key:"_In",value:function _In(){_get(_gPO(M.prototype),"_In",this).call(this);this._running=false;this._using=new Array(0);this._usingDeprecated=new Array(0);this._position={x:0,y:0};this._clearUsing=new DelayedCall(this._Bind(this._ClearUsing));this._Bind(this._mDown);this._Bind(this._mUp);this._Bind(this._mMove);if(this._isBrowser){this._Start()}}},{key:"_Start",value:function _Start(){if(this._running){return}document.addEventListener("mousedown",this._mDown);document.addEventListener("mouseup",this._mUp);this._running=true}},{key:"_Stop",value:function _Stop(){if(!this._running){return}document.removeEventListener("mousedown",this._mDown);document.removeEventListener("mouseup",this._mUp);this._running=false}},{key:"running",get:function get(){return this._running}},{key:"position",get:function get(){return this._position}},{key:"StartUsing",value:function StartUsing(p_btns){var dIndex=this._usingDeprecated.indexOf(p_btns);if(dIndex!=-1){this._usingDeprecated.splice(dIndex,1)}if(this._using.includes(p_btns)){return}this._using.push(p_btns)}},{key:"StopUsing",value:function StopUsing(p_btns){if(this._usingDeprecated.includes(p_btns)){return}this._usingDeprecated.push(p_btns);this._clearUsing.Schedule()}},{key:"_IsUsing",value:function _IsUsing(p_btn){if(p_btn==M.BTN_LEFT){return false}for(var i=0,n=this._using.length;i<n;i++){if(p_btn in this._using[i]){return true}}return false}},{key:"_ClearUsing",value:function _ClearUsing(){for(var i=0,n=this._usingDeprecated.length;i<n;i++){var btns=this._usingDeprecated[i],index=this._using.indexOf(btns);if(index!=-1){this._using.splice(index,1)}}}},{key:"_mDown",value:function _mDown(p_evt){if(this._IsUsing(p_evt.button)){p_evt.preventDefault()}this._B(M.M_DOWN,p_evt)}},{key:"_mUp",value:function _mUp(p_evt){if(this._IsUsing(p_evt.button)){p_evt.preventDefault()}this._B(M.M_UP,p_evt)}},{key:"_mMove",value:function _mMove(p_evt){this._position.x=p_evt.clientX;this._position.y=p_evt.clientY}}],[{key:"M",get:function get(){return this.instance.mouse}},{key:"Localm",value:function Localm(p_el){var rect=p_el.getBoundingClientRect(),m=this.instance._position,x=m.x-rect.left,y=m.y-rect.top;return{x:x,y:y,normalized:{x:x/rect.width,y:y/rect.height}}}}]);return M}(SingletonEx);_defineProperty(M,"BTN_LEFT",0);_defineProperty(M,"BTN_MIDDLE",1);_defineProperty(M,"BTN_RIGHT",2);_defineProperty(M,"BTN_PREV",3);_defineProperty(M,"BTN_NEXT",4);_defineProperty(M,"DOWN",0);_defineProperty(M,"UP",1);_defineProperty(M,"RELEASE",2);_defineProperty(M,"RELEASE_TWICE",3);_defineProperty(M,"RELEASE_OUTSIDE",4);_defineProperty(M,"WHEEL",5);_defineProperty(M,"M_UP",Symbol("mouseUp"));_defineProperty(M,"M_DOWN",Symbol("mouseDown"));mdl.xp["default"]=mdl.xp=M},{310:208,18:21,14:27}],196:[function(rq,mdl,xp){"use strict";var _rq257=rq(13),U=_rq257.U,UDOM=_rq257.UDOM;var UI_ID=rq(317);var DOMTemplate=rq(342);var ImageManipulator=rq(321);var TextManipulator=rq(343);var __header="_".concat(UI_ID.HEADER);var __expandIcon="_expandIcon";var __icon="_".concat(UI_ID.ICON);var __label="_".concat(UI_ID.LABEL);var __body="_".concat(UI_ID.BODY);var TPLBodyExpand=function(_DOMTemplate){_inherits(TPLBodyExpand,_DOMTemplate);var _super105=_createSuper(TPLBodyExpand);function TPLBodyExpand(){_cCC(this,TPLBodyExpand);return _super105.call(this)}_cC(TPLBodyExpand,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var owner=_get(_gPO(TPLBodyExpand.prototype),"R",this).call(this,p_host,o),expIconOpts=U.G(o,"expandIcon",null),iconOpts=U.G(o,UI_ID.ICON,null),labelOpts=U.G(o,UI_ID.TITLE,null),expandIcon=owner[__expandIcon]=new ImageManipulator(owner[__expandIcon],expIconOpts&&"autoHide"in expIconOpts?expIconOpts.autoHide:false),icon=owner[__icon]=new ImageManipulator(owner[__icon],iconOpts&&"autoHide"in iconOpts?iconOpts.autoHide:true),label=owner[__label]=new TextManipulator(owner[__label],labelOpts&&"autoHide"in labelOpts?labelOpts.autoHide:false);if(expIconOpts){expandIcon.S(expIconOpts.url);if(expIconOpts.htitle){expandIcon.element.htitle=expIconOpts.htitle}if(expandIcon[UI_ID.CSS_CL]){expandIcon.element.classList.add(expandIcon[UI_ID.CSS_CL])}}if(iconOpts){icon.S(iconOpts);if(iconOpts[UI_ID.CSS_CL]){icon.element.classList.add(iconOpts[UI_ID.CSS_CL])}}if(labelOpts){label.S(labelOpts);if(labelOpts[UI_ID.CSS_CL]){label.element.classList.add(labelOpts[UI_ID.CSS_CL])}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLBodyExpand),"_CreateTemplate",this).call(this);this._A(UDOM.New("div",{class:UI_ID.HEADER}),__header);this._A(UDOM.New("span",{class:"".concat(UI_ID.ICON," expand")}),__expandIcon,__header);this._A(UDOM.New("span",{class:UI_ID.ICON}),__icon,__header);this._A(UDOM.New("span",{class:UI_ID.LABEL}),__label,__header);this._A(UDOM.New("div",{class:UI_ID.BODY}),__body)}}]);return TPLBodyExpand}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLBodyExpand},{342:174,321:193,343:194,317:207,13:268}],197:[function(rq,mdl,xp){"use strict";var _rq258=rq(13),U=_rq258.U,UDOM=_rq258.UDOM;var UI_ID=rq(317);var DOMTemplate=rq(342);var ImageManipulator=rq(321);var TextManipulator=rq(343);var __icon="_".concat(UI_ID.ICON);var __title="_".concat(UI_ID.TITLE);var __subtitle="_".concat(UI_ID.SUBTITLE);var __header="_".concat(UI_ID.HEADER);var __body="_".concat(UI_ID.BODY);var __titles="_titles";var TPLBodyHeaderTitles=function(_DOMTemplate2){_inherits(TPLBodyHeaderTitles,_DOMTemplate2);var _super106=_createSuper(TPLBodyHeaderTitles);function TPLBodyHeaderTitles(){_cCC(this,TPLBodyHeaderTitles);return _super106.call(this)}_cC(TPLBodyHeaderTitles,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var owner=_get(_gPO(TPLBodyHeaderTitles.prototype),"R",this).call(this,p_host,o),iconOpts=U.G(o,UI_ID.ICON,null),titleOpts=U.G(o,UI_ID.TITLE,null),subtitleOpts=U.G(o,UI_ID.SUBTITLE,null),icon=owner[__icon]=new ImageManipulator(owner[__icon],iconOpts&&"autoHide"in iconOpts?iconOpts.autoHide:false),title=owner[__title]=new TextManipulator(owner[__title],titleOpts&&"autoHide"in titleOpts?titleOpts.autoHide:false),subtitle=owner[__subtitle]=new TextManipulator(owner[__subtitle],subtitleOpts&&"autoHide"in subtitleOpts?subtitleOpts.autoHide:false);if(iconOpts){icon.S(iconOpts);if(iconOpts[UI_ID.CSS_CL]){icon.element.classList.add(iconOpts[UI_ID.CSS_CL])}}if(titleOpts){title.S(titleOpts);if(titleOpts[UI_ID.CSS_CL]){title.element.classList.add(titleOpts[UI_ID.CSS_CL])}}if(subtitleOpts){subtitle.S(subtitleOpts);if(subtitleOpts[UI_ID.CSS_CL]){subtitle.element.classList.add(subtitleOpts[UI_ID.CSS_CL])}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLBodyHeaderTitles),"_CreateTemplate",this).call(this);this._A(UDOM.New("div",{class:UI_ID.HEADER}),__header);this._A(UDOM.New("span",{class:UI_ID.ICON}),__icon,__header);this._A(UDOM.New("span",{class:"titles"}),__titles,__header);this._A(UDOM.New("span",{class:UI_ID.TITLE}),__title,__titles);this._A(UDOM.New("span",{class:UI_ID.SUBTITLE}),__subtitle,__titles);this._A(UDOM.New("div",{class:UI_ID.BODY}),__body)}}]);return TPLBodyHeaderTitles}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLBodyHeaderTitles},{342:174,321:193,343:194,317:207,13:268}],198:[function(rq,mdl,xp){"use strict";var _rq259=rq(13),U=_rq259.U,UDOM=_rq259.UDOM;var UI_ID=rq(317);var DOMTemplate=rq(342);var ImageManipulator=rq(321);var TextManipulator=rq(343);var __expandIcon="_expandIcon";var __icon="_".concat(UI_ID.ICON);var __label="_".concat(UI_ID.LABEL);var TPLFacadeExpandLabel=function(_DOMTemplate3){_inherits(TPLFacadeExpandLabel,_DOMTemplate3);var _super107=_createSuper(TPLFacadeExpandLabel);function TPLFacadeExpandLabel(){_cCC(this,TPLFacadeExpandLabel);return _super107.call(this)}_cC(TPLFacadeExpandLabel,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var owner=_get(_gPO(TPLFacadeExpandLabel.prototype),"R",this).call(this,p_host,o),expIconOpts=U.G(o,"expandIcon",null),iconOpts=U.G(o,UI_ID.ICON,null),labelOpts=U.G(o,UI_ID.TITLE,null),expandIcon=owner[__expandIcon]=new ImageManipulator(owner[__expandIcon],expIconOpts&&"autoHide"in expIconOpts?expIconOpts.autoHide:false),icon=owner[__icon]=new ImageManipulator(owner[__icon],iconOpts&&"autoHide"in iconOpts?iconOpts.autoHide:true),label=owner[__label]=new TextManipulator(owner[__label],labelOpts&&"autoHide"in labelOpts?labelOpts.autoHide:false);if(expIconOpts){expandIcon.S(expIconOpts.url);if(expIconOpts.htitle){expandIcon.element.htitle=expIconOpts.htitle}if(expandIcon[UI_ID.CSS_CL]){expandIcon.element.classList.add(expandIcon[UI_ID.CSS_CL])}}if(iconOpts){icon.S(iconOpts);if(iconOpts[UI_ID.CSS_CL]){icon.element.classList.add(iconOpts[UI_ID.CSS_CL])}}if(labelOpts){label.S(labelOpts);if(labelOpts[UI_ID.CSS_CL]){label.element.classList.add(labelOpts[UI_ID.CSS_CL])}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLFacadeExpandLabel),"_CreateTemplate",this).call(this);this._A(UDOM.New("span",{class:"".concat(UI_ID.ICON," expand")}),__expandIcon);this._A(UDOM.New("span",{class:UI_ID.ICON}),__icon);this._A(UDOM.New("span",{class:UI_ID.LABEL}),__label)}}]);return TPLFacadeExpandLabel}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLFacadeExpandLabel},{342:174,321:193,343:194,317:207,13:268}],199:[function(rq,mdl,xp){"use strict";var _rq260=rq(13),U=_rq260.U,UDOM=_rq260.UDOM;var UI_ID=rq(317);var DOMTemplate=rq(342);var ImageManipulator=rq(321);var TextManipulator=rq(343);var __expandIcon="_expandIcon";var __icon="_".concat(UI_ID.ICON);var __title="_".concat(UI_ID.TITLE);var TPLFacadeExpandTitle=function(_DOMTemplate4){_inherits(TPLFacadeExpandTitle,_DOMTemplate4);var _super108=_createSuper(TPLFacadeExpandTitle);function TPLFacadeExpandTitle(){var _this15;_cCC(this,TPLFacadeExpandTitle);_this15=_super108.call(this);return _this15}_cC(TPLFacadeExpandTitle,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var owner=_get(_gPO(TPLFacadeExpandTitle.prototype),"R",this).call(this,p_host,o),expIconOpts=U.G(o,"expandIcon",null),iconOpts=U.G(o,UI_ID.ICON,null),titleOpts=U.G(o,UI_ID.TITLE,null),expandIcon=owner[__expandIcon]=new ImageManipulator(owner[__expandIcon],expIconOpts&&"autoHide"in expIconOpts?expIconOpts.autoHide:false),icon=owner[__icon]=new ImageManipulator(owner[__icon],iconOpts&&"autoHide"in iconOpts?iconOpts.autoHide:true),title=owner[__title]=new TextManipulator(owner[__title],titleOpts&&"autoHide"in titleOpts?titleOpts.autoHide:false);if(expIconOpts){expandIcon.S(expIconOpts.url);if(expIconOpts.htitle){expandIcon.element.htitle=expIconOpts.htitle}if(expandIcon[UI_ID.CSS_CL]){expandIcon.element.classList.add(expandIcon[UI_ID.CSS_CL])}}if(iconOpts){icon.S(iconOpts);if(iconOpts[UI_ID.CSS_CL]){icon.element.classList.add(iconOpts[UI_ID.CSS_CL])}}if(titleOpts){title.S(titleOpts);if(titleOpts[UI_ID.CSS_CL]){title.element.classList.add(titleOpts[UI_ID.CSS_CL])}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLFacadeExpandTitle),"_CreateTemplate",this).call(this);this._A(UDOM.New("span",{class:"".concat(UI_ID.ICON," expand")}),__expandIcon);this._A(UDOM.New("span",{class:UI_ID.ICON}),__icon);this._A(UDOM.New("span",{class:UI_ID.TITLE}),__title)}}]);return TPLFacadeExpandTitle}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLFacadeExpandTitle},{342:174,321:193,343:194,317:207,13:268}],200:[function(rq,mdl,xp){"use strict";var _rq261=rq(13),U=_rq261.U,UDOM=_rq261.UDOM;var UI_ID=rq(317);var DOMTemplate=rq(342);var ImageManipulator=rq(321);var TextManipulator=rq(343);var __icon="_".concat(UI_ID.ICON);var __label="_".concat(UI_ID.LABEL);var TPLFacadeLabel=function(_DOMTemplate5){_inherits(TPLFacadeLabel,_DOMTemplate5);var _super109=_createSuper(TPLFacadeLabel);function TPLFacadeLabel(){var _this16;_cCC(this,TPLFacadeLabel);_this16=_super109.call(this);return _this16}_cC(TPLFacadeLabel,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var owner=_get(_gPO(TPLFacadeLabel.prototype),"R",this).call(this,p_host,o),iconOpts=U.G(o,UI_ID.ICON,null),labelOpts=U.G(o,UI_ID.LABEL,null),icon=owner[__icon]=new ImageManipulator(owner[__icon],iconOpts&&"autoHide"in iconOpts?iconOpts.autoHide:true),label=owner[__label]=new TextManipulator(owner[__label],labelOpts&&"autoHide"in labelOpts?labelOpts.autoHide:false);if(iconOpts){icon.S(iconOpts);if(iconOpts[UI_ID.CSS_CL]){icon.element.classList.add(iconOpts[UI_ID.CSS_CL])}}if(labelOpts){label.S(labelOpts);if(labelOpts[UI_ID.CSS_CL]){label.element.classList.add(labelOpts[UI_ID.CSS_CL])}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLFacadeLabel),"_CreateTemplate",this).call(this);this._A(UDOM.New("span",{class:UI_ID.ICON}),__icon);this._A(UDOM.New("span",{class:UI_ID.LABEL}),__label)}}]);return TPLFacadeLabel}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLFacadeLabel},{342:174,321:193,343:194,317:207,13:268}],201:[function(rq,mdl,xp){"use strict";var _rq262=rq(13),U=_rq262.U,UDOM=_rq262.UDOM;var UI_ID=rq(317);var DOMTemplate=rq(342);var ImageManipulator=rq(321);var TextManipulator=rq(343);var __icon="_".concat(UI_ID.ICON);var __title="_".concat(UI_ID.TITLE);var __subtitle="_".concat(UI_ID.SUBTITLE);var TPLFacadeTitles=function(_DOMTemplate6){_inherits(TPLFacadeTitles,_DOMTemplate6);var _super110=_createSuper(TPLFacadeTitles);function TPLFacadeTitles(){_cCC(this,TPLFacadeTitles);return _super110.call(this)}_cC(TPLFacadeTitles,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var owner=_get(_gPO(TPLFacadeTitles.prototype),"R",this).call(this,p_host,o),iconOpts=U.G(o,UI_ID.ICON,null),titleOpts=U.G(o,UI_ID.TITLE,null),subtitleOpts=U.G(o,UI_ID.SUBTITLE,null),icon=owner[__icon]=new ImageManipulator(owner[__icon],iconOpts&&"autoHide"in iconOpts?iconOpts.autoHide:true),title=owner[__title]=new TextManipulator(owner[__title],titleOpts&&"autoHide"in titleOpts?titleOpts.autoHide:false),subtitle=owner[__subtitle]=new TextManipulator(owner[__subtitle],subtitleOpts&&"autoHide"in subtitleOpts?subtitleOpts.autoHide:false);if(iconOpts){icon.S(iconOpts);if(iconOpts[UI_ID.CSS_CL]){icon.element.classList.add(iconOpts[UI_ID.CSS_CL])}}if(titleOpts){title.S(titleOpts);if(titleOpts[UI_ID.CSS_CL]){title.element.classList.add(titleOpts[UI_ID.CSS_CL])}}if(subtitleOpts){subtitle.S(subtitleOpts);if(subtitleOpts[UI_ID.CSS_CL]){subtitle.element.classList.add(subtitleOpts[UI_ID.CSS_CL])}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLFacadeTitles),"_CreateTemplate",this).call(this);this._A(UDOM.New("span",{class:UI_ID.ICON}),__icon);this._A(UDOM.New("span",{class:UI_ID.TITLE}),__title);this._A(UDOM.New("span",{class:UI_ID.SUBTITLE}),__subtitle)}}]);return TPLFacadeTitles}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLFacadeTitles},{342:174,321:193,343:194,317:207,13:268}],202:[function(rq,mdl,xp){"use strict";var _rq263=rq(13),U=_rq263.U,UDOM=_rq263.UDOM;var UI_ID=rq(317);var DOMTemplate=rq(342);var __header="_".concat(UI_ID.HEADER);var __body="_".concat(UI_ID.BODY);var __footer="_".concat(UI_ID.FOOTER);var TPLHeaderBodyFooter=function(_DOMTemplate7){_inherits(TPLHeaderBodyFooter,_DOMTemplate7);var _super111=_createSuper(TPLHeaderBodyFooter);function TPLHeaderBodyFooter(){_cCC(this,TPLHeaderBodyFooter);return _super111.call(this)}_cC(TPLHeaderBodyFooter,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLHeaderBodyFooter),"_CreateTemplate",this).call(this);this._A(UDOM.New("div",{class:UI_ID.HEADER}),__header);this._A(UDOM.New("div",{class:UI_ID.BODY}),__body);this._A(UDOM.New("div",{class:UI_ID.FOOTER}),__footer)}}]);return TPLHeaderBodyFooter}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLHeaderBodyFooter},{342:174,317:207,13:268}],203:[function(rq,mdl,xp){"use strict";var _rq264=rq(14),NFOS=_rq264.NFOS,S=_rq264.S,POOL=_rq264.POOL;var UI=rq(315);var UI_ID=rq(317);var US=rq(326);var ExtExpand=rq(344);var CgBuilder=rq(345);var TreeItem=rq(346);var TPLBodyExpand=rq(347);var TreeItemGroup=function(_TreeItem){_inherits(TreeItemGroup,_TreeItem);var _super112=_createSuper(TreeItemGroup);function TreeItemGroup(){_cCC(this,TreeItemGroup);return _super112.call(this)}_cC(TreeItemGroup,[{key:"_In",value:function _In(){_get(_gPO(TreeItemGroup.prototype),"_In",this).call(this);this._tplClass=TPLBodyExpand;this._extExpand=this._interactions.A(ExtExpand);this._extExpand._toggled=false;this._extExpand.W(US.EXPANDED,this._Expand,this);this._extExpand.W(US.COLLAPSED,this._Collapse,this);this._builder=null;this._expandIcon=null}},{key:"_pIn",value:function _pIn(){_get(_gPO(TreeItemGroup.prototype),"_pIn",this).call(this);this._SupBuilder();this._extExpand.Sup(this,this._body,this._expandIcon.element);this.order=0}},{key:"depth",set:function set(v){_set(_gPO(TreeItemGroup.prototype),"depth",v,this,true);var depthPlusOne=v+1,keys=this._builder._map.keys;for(var i=0,n=keys.length;i<n;i++){this._builder._map.get(keys[i]).depth=depthPlusOne}}},{key:"_SupBuilder",value:function _SupBuilder(){this._builder=POOL.Rt(CgBuilder);this._builder.owner=this;this._builder.host=this._body;this._builder._defaultItemClass=TreeItem;this._builder._defaultGroupClass=TreeItemGroup;this._builder.W(S.ITEM_ADDED,this._OnBuilderItemAd,this);this._builder.W(S.ITEM_REMOVED,this._OnBuilderItemRMd,this)}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._icon.S(v)}},{key:"label",get:function get(){return this._label},set:function set(v){this._label.S(v)}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch"},":host(.expanded)":{height:"auto"},".header":{position:"relative",flex:"0 0 auto"},".body":{position:"relative",flex:"1 0 auto",display:"none","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch","min-width":0},":host(.expanded) .body":{display:"flex"},".item":{flex:"1 1 auto"}}}},{key:"_R",value:function _R(){var _this$_tplOptions;this._tplOptions=(_this$_tplOptions={},_defineProperty(_this$_tplOptions,UI_ID.OWNER,this),_defineProperty(_this$_tplOptions,UI_ID.ICON,{autoHide:true}),_defineProperty(_this$_tplOptions,"expandIcon",{htitle:"Expand"}),_this$_tplOptions);_get(_gPO(TreeItemGroup.prototype),"_R",this).call(this);this._icon.autoHide=true;this._toolbarCtnr=this._header;this.focusArea=this._header;this._dragActivator=this._header;this._dragFeedbackHost=this._header}},{key:"Activate",value:function Activate(p_evt){if(this._toolbar&&this._toolbar.focused){return}_get(_gPO(TreeItemGroup.prototype),"Activate",this).call(this,p_evt)}},{key:"AltActivate",value:function AltActivate(p_evt){if(this._toolbar&&this._toolbar.focused){return}if(!_get(_gPO(TreeItemGroup.prototype),"AltActivate",this).call(this,p_evt)){return false}this._extExpand.Toggle()}},{key:"Expand",value:function Expand(){this._extExpand.Expand()}},{key:"_Expand",value:function _Expand(){if(this._data){this._data.expanded=true;this._builder.Enable()}this._expandIcon.rotation=90}},{key:"Collapse",value:function Collapse(){this._extExpand.Collapse()}},{key:"_Collapse",value:function _Collapse(){if(this._data){this._data.expanded=false}this._builder.Disable();this._expandIcon.rotation=0}},{key:"_OnDataCh",value:function _OnDataCh(p_oldData){_get(_gPO(TreeItemGroup.prototype),"_OnDataCh",this).call(this,p_oldData);this._builder.catalog=this._data;if(this._data){if(this._extExpand.isExpanded){this._data.expanded=true}}else{this._extExpand.Collapse()}}},{key:"_OnBuilderItemAd",value:function _OnBuilderItemAd(p_builder,it,p_widget){p_widget.classList.add("item");p_widget.depth=this._depth+1}},{key:"_OnBuilderItemRMd",value:function _OnBuilderItemRMd(p_builder,it,p_widget){p_widget.classList.remove("item")}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(TreeItemGroup.prototype),"_CleanUp",this).call(this);this.Collapse()}}]);return TreeItemGroup}(TreeItem);_defineProperty(TreeItemGroup,"__NFO__",NFOS.Ext({css:["@/tree/tree-group.css"]},TreeItem,["css"]));mdl.xp["default"]=mdl.xp=TreeItemGroup;UI.Register("nkmjs-tree-item-group",TreeItemGroup,"ul")},{344:178,345:181,347:196,315:209,317:207,326:208,346:204,14:27}],204:[function(rq,mdl,xp){"use strict";var _rq265=rq(13),U=_rq265.U,UDOM=_rq265.UDOM;var _rq266=rq(14),NFOS=_rq266.NFOS,COMMON_FLAG=_rq266.COMMON_FLAG;var _rq267=rq(34),CSS=_rq267.CSS;var UI=rq(315);var UI_ID=rq(317);var M=rq(328);var DOMTemplate=rq(342);var T_bar=rq(348);var TPLFacadeLabel=rq(349);var CgW=rq(350);var TreeItem=function(_CgW){_inherits(TreeItem,_CgW);var _super113=_createSuper(TreeItem);function TreeItem(){var _this17;_cCC(this,TreeItem);_this17=_super113.call(this);_this17.depth=0;return _this17}_cC(TreeItem,[{key:"_In",value:function _In(){this.default_SelectOnActivation=U.Default(this.default_SelectOnActivation,true);_get(_gPO(TreeItem.prototype),"_In",this).call(this);this._notifiesSelectionStack=true;this._tplClass=TPLFacadeLabel;this._toolbarClass=T_bar;this._toolbar=null;this._toolbarCtnr=null;this._depth=0}},{key:"_pIn",value:function _pIn(){_get(_gPO(TreeItem.prototype),"_pIn",this).call(this);this.order=1}},{key:"depth",get:function get(){return this._depth},set:function set(v){this._depth=v;this.style.setProperty("--depth",this._depth)}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._icon.S(v)}},{key:"label",get:function get(){return this._label},set:function set(v){this._label.S(v)}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{position:"relative","min-width":0},".toolbar":{flex:"0 0 auto"}},_get(_gPO(TreeItem.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){if(!this._tplOptions){var _this$_tplOptions2;this._tplOptions=(_this$_tplOptions2={},_defineProperty(_this$_tplOptions2,UI_ID.OWNER,this),_defineProperty(_this$_tplOptions2,UI_ID.ICON,{autoHide:false}),_this$_tplOptions2)}DOMTemplate.R(this._tplClass,this,this._tplOptions);this._toolbarCtnr=this;this.focusArea=this}},{key:"_UInfos",value:function _UInfos(){if(this._itemData){this._flavorEnum.S(this._itemData.isDirty?COMMON_FLAG.WARNING:null);if(!this._label.S(this._itemData)){this._label.S(this._data.options)}if(!this._icon.S(this._itemData)){this._icon.S(this._data.options)}}else{this._flavorEnum.S(null);this._label.S(this._data.options);this._icon.S(this._data.options)}}},{key:"_BuildCommand",value:function _BuildCommand(p_cmd){if(!this._toolbar){this._toolbar=this.A(this._toolbarClass,"toolbar",this._toolbarCtnr)}this._toolbar.CreateHandle({command:p_cmd,isCommandTrigger:false,trigger:{thisArg:this,fn:this._ExecuteCommand,arg:p_cmd}})}},{key:"_ClearCommandHandles",value:function _ClearCommandHandles(){_get(_gPO(TreeItem.prototype),"_ClearCommandHandles",this).call(this);if(this._toolbar){this._toolbar.Release();this._toolbar=null}}},{key:"_CleanUp",value:function _CleanUp(){this._depth=0;_get(_gPO(TreeItem.prototype),"_CleanUp",this).call(this)}}]);return TreeItem}(CgW);_defineProperty(TreeItem,"__NFO__",NFOS.Ext({css:["@/tree/tree-item.css"]},CgW,["css"]));mdl.xp["default"]=mdl.xp=TreeItem;UI.Register("nkmjs-tree-item",TreeItem,"li")},{342:174,348:187,328:195,349:200,315:209,317:207,350:215,14:27,34:155,13:268}],205:[function(rq,mdl,xp){"use strict";var _rq268=rq(13),U=_rq268.U;var _rq269=rq(14),NFOS=_rq269.NFOS;var UI=rq(315);var TreeItemGroup=rq(351);var TreeRoot=function(_TreeItemGroup){_inherits(TreeRoot,_TreeItemGroup);var _super114=_createSuper(TreeRoot);function TreeRoot(){_cCC(this,TreeRoot);return _super114.call(this)}_cC(TreeRoot,[{key:"_In",value:function _In(){this.default_SelectOnActivation=false;_get(_gPO(TreeRoot.prototype),"_In",this).call(this);this._selectOnActivation=false;this._searchBtn=null;this._InSelectionStack()}},{key:"_pIn",value:function _pIn(){_get(_gPO(TreeRoot.prototype),"_pIn",this).call(this)}},{key:"_R",value:function _R(){_get(_gPO(TreeRoot.prototype),"_R",this).call(this);this.style.setProperty("--tree_size","var(--size_s)")}},{key:"_OpenFind",value:function _OpenFind(){}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(TreeRoot.prototype),"_CleanUp",this).call(this)}}]);return TreeRoot}(TreeItemGroup);_defineProperty(TreeRoot,"__NFO__",NFOS.Ext({css:["@/tree/tree-root.css"]},TreeItemGroup,["css"]));mdl.xp["default"]=mdl.xp=TreeRoot;UI.Register("nkmjs-tree-root",TreeRoot)},{315:209,351:203,14:27,13:268}],206:[function(rq,mdl,xp){"use strict";var _rq270=rq(14),COMMON_FLAG=_rq270.COMMON_FLAG;var UF=function UF(){_cCC(this,UF)};_defineProperty(UF,"NONE","none");_defineProperty(UF,"SELF","self");_defineProperty(UF,"INSIDE","vertical");_defineProperty(UF,"OUTSIDE","horizontal");_defineProperty(UF,"VERTICAL","vertical");_defineProperty(UF,"HORIZONTAL","horizontal");_defineProperty(UF,"VERTICAL_AND_HORIZONTAL","vertical horizontal");_defineProperty(UF,"orientations",[UF.VERTICAL,UF.HORIZONTAL,UF.VERTICAL_AND_HORIZONTAL]);_defineProperty(UF,"EXPANDED","expanded");_defineProperty(UF,"COLLAPSED","collapsed");_defineProperty(UF,"DISABLED","disabled");_defineProperty(UF,"IDLE","idle");_defineProperty(UF,"FOCUSED","focused");_defineProperty(UF,"istates",[UF.DISABLED,UF.IDLE,UF.FOCUSED]);_defineProperty(UF,"ACTIVATED","activated");_defineProperty(UF,"SELECTED","selected");_defineProperty(UF,"TOGGLED","toggled");_defineProperty(UF,"DRAGGED","dragged");_defineProperty(UF,"ALLOW_DROP","allow-drop");_defineProperty(UF,"LEFT","left");_defineProperty(UF,"RIGHT","right");_defineProperty(UF,"TOP","top");_defineProperty(UF,"BOTTOM","bottom");_defineProperty(UF,"TOP_LEFT","".concat(UF.TOP," ").concat(UF.LEFT));_defineProperty(UF,"TOP_RIGHT","".concat(UF.TOP," ").concat(UF.RIGHT));_defineProperty(UF,"BOTTOM_LEFT","".concat(UF.BOTTOM," ").concat(UF.LEFT));_defineProperty(UF,"BOTTOM_RIGHT","".concat(UF.BOTTOM," ").concat(UF.RIGHT));_defineProperty(UF,"placement",[UF.LEFT,UF.RIGHT,UF.TOP,UF.BOTTOM,UF.TOP_LEFT,UF.TOP_RIGHT,UF.BOTTOM_LEFT,UF.BOTTOM_RIGHT]);_defineProperty(UF,"NO_ICON","no-icon");_defineProperty(UF,"NO_LABEL","no-label");_defineProperty(UF,"NO_SCALE","no-scale");_defineProperty(UF,"FIXED_SIZE","fixed-size");_defineProperty(UF,"SIZE_XS","size-xs");_defineProperty(UF,"SIZE_S","size-s");_defineProperty(UF,"SIZE_M","size-m");_defineProperty(UF,"SIZE_L","size-l");_defineProperty(UF,"SIZE_XL","size-xl");_defineProperty(UF,"sizes",[UF.SIZE_XS,UF.SIZE_S,UF.SIZE_M,UF.SIZE_L,UF.SIZE_XL]);_defineProperty(UF,"CTA","cta");_defineProperty(UF,"flavors",[COMMON_FLAG.INFOS,COMMON_FLAG.WARNING,COMMON_FLAG.ERROR,UF.CTA]);_defineProperty(UF,"flavorsExtended",[COMMON_FLAG.INFOS,COMMON_FLAG.WARNING,COMMON_FLAG.ERROR,COMMON_FLAG.READY,COMMON_FLAG.DIRTY,COMMON_FLAG.LOADING,COMMON_FLAG.PROCESSING,COMMON_FLAG.WAITING,COMMON_FLAG.active,UF.CTA]);_defineProperty(UF,"MINIMAL","minimal");_defineProperty(UF,"FRAME","frame");_defineProperty(UF,"variants",[UF.MINIMAL,UF.FRAME]);mdl.xp["default"]=mdl.xp=UF},{14:27}],207:[function(rq,mdl,xp){"use strict";var _rq271=rq(14),COM_ID=_rq271.COM_ID;var UI_ID=function UI_ID(){_cCC(this,UI_ID)};_defineProperty(UI_ID,"UID",COM_ID.UID);_defineProperty(UI_ID,"NAME",COM_ID.NAME);_defineProperty(UI_ID,"TITLE",COM_ID.TITLE);_defineProperty(UI_ID,"MESSAGE",COM_ID.MESSAGE);_defineProperty(UI_ID,"ICON",COM_ID.ICON);_defineProperty(UI_ID,"PATH",COM_ID.PATH);_defineProperty(UI_ID,"DATA",COM_ID.DATA);_defineProperty(UI_ID,"CMD_PRIMARY",COM_ID.CMD_PRIMARY);_defineProperty(UI_ID,"CMD_SECONDARY",COM_ID.CMD_SECONDARY);_defineProperty(UI_ID,"CMD_LIST",COM_ID.CMD_LIST);_defineProperty(UI_ID,"OWNER",COM_ID.OWNER);_defineProperty(UI_ID,"LABEL","label");_defineProperty(UI_ID,"SUBTITLE","subtitle");_defineProperty(UI_ID,"HEADER","header");_defineProperty(UI_ID,"BODY","body");_defineProperty(UI_ID,"FOOTER","footer");_defineProperty(UI_ID,"VIEW","view");_defineProperty(UI_ID,"CONTROLS","controls");_defineProperty(UI_ID,"CSS_CL","csscl");mdl.xp["default"]=mdl.xp=UI_ID},{14:27}],208:[function(rq,mdl,xp){"use strict";var US=function US(){_cCC(this,US)};_defineProperty(US,"PAINTED",Symbol("painted"));_defineProperty(US,"UNPAINTED",Symbol("unpainted"));_defineProperty(US,"FIRST_PAINT",Symbol("first-paint"));_defineProperty(US,"CHILD_ADDED",Symbol("childAd"));_defineProperty(US,"CHILD_MOVED",Symbol("childMoved"));_defineProperty(US,"CHILD_REMOVED",Symbol("childRMd"));_defineProperty(US,"SELECTION_GAIN",Symbol("selectionGain"));_defineProperty(US,"SELECTION_LOST",Symbol("selectionLost"));_defineProperty(US,"FOCUS_GAIN",Symbol("focusGain"));_defineProperty(US,"FOCUS_LOST",Symbol("focusLost"));_defineProperty(US,"ACTIVATED",Symbol("activated"));_defineProperty(US,"ALT_ACTIVATED",Symbol("altActivated"));_defineProperty(US,"TRIGGERED",Symbol("triggered"));_defineProperty(US,"DEACTIVATED",Symbol("deactivated"));_defineProperty(US,"DATA_CHANGED",Symbol("dataCh"));_defineProperty(US,"DISPLAY_REQUESTED",Symbol("focusRequested"));_defineProperty(US,"CLOSE_REQUESTED",Symbol("closeRequested"));_defineProperty(US,"EXPANDED",Symbol("expanded"));_defineProperty(US,"COLLAPSED",Symbol("collapsed"));_defineProperty(US,"DRAG_STARTED",Symbol("dragStarted"));_defineProperty(US,"DRAGGED",Symbol("dragged"));_defineProperty(US,"DRAG_ENDED",Symbol("dragEnded"));_defineProperty(US,"DROPPED",Symbol("dropped"));mdl.xp["default"]=mdl.xp=US},{}],209:[function(rq,mdl,xp){"use strict";var _rq272=rq(13),U=_rq272.U,UDOM=_rq272.UDOM;var _rq273=rq(18),List=_rq273.List,Dictionary=_rq273.Dictionary,DictionaryList=_rq273.DictionaryList;var _rq274=rq(14),SingletonEx=_rq274.SingletonEx,DelayedCall=_rq274.DelayedCall;var US=rq(310);var dHel=rq(323);var UI=function(_SingletonEx10){_inherits(UI,_SingletonEx10);var _super115=_createSuper(UI);function UI(){_cCC(this,UI);return _super115.call(this)}_cC(UI,[{key:"_In",value:function _In(){_get(_gPO(UI.prototype),"_In",this).call(this);this._uiPool=new DictionaryList;this._uiTypes=new Dictionary;this._dirtyElements=new List(0);this._Bind(this._Return);this._delayedU=new DelayedCall(this._Bind(this._UDirty))}},{key:"_Register",value:function _Register(p_id,p_class){var p_extends=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"div";if(!U.isFunc(p_class)){throw new Error("Register used with invalid constructor : ".concat(p_class))}console.log(p_id);this._uiTypes.S(p_class,p_id);customElements.define(p_id,p_class)}},{key:"_Return",value:function _Return(p_displayObject){if(!U.isObject(p_displayObject)||!U.isInstanceOf(p_displayObject,dHel)){throw new Error("Return used with invalid object : ".concat(p_displayObject))}var key=p_displayObject.constructor;if(!this._uiTypes.Contains(key)){throw new Error("Return used with a never-registered object type : ".concat(key))}this._uiPool.S(key,p_displayObject)}},{key:"_Rt",value:function _Rt(p_class){var p_parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!this._uiTypes.Contains(p_class)){throw new Error("".concat(p_class," could not be found."))}var obj=this._uiPool.Pop(p_class);if(!obj){obj=new p_class;obj._returnFn=this._Return}obj.Wake();if(p_parent){p_parent.A(obj)}return obj}},{key:"_ADirty",value:function _ADirty(p_element){if(this._dirtyElements.A(p_element)){this._delayedU.Schedule()}}},{key:"_UDirty",value:function _UDirty(p_delta){this._dirtyElements.ForEach((function(it,p_index){it.ApplyTransforms()}));this._dirtyElements.Clear()}}],[{key:"Register",value:function Register(p_id,p_class){var p_extends=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"div";this.instance._Register(p_id,p_class,p_extends)}},{key:"RegisterGroup",value:function RegisterGroup(p_group){for(var member in p_group){this.instance._Register(member,p_group[member])}}},{key:"Rt",value:function Rt(p_class){var p_parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.instance._Rt(p_class,p_parent)}},{key:"ADirty",value:function ADirty(p_element){if(!p_element){return}this.instance._ADirty(p_element)}},{key:"DRAG_DATA",get:function get(){return this._dragData},set:function set(p_data){this._dragData=p_data}},{key:"DRAG_TARGET",get:function get(){return this._dragTarget},set:function set(p_target){this._dragTarget=p_target}},{key:"dragLength",get:function get(){return this._dragLength},set:function set(v){this._dragLength=v}},{key:"DragStarted",value:function DragStarted(p_data,p_target){var dLength=0;if(p_data){if(Array.isArray(p_data)){dLength=p_data.length}}this.dragLength=dLength;this.DRAG_DATA=p_data;this.DRAG_TARGET=p_target;this.instance._B(US.DRAG_STARTED,p_data)}},{key:"DragEnded",value:function DragEnded(){this.instance._B(US.DRAG_ENDED);this.DRAG_DATA=null;this.DRAG_TARGET=null;this.dragLength=0}}]);return UI}(SingletonEx);_defineProperty(UI,"_dragLength",0);_defineProperty(UI,"_dragData",null);_defineProperty(UI,"_dragTarget",null);mdl.xp["default"]=mdl.xp=UI},{323:173,310:208,18:21,14:27,13:268}],210:[function(rq,mdl,xp){"use strict";var _rq275=rq(13),U=_rq275.U,UDOM=_rq275.UDOM;var _rq276=rq(14),NFOS=_rq276.NFOS;var _rq277=rq(34),CSS=_rq277.CSS;var _rq278=rq(18),Dictionary=_rq278.Dictionary;var UI=rq(315);var UI_ID=rq(317);var US=rq(326);var UF=rq(314);var DOMTemplate=rq(342);var T_bar=rq(348);var TPLHeaderBodyFooter=rq(352);var DrawerNav=function(_T_bar){_inherits(DrawerNav,_T_bar);var _super116=_createSuper(DrawerNav);function DrawerNav(){_cCC(this,DrawerNav);return _super116.call(this)}_cC(DrawerNav,[{key:"_In",value:function _In(){_get(_gPO(DrawerNav.prototype),"_In",this).call(this);this._isHorizontalScrollEnabled=true;this._handlesMap=new Dictionary;this._currentHandle=null;this._header=null;this._body=null;this._footer=null;this._toolbar=null}},{key:"currentHandle",get:function get(){return this._currentHandle}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{display:"grid","justify-content":"stretch","align-items":"stretch"},".body":{flex:"1 1 auto",display:"flex","justify-content":"flex-start","align-items":"stretch"},".header, .footer":{flex:"0 0 auto"},":host(.vertical)":{"grid-template-rows":"max-content auto max-content"},":host(.vertical) .header":{"grid-row":"1"},":host(.vertical) .footer":{"grid-row":"3"},":host(.vertical) .body":{"grid-row":"2","flex-flow":"column nowrap","overflow-x":"hidden","overflow-y":"overlay",width:"100%","min-height":"0"},":host(.horizontal)":{"grid-template-columns":"max-content auto max-content"},":host(.horizontal) .header":{"grid-column":"1"},":host(.horizontal) .footer":{"grid-column":"3"},":host(.horizontal) .body":{"grid-column":"2","flex-flow":"row nowrap","overflow-x":"overlay","overflow-y":"hidden",height:"100%","min-width":"0"}},_get(_gPO(DrawerNav.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){DOMTemplate.R(TPLHeaderBodyFooter,this,_defineProperty({},UI_ID.OWNER,this));this._toolbar=this.A(T_bar,"toolbar",this._footer);this._orientation.AManaged(this._toolbar._orientation);this._toolbar.orientation=this.constructor.__default_orientation;this._sizeEnum.AManaged(this._toolbar._sizeEnum);this._toolbar.size=this.constructor.__default_size;this._wrapper=this._body;this.focusArea=this}},{key:"_OnSizeCh",value:function _OnSizeCh(p_newValue,p_oldValue){_get(_gPO(DrawerNav.prototype),"_OnSizeCh",this).call(this,p_newValue,p_oldValue);this._toolbar.size=p_newValue}},{key:"_OnOrientationCh",value:function _OnOrientationCh(p_newValue,p_oldValue){_get(_gPO(DrawerNav.prototype),"_OnOrientationCh",this).call(this,p_newValue,p_oldValue);this._orientation.Apply("orientation",this._handles)}},{key:"G",value:function G(it){return this._handlesMap.G(it)}},{key:"CreateHandle",value:function CreateHandle(it){var p_index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var handle=this._handlesMap.G(it);if(handle){return handle}handle=_get(_gPO(DrawerNav.prototype),"CreateHandle",this).call(this,it);this._handlesMap.S(it,handle);handle.data=it;handle.W(US.ACTIVATED,this._OnHandleActivated,this);if("orientation"in handle){handle.orientation=this._orientation.currentFlag}return handle}},{key:"RM",value:function RM(it){var handle=this._handlesMap.G(it);if(!handle){return null}handle.Release();return handle}},{key:"_OnHandleActivated",value:function _OnHandleActivated(p_handle){this._B(DrawerNav.HANDLE_ACTIVATED,this,p_handle,this._optionsMap.G(p_handle))}},{key:"_CleanUp",value:function _CleanUp(){this._handlesMap.Clear();_get(_gPO(DrawerNav.prototype),"_CleanUp",this).call(this)}}]);return DrawerNav}(T_bar);_defineProperty(DrawerNav,"__NFO__",NFOS.Ext({css:["@/views/drawer-nav.css"]},T_bar,["css"]));_defineProperty(DrawerNav,"HANDLE_ACTIVATED",Symbol("controlActivated"));_defineProperty(DrawerNav,"__default_orientation",UF.VERTICAL);mdl.xp["default"]=mdl.xp=DrawerNav;UI.Register("nkmjs-drawer-nav",DrawerNav)},{342:174,348:187,352:202,315:209,314:206,317:207,326:208,18:21,14:27,34:155,13:268}],211:[function(rq,mdl,xp){"use strict";var _rq279=rq(13),U=_rq279.U,UDOM=_rq279.UDOM;var _rq280=rq(14),NFOS=_rq280.NFOS,S=_rq280.S;var _rq281=rq(29),CgItem=_rq281.CgItem;var UI_ID=rq(317);var UI=rq(315);var US=rq(326);var UF=rq(314);var View=rq(353);var CgViewBuilder=rq(354);var DrawerNav=rq(355);var Drawer=function(_View){_inherits(Drawer,_View);var _super117=_createSuper(Drawer);function Drawer(){_cCC(this,Drawer);return _super117.call(this)}_cC(Drawer,[{key:"_In",value:function _In(){_get(_gPO(Drawer.prototype),"_In",this).call(this);this._empty=true;this._placholderViewClass=null;this._placeholderView=null;this._catalogViewBuilder=new CgViewBuilder;this._catalogViewBuilder.W(S.ITEM_ADDED,this._OnCgItemAd,this);this._catalogViewBuilder.W(S.ITEM_REMOVED,this._OnCgItemRMd,this);this._navClass=DrawerNav;this._nav=null;this._currentHandle=null;this._flags.A(this,UF.FIXED_SIZE);this._isCollapsable=true}},{key:"_pIn",value:function _pIn(){_get(_gPO(Drawer.prototype),"_pIn",this).call(this);this._nav.W(DrawerNav.HANDLE_ACTIVATED,this._OnHandleActivated,this);if(this._placholderViewClass){this._placeholderView=this.A(this._placholderViewClass,"view");this.currentView=this._placeholderView}}},{key:"isCollapsable",get:function get(){return this._isCollapsable},set:function set(v){this._isCollapsable=v}},{key:"_OnOrientationCh",value:function _OnOrientationCh(p_newValue,p_oldValue){_get(_gPO(Drawer.prototype),"_OnOrientationCh",this).call(this,p_newValue,p_oldValue);this._nav.orientation=p_newValue}},{key:"_Style",value:function _Style(){return{":host":{display:"grid","justify-content":"stretch"},".navigation":{},".view":{},":host(.vertical)":{"flex-flow":"row nowrap","grid-template-columns":"max-content auto"},":host(.vertical).navigation":{"grid-column":"1"},":host(.vertical).view":{"grid-column":"2","flex-flow":"column nowrap","overflow-x":"overlay","overflow-y":"overlay",width:"100%","min-height":"0"},":host(.horizontal)":{"grid-template-rows":"max-content auto"},":host(.horizontal).navigation":{"grid-row":"1"},":host(.horizontal).view":{"grid-row":"2","flex-flow":"row nowrap","overflow-x":"overlay","overflow-y":"overlay",height:"100%","min-width":"0"}}}},{key:"_R",value:function _R(){_get(_gPO(Drawer.prototype),"_R",this).call(this);this._nav=this.A(this._navClass,"navigation");this._orientation.AManaged(this._nav._orientation);this._nav.orientation=this.constructor.__default_orientation}},{key:"catalog",get:function get(){return this._catalogViewBuilder.catalog},set:function set(v){this._catalogViewBuilder.catalog=v}},{key:"_OnCgItemAd",value:function _OnCgItemAd(p_builder,it,p_mappedView){var handle=this._nav.CreateHandle(it);handle.W(US.CLOSE_REQUESTED,this._OnHandleCloseRequest,this);p_mappedView.W(US.DISPLAY_REQUESTED,this._OnViewRequestDisplay,this);p_mappedView.visible=false;p_mappedView.classList.add(UI_ID.VIEW);this.A(p_mappedView);this._B(Drawer.VIEW_ADDED,this,p_mappedView,handle);if(this._empty){this._OnDrawerNonEmpty();this._OnViewRequestDisplay(p_mappedView)}return p_mappedView}},{key:"_OnCgItemRMd",value:function _OnCgItemRMd(p_builder,it,p_mappedView){var handle=this._nav.RM(it);if(this.currentHandle===handle){this.currentHandle=null}if(p_mappedView===this.currentView){this.currentView=null;if(this._nav._handles.length===0){this._OnDrawerEmpty()}else{this.currentHandle=this._nav._handles[0]}}}},{key:"_OnHandleActivated",value:function _OnHandleActivated(p_nav,p_handle){var view=this._catalogViewBuilder.G(p_handle.data);if(!U.isInstanceOf(view,View)){return}if(this._isCollapsable){if(this._currentView===view){this.currentView=null;return}}view.RequestDisplay()}},{key:"_OnHandleCloseRequest",value:function _OnHandleCloseRequest(p_handle){var catalogItem=p_handle.data;catalogItem.Release()}},{key:"_OnViewRequestDisplay",value:function _OnViewRequestDisplay(p_view){this.currentView=p_view}},{key:"_OnDrawerEmpty",value:function _OnDrawerEmpty(){this._empty=true;this._B(Drawer.EMPTY,this);console.log(this._placeholderView);this.currentView=this._placeholderView}},{key:"_OnDrawerNonEmpty",value:function _OnDrawerNonEmpty(p_view){this._empty=false}},{key:"currentHandle",get:function get(){return this._currentHandle},set:function set(v){if(this._currentHandle===v){return}var oldValue=this._currentHandle;this._currentHandle=v;if(oldValue){oldValue.Select(false)}if(this._currentHandle){this._currentHandle.Select(true)}this._OnCurrentHandleCh(oldValue)}},{key:"_OnCurrentHandleCh",value:function _OnCurrentHandleCh(p_oldTab){var catalogItem=this._currentHandle?this._currentHandle.data:null,view=this._catalogViewBuilder.G(catalogItem);if(!view){return}if(this.currentView!=view){view.RequestDisplay()}}},{key:"currentView",get:function get(){return this._currentView},set:function set(v){if(this._currentView===v){return}var oldValue=this._currentView;this._currentView=v;if(oldValue){oldValue.visible=false}if(this._currentView){this._currentView.visible=true}this._OnCurrentViewCh(oldValue)}},{key:"_OnCurrentViewCh",value:function _OnCurrentViewCh(p_oldView){if(!this._currentView){this.currentHandle=null;return}var item=this._catalogViewBuilder._reverseMap.get(this._currentView);if(item){this.currentHandle=this._nav.G(item)}this._currentView.DisplayGranted()}},{key:"_CleanUp",value:function _CleanUp(){if(this._nav.parentElement!=this._host){UDOM.AttachFirst(this._nav,this._host,false)}this._catalogViewBuilder.catalog=null;_get(_gPO(Drawer.prototype),"_CleanUp",this).call(this)}}]);return Drawer}(View);_defineProperty(Drawer,"__NFO__",NFOS.Ext({css:["@/views/drawer.css"]},View,["css"]));_defineProperty(Drawer,"VIEW_ADDED",Symbol("viewCreated"));_defineProperty(Drawer,"EMPTY",Symbol("empty"));_defineProperty(Drawer,"__default_orientation",UF.VERTICAL);mdl.xp["default"]=mdl.xp=Drawer;UI.Register("nkmjs-drawer",Drawer)},{354:182,315:209,314:206,317:207,326:208,355:210,353:214,14:27,29:52,13:268}],212:[function(rq,mdl,xp){"use strict";var _rq282=rq(13),U=_rq282.U;var _rq283=rq(34),CSS=_rq283.CSS;var UI=rq(315);var Layer=rq(356);var LayerC_=function(_Layer){_inherits(LayerC_,_Layer);var _super118=_createSuper(LayerC_);function LayerC_(){_cCC(this,LayerC_);return _super118.call(this)}_cC(LayerC_,[{key:"_In",value:function _In(){this._layerClassName="layer";_get(_gPO(LayerC_.prototype),"_In",this).call(this)}},{key:"_Style",value:function _Style(){var s=CSS.Extends({":host":{}},_get(_gPO(LayerC_.prototype),"_Style",this).call(this));s[".".concat(this._layerClassName)]={"@":["layer"]};return s}},{key:"_OnChildAd",value:function _OnChildAd(p_displayObject,p_index){_get(_gPO(LayerC_.prototype),"_OnChildAd",this).call(this,p_displayObject,p_index);p_displayObject.classList.add(this._layerClassName)}},{key:"_OnChildRMd",value:function _OnChildRMd(p_displayObject,p_index){_get(_gPO(LayerC_.prototype),"_OnChildRMd",this).call(this,p_displayObject,p_index);p_displayObject.classList.remove(this._layerClassName)}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(LayerC_.prototype),"_CleanUp",this).call(this)}}]);return LayerC_}(Layer);mdl.xp["default"]=mdl.xp=LayerC_;UI.Register("nkmjs-layer-container",LayerC_)},{315:209,356:213,34:155,13:268}],213:[function(rq,mdl,xp){"use strict";var _rq284=rq(13),U=_rq284.U;var UI=rq(315);var View=rq(353);var Layer=function(_View2){_inherits(Layer,_View2);var _super119=_createSuper(Layer);function Layer(){_cCC(this,Layer);return _super119.call(this)}_cC(Layer,[{key:"_In",value:function _In(){_get(_gPO(Layer.prototype),"_In",this).call(this)}},{key:"_Style",value:function _Style(){return{":host":{"@":["layer"],overflow:"hidden"}}}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(Layer.prototype),"_CleanUp",this).call(this)}}]);return Layer}(View);mdl.xp["default"]=mdl.xp=Layer;UI.Register("nkmjs-layer",Layer)},{315:209,353:214,13:268}],214:[function(rq,mdl,xp){"use strict";var _rq285=rq(13),U=_rq285.U;var _rq286=rq(18),List=_rq286.List;var _rq287=rq(25),CommandBox=_rq287.CommandBox;var UI=rq(315);var US=rq(326);var UF=rq(314);var OrientableW=rq(334);var View=function(_OrientableW2){_inherits(View,_OrientableW2);var _super120=_createSuper(View);function View(){_cCC(this,View);return _super120.call(this)}_cC(View,[{key:"_In",value:function _In(){_get(_gPO(View.prototype),"_In",this).call(this);this._commands=new CommandBox(this._Bind(this._OnCmdRegister))}},{key:"RequestDisplay",value:function RequestDisplay(){this._B(US.DISPLAY_REQUESTED,this)}},{key:"DisplayGranted",value:function DisplayGranted(){}},{key:"_OnCmdRegister",value:function _OnCmdRegister(p_cmd){}}]);return View}(OrientableW);_defineProperty(View,"__default_iState",null);mdl.xp["default"]=mdl.xp=View;UI.Register("nkmjs-view",View)},{315:209,314:206,326:208,334:216,25:1,18:21,13:268}],215:[function(rq,mdl,xp){"use strict";var _rq288=rq(13),U=_rq288.U;var _rq289=rq(14),COM_ID=_rq289.COM_ID,POOL=_rq289.POOL,S=_rq289.S,COMMON_FLAG=_rq289.COMMON_FLAG,Observer=_rq289.Observer;var _rq290=rq(29),DATA_S=_rq290.DATA_S,DataBlock=_rq290.DataBlock,DataObserver=_rq290.DataObserver,CATALOG_S=_rq290.CATALOG_S,CgItem=_rq290.CgItem;var M=rq(336);var UF=rq(311);var W=rq(312);var FlagEnum=rq(313);var ExtDrag=rq(357);var CgW=function(_W2){_inherits(CgW,_W2);var _super121=_createSuper(CgW);function CgW(){_cCC(this,CgW);return _super121.call(this)}_cC(CgW,[{key:"_In",value:function _In(){_get(_gPO(CgW.prototype),"_In",this).call(this);this._Bind(this._ExecuteCommand);this._dataObserver.H(CATALOG_S.ITEM_DATA_CHANGED,this._OnItemDataCh,this);this._itemData=null;this._flavorEnum=new FlagEnum(UF.flavors);this._flavorEnum.A(this);this._interactions.H(M.BTN_LEFT,M.RELEASE_TWICE,this._Bind(this.AltActivate));this._extDrag=this._interactions.A(ExtDrag);this._extDrag.grabDataCallback=this._Bind(this._GrabDragData);this._dragActivator=null;this._dragFeedbackHost=this}},{key:"_pIn",value:function _pIn(){_get(_gPO(CgW.prototype),"_pIn",this).call(this);this._extDrag.Sup(this,this._dragActivator,this._dragFeedbackHost)}},{key:"_Wake",value:function _Wake(){_get(_gPO(CgW.prototype),"_Wake",this).call(this);this._extDrag.owner=this}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(v){this._flavorEnum.S(v)}},{key:"_OnDataCh",value:function _OnDataCh(p_oldData){_get(_gPO(CgW.prototype),"_OnDataCh",this).call(this,p_oldData);this.itemData=this._ExtractItemData(this._data);if(this._data){this._UInfos()}if(this._isFocused){this._BuildCommandHandles()}}},{key:"_OnDataUd",value:function _OnDataUd(p_data){_get(_gPO(CgW.prototype),"_OnDataUd",this).call(this,p_data);if(!this._itemData){this._UInfos()}}},{key:"_OnItemDataCh",value:function _OnItemDataCh(it,p_newData,p_oldData){this.itemData=this._ExtractItemData(p_newData)}},{key:"_ExtractItemData",value:function _ExtractItemData(v){if(!v){return null}if(U.isInstanceOf(v,CgItem)){return v.GOption(COM_ID.DATA,null)}return null}},{key:"_HItemDataS_s",value:function _HItemDataS_s(p_observer){p_observer.H(DATA_S.DIRTY,this._OnItemDataDirty,this);p_observer.H(DATA_S.DIRTY_CLEARED,this._OnItemDataCleaned,this);p_observer.H(S.UPDATED,this._OnItemDataUd,this)}},{key:"itemData",set:function set(v){if(this._itemData==v){return}var oldData=this._itemData;this._itemData=v;if(oldData){this._itemDataObserver.Flush()}if(this._itemData){if(!this._itemDataObserver){this._itemDataObserver=POOL.Rt(Observer);this._HItemDataS_s(this._itemDataObserver)}this._itemDataObserver.ObserveOnly(this._itemData);this._OnItemDataUd(this._itemData)}else if(this._itemDataObserver){this._itemDataObserver.Release();this._itemDataObserver=null}}},{key:"_OnItemDataDirty",value:function _OnItemDataDirty(p_data){this._flavorEnum.S(COMMON_FLAG.WARNING)}},{key:"_OnItemDataCleaned",value:function _OnItemDataCleaned(p_data){this._flavorEnum.S(null)}},{key:"_OnItemDataUd",value:function _OnItemDataUd(p_data){this._UInfos()}},{key:"_UInfos",value:function _UInfos(){}},{key:"_GrabDragData",value:function _GrabDragData(){return this._data}},{key:"_FocusGain",value:function _FocusGain(){_get(_gPO(CgW.prototype),"_FocusGain",this).call(this);if(!this._data){return}this._BuildCommandHandles();if(this._data.primaryCommand){this._data.primaryCommand.context=this}if(this._data.secondaryCommand){this._data.secondaryCommand.context=this}}},{key:"_FocusLost",value:function _FocusLost(){_get(_gPO(CgW.prototype),"_FocusLost",this).call(this);if(!this._data){return}this._ClearCommandHandles()}},{key:"AltActivate",value:function AltActivate(p_evt){if(this._data.primaryCommand){this._data.primaryCommand.Execute();return false}return true}},{key:"_BuildCommandHandles",value:function _BuildCommandHandles(){this._ClearCommandHandles();if(!this._data){return}var list=this._data.commandList;if(!list){return}for(var i=0,n=list.length;i<n;i++){var cmd=list[i];cmd.context=this;this._BuildCommand(cmd)}}},{key:"_BuildCommand",value:function _BuildCommand(p_cmd){}},{key:"_ClearCommandHandles",value:function _ClearCommandHandles(){}},{key:"_ExecuteCommand",value:function _ExecuteCommand(p_cmd){p_cmd.emitter=this;p_cmd.Execute(this._data)}}]);return CgW}(W);mdl.xp["default"]=mdl.xp=CgW},{357:176,313:184,336:195,311:206,312:217,14:27,29:52,13:268}],216:[function(rq,mdl,xp){"use strict";var UI=rq(309);var UF=rq(311);var FlagEnum=rq(313);var W=rq(312);var _rq291=rq(13),UDOM=_rq291.UDOM;var OrientableW=function(_W3){_inherits(OrientableW,_W3);var _super122=_createSuper(OrientableW);function OrientableW(){_cCC(this,OrientableW);return _super122.call(this)}_cC(OrientableW,[{key:"_In",value:function _In(){_get(_gPO(OrientableW.prototype),"_In",this).call(this);this._isHorizontalScrollEnabled=false;this._orientation=new FlagEnum(UF.orientations);this._orientation.A(this);this._orientation.onFlagCh.A(this._Bind(this._OnOrientationCh));this._Bind(this._HorizontalScroll)}},{key:"_pIn",value:function _pIn(){_get(_gPO(OrientableW.prototype),"_pIn",this).call(this);this._orientation.S(this.constructor.__default_orientation)}},{key:"orientation",get:function get(){return this._orientation},set:function set(v){this._orientation.S(v)}},{key:"_OnOrientationCh",value:function _OnOrientationCh(p_newValue,p_oldValue){if(this._isHorizontalScrollEnabled){if(this._orientation.currentFlag===UF.VERTICAL){this._interactions.wheelFn=null}else{this._interactions.wheelFn=this._HorizontalScroll}}}},{key:"_HorizontalScroll",value:function _HorizontalScroll(p_evt){if(!UDOM.OverflowsX(this._wrapper)){return}var delta=Math.sign(p_evt.deltaY);this._wrapper.scrollBy({top:0,left:delta*50});p_evt.preventDefault()}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(OrientableW.prototype),"_CleanUp",this).call(this);this._orientation.S(this.constructor.__default_orientation)}}]);return OrientableW}(W);_defineProperty(OrientableW,"CONTROL_ACTIVATED",Symbol("controlActivated"));_defineProperty(OrientableW,"__default_orientation",UF.HORIZONTAL);mdl.xp["default"]=mdl.xp=OrientableW},{313:184,309:209,311:206,312:217,13:268}],217:[function(rq,mdl,xp){"use strict";var _rq292=rq(13),U=_rq292.U;var _rq293=rq(14),S=_rq293.S,Observer=_rq293.Observer;var UI=rq(309);var US=rq(310);var UF=rq(311);var INPUT=rq(358);var M=rq(336);var dOC_=rq(359);var WSelection=rq(360);var FlagEnum=rq(313);var Extm=rq(361);var W=function(_dOContain2){_inherits(W,_dOContain2);var _super123=_createSuper(W);function W(){_cCC(this,W);return _super123.call(this)}_cC(W,[{key:"_In",value:function _In(){_get(_gPO(W.prototype),"_In",this).call(this);this._data=null;this._notifiesSelectionStack=false;this._isSelectable=true;this._isSelected=false;this._isFocusable=true;this._isFocused=false;this._isHighlighted=false;this._isActivable=true;this._interactions=new Extm;this._interactions.focusFn=this._Bind(this.Focus);this._interactions.H(M.BTN_LEFT,M.RELEASE,this._Bind(this.Activate));this._focusArea=null;this._dataObserver=new Observer;this._dataObserver.H(S.UPDATED,this._OnDataUd,this);this._flags.A(this,UF.ACTIVATED,UF.SELECTED);this._istateEnum=new FlagEnum(UF.istates);this._istateEnum.A(this);this.default_SelectOnActivation=U.Default(this.default_SelectOnActivation,false);this._selectOnActivation=this.default_SelectOnActivation}},{key:"_pIn",value:function _pIn(){_get(_gPO(W.prototype),"_pIn",this).call(this);this._istateEnum.S(this.constructor.__default_iState)}},{key:"_OnPaintChange",value:function _OnPaintChange(){_get(_gPO(W.prototype),"_OnPaintChange",this).call(this);this._interactions.enabled=this._isPainted}},{key:"notifiesSelectionStack",get:function get(){return this._notifiesSelectionStack},set:function set(v){this._notifiesSelectionStack=v}},{key:"htitle",get:function get(){this.getAttribute("title")},set:function set(v){this.setAttribute("title",v)}},{key:"focusArea",get:function get(){return this._focusArea},set:function set(v){if(this._focusArea===v){return}this._focusArea=v;this._interactions.element=this._focusArea}},{key:"selectOnActivation",get:function get(){return this._selectOnActivation},set:function set(v){this._selectOnActivation=v}},{key:"_InSelectionStack",value:function _InSelectionStack(){if(this._selectionStack){return}var sStack=new WSelection;sStack.W(S.ITEM_ADDED,this._OnSelectionStackA,this);sStack.W(S.ITEM_REMOVED,this._OnSelectionStackRM,this);this._selectionStack=sStack}},{key:"_OnSelectionStackA",value:function _OnSelectionStackA(it){}},{key:"_OnSelectionStackRM",value:function _OnSelectionStackRM(it){}},{key:"isSelectable",get:function get(){return this._isSelectable},set:function set(v){if(this._isSelectable===v){return}this._isSelectable=v;if(!v){this.Select(false)}}},{key:"isSelected",get:function get(){return this._isSelected}},{key:"selectionStack",get:function get(){if(this._selectionStack){return this._selectionStack}else{if(!this._parent){return null}else{return this._parent.selectionStack}}}},{key:"Select",value:function Select(p_toggle){if(!this._isSelectable){return}if(this._isSelected===p_toggle){return}this._isSelected=p_toggle;this._flags.S(UF.SELECTED,p_toggle);var sStack=this._notifiesSelectionStack?this._parent?this._parent.selectionStack:null:null;if(p_toggle){this._SelectionGain();this._B(US.SELECTION_GAIN,this);if(sStack){sStack.A(this)}this._Highlight(true)}else{this._SelectionLost();this._B(US.SELECTION_LOST,this);if(sStack){sStack.RM(this)}if(!this._isFocused){this._Highlight(false)}}}},{key:"_SelectionGain",value:function _SelectionGain(){}},{key:"_SelectionLost",value:function _SelectionLost(){}},{key:"isFocusable",get:function get(){return this._isFocusable},set:function set(v){if(this._isFocusable===v){return}this._isFocusable=v;if(!v){this.Focus(false);this._istateEnum.S(UF.DISABLED);this.style["pointer-events"]="none"}else{this._istateEnum.S(UF.IDLE);this.style.removeProperty("pointer-events")}}},{key:"isFocused",get:function get(){return this._isFocused}},{key:"Focus",value:function Focus(p_toggle){if(!this._isFocusable){return}if(p_toggle&&!this._isFocusable){p_toggle=false}if(this._isFocused===p_toggle){return}this._isFocused=p_toggle;if(p_toggle){this._istateEnum.S(UF.FOCUSED)}else{this._istateEnum.S(UF.IDLE)}if(p_toggle){this._FocusGain();this._Highlight(true)}else{this._FocusLost();if(!this._isSelected){this._Highlight(false)}}}},{key:"_FocusGain",value:function _FocusGain(){}},{key:"_FocusLost",value:function _FocusLost(){}},{key:"_Highlight",value:function _Highlight(p_toggle){if(p_toggle){if(this._isHighlighted){return}this._isHighlighted=p_toggle;this._HighlightGain()}else{if(!this._isHighlighted){return}this._isHighlighted=p_toggle;this._HighlightLost()}}},{key:"_HighlightGain",value:function _HighlightGain(){}},{key:"_HighlightLost",value:function _HighlightLost(){}},{key:"isActivable",get:function get(){return this._isActivable},set:function set(v){if(this._isActivable===v){return}this._isActivable=v}},{key:"Activate",value:function Activate(p_evt){if(!this._isActivable){return false}this._B(US.ACTIVATED,this,p_evt);if(this._selectOnActivation){if(this._isSelectable){this.Select(INPUT.ctrl?!this._isSelected:true)}}return true}},{key:"data",get:function get(){return this._data},set:function set(v){if("_PreprocessData"in this){v=this._PreprocessData(v)}if(this._data===v){return}var oldValue=this._data;this._data=v;if(oldValue){this._dataObserver.Unobserve(oldValue)}this._OnDataCh(oldValue);this._pDataCh(oldValue);if(v){this._dataObserver.Observe(v);this._OnDataUd(v)}this._B(US.DATA_CHANGED,this,v,oldValue)}},{key:"_OnDataCh",value:function _OnDataCh(p_oldData){}},{key:"_pDataCh",value:function _pDataCh(p_oldData){}},{key:"_OnDataUd",value:function _OnDataUd(p_data){}},{key:"_CleanUp",value:function _CleanUp(){this._istateEnum.S(this.constructor.__default_iState);if(this._selectionStack){this._selectionStack.Clear()}this.data=null;this._selectOnActivation=this.default_SelectOnActivation;this.removeAttribute("title");if(this._mouseOver){this._mOut(null);if(this._mouseDown){this._mUp(null)}}else if(this._mouseDown){this._mUpOutside(null)}this.Select(false);this.Focus(false);_get(_gPO(W.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){if(!this._data){return"<".concat(this.constructor.name,"|").concat(this._uinc,">")}else{return"<".concat(this.constructor.name,"|").concat(this._uinc,":{").concat(this._data,"}>")}}}]);return W}(dOC_);_defineProperty(W,"__NFO__",{css:["@/common.css"]});_defineProperty(W,"__usePaintCallback",true);_defineProperty(W,"__default_iState",UF.IDLE);mdl.xp["default"]=mdl.xp=W},{359:171,361:180,313:184,360:188,358:189,336:195,309:209,311:206,310:208,14:27,13:268}],218:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={INPUT_S:rq(362),Inputb_:rq(363),InputField:rq(364),InputFormHandler:rq(365),InputGroup:rq(366),InputText:rq(367),InputIdentifier:rq(368),InputTextarea:rq(369),InputBoolean:rq(370),InputNumber:rq(371),InputColor:rq(372),InputPath:rq(373),InputFile:rq(374),InputDirectory:rq(375),InputList:rq(376)}},{363:219,364:220,365:221,366:222,362:223,370:224,372:225,375:226,374:227,368:228,376:229,371:230,373:231,367:232,369:233}],219:[function(rq,mdl,xp){var _rq294=rq(13),U=_rq294.U;var _rq295=rq(14),NFOS=_rq295.NFOS,COMMON_FLAG=_rq295.COMMON_FLAG;var _rq296=rq(27),UI=_rq296.UI,UF=_rq296.UF,W=_rq296.W,FlagEnum=_rq296.FlagEnum;var INPUT_S=rq(377);var b_Input=function(_W4){_inherits(b_Input,_W4);var _super124=_createSuper(b_Input);function b_Input(){_cCC(this,b_Input);return _super124.call(this)}_cC(b_Input,[{key:"_In",value:function _In(){_get(_gPO(b_Input.prototype),"_In",this).call(this);this._currentValue=null;this._changedValue=null;this._invalidInput=false;this._inputErrors=new Array(0);this._externalValidationStack=new Array(0);this._externalSanitizationStack=new Array(0);this._errorFeedbacks=new Array(0);this._updatePreviewOnChange=true;this._submitOnChange=true;this._inputId="";this._sizeEnum=new FlagEnum(UF.sizes);this._sizeEnum.A(this);this._flavorEnum=new FlagEnum(UF.flavors);this._flavorEnum.A(this)}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(v){this._sizeEnum.S(v)}},{key:"submitOnChange",get:function get(){return this._submitOnChange},set:function set(v){this._submitOnChange=v}},{key:"currentValue",get:function get(){return this._currentValue},set:function set(v){if(this._currentValue===v){this.changedValue=v;return}var oldValue=this._currentValue;this._currentValue=v;this._changedValue=v;this._OnCurrentValueCh(oldValue)}},{key:"invalidInput",get:function get(){return this._invalidInput}},{key:"inputId",get:function get(){return this._inputId},set:function set(v){this._inputId=v}},{key:"_OnCurrentValueCh",value:function _OnCurrentValueCh(p_oldValue){this._UPreview()}},{key:"changedValue",get:function get(){return this._changedValue},set:function set(v){if(this._changedValue===v){return}var oldValue=this._changedValue;this._changedValue=v;this._OnValueCh(oldValue)}},{key:"_OnValueCh",value:function _OnValueCh(p_oldValue){this._internalValidateChValue();this._B(INPUT_S.VALUE_CHANGED,this,this._changedValue);if(this._updatePreviewOnChange){this._UPreview()}if(this._submitOnChange){this.SubmitValue()}}},{key:"_IsValueCh",value:function _IsValueCh(){return this._currentValue!=this._changedValue}},{key:"_SelectionLost",value:function _SelectionLost(){_get(_gPO(b_Input.prototype),"_SelectionLost",this).call(this);this.SubmitValue();this.SoftReset()}},{key:"_SanitizeValue",value:function _SanitizeValue(v){var check=null;for(var i=0,n=this._externalSanitizationStack.length;i<n;i++){check=this._externalSanitizationStack[i];v=check.fn.call(check.thisArg,v)}return v}},{key:"_ValidateChValue",value:function _ValidateChValue(v){}},{key:"_ClearErrors",value:function _ClearErrors(){this._ClearFeedbacks();this._invalidInput=false;this._inputErrors.length=0}},{key:"_internalValidateChValue",value:function _internalValidateChValue(){this._ClearErrors();this._ValidateChValue(this._changedValue);for(var i=0,n=this._externalValidationStack.length;i<n;i++){var check=this._externalValidationStack[i],result=check.fn.call(check.thisArg,this._changedValue);if(result){this._PushError(result)}}this._invalidInput=this._inputErrors.length>0;if(this._invalidInput){this._internalOnInputError()}return!this._invalidInput}},{key:"ASanitization",value:function ASanitization(p_fn){var p_thisArg=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var item=null;if(U.isObject(p_fn)){item=p_fn}else{item={fn:p_fn,thisArg:p_thisArg}}this._externalSanitizationStack.push(item)}},{key:"AValidation",value:function AValidation(p_fn){var p_thisArg=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var item=null;if(U.isObject(p_fn)){item=p_fn}else{item={fn:p_fn,thisArg:p_thisArg}}this._externalValidationStack.push(item)}},{key:"_PushError",value:function _PushError(p_err){if(U.isString(p_err)){p_err={type:COMMON_FLAG.ERROR,message:p_err}}if(this._inputErrors.includes(p_err)){return}this._inputErrors.push(p_err);this._invalidInput=true}},{key:"_internalOnInputError",value:function _internalOnInputError(){this._OnInputErrors();this._B(INPUT_S.INPUT_ERROR,this,this._inputErrors)}},{key:"_OnInputErrors",value:function _OnInputErrors(){for(var i=0,n=this._inputErrors.length;i<n;i++){var err=this._inputErrors[i],feedback=this._AFeedback(err);this._flavorEnum.Bump(err.type);if(feedback){this._errorFeedbacks.push(feedback)}}}},{key:"_UPreview",value:function _UPreview(){}},{key:"_AFeedback",value:function _AFeedback(p_err){return null}},{key:"_ConcatErrors",value:function _ConcatErrors(p_flag){var p_break=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"<br/>";var str="";for(var i=0,n=this._inputErrors.length,nMinus=n-1;i<n;i++){var obj=this._inputErrors[i];if(obj.type!=p_flag){continue}str+=obj.message;if(i!=nMinus){str+=p_break}}return str}},{key:"_ClearFeedbacks",value:function _ClearFeedbacks(){this._flavorEnum.S(null);for(var i=0,n=this._errorFeedbacks.length;i<n;i++){this._errorFeedbacks[i].Release()}this._errorFeedbacks.length=0}},{key:"SubmitValue",value:function SubmitValue(){this.changedValue=this._SanitizeValue(this._changedValue);if(!this._IsValueCh()){return}if(!this._internalValidateChValue()){this.changedValue=this._currentValue;return}this._B(INPUT_S.VALUE_SUBMITTED,this,this._changedValue);this._UPreview()}},{key:"SoftReset",value:function SoftReset(){this.changedValue=this.currentValue;this._ClearErrors();this._UPreview()}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(b_Input.prototype),"_CleanUp",this).call(this);this._flavorEnum.S(null);this._ClearErrors();this._externalValidationStack.length=0;this._inputId="";this._currentValue=null;this._changedValue=null}}]);return b_Input}(W);_defineProperty(b_Input,"__NFO__",NFOS.Ext({css:["@/inputs/shared.css"]},W,["css"]));mdl.xp["default"]=mdl.xp=b_Input},{377:223,14:27,27:166,13:268}],220:[function(rq,mdl,xp){var _rq297=rq(13),U=_rq297.U,UDOM=_rq297.UDOM,C=_rq297.C,PATH=_rq297.PATH;var _rq298=rq(14),NFOS=_rq298.NFOS,COMMON_FLAG=_rq298.COMMON_FLAG;var _rq299=rq(34),CSS=_rq299.CSS;var _rq300=rq(27),UI=_rq300.UI,INPUT=_rq300.INPUT,KB=_rq300.KB;var INPUT_S=rq(377);var Inputb_=rq(378);var InputField=function(_Inputb_){_inherits(InputField,_Inputb_);var _super125=_createSuper(InputField);function InputField(){_cCC(this,InputField);return _super125.call(this)}_cC(InputField,[{key:"_In",value:function _In(){_get(_gPO(InputField.prototype),"_In",this).call(this);this._inputField=null;this._Bind(this._onInput);this._Bind(this._onChange);this._Bind(this._onFocusIn);this._Bind(this._onFocusOut);this._Bind(this._FOut);this._Bind(this._FIn)}},{key:"_pIn",value:function _pIn(){_get(_gPO(InputField.prototype),"_pIn",this).call(this);this._inputField.addEventListener("focus",this._onFocusIn);this._inputField.addEventListener("focusout",this._onFocusOut);this._inputField.addEventListener("input",this._onInput);this._inputField.addEventListener("change",this._onChange)}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{position:"relative",display:"flex","align-content":"stretch","align-items":"stretch"},".field":{flex:"1 1 auto","min-width":0}},_get(_gPO(InputField.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){this._inputField=UDOM.New("input",{class:"field"},this._host)}},{key:"placeholderValue",set:function set(v){this._inputField.setAttribute("placeholder",v)}},{key:"_onInput",value:function _onInput(p_evt){this.changedValue=this._GrabValue()}},{key:"_onChange",value:function _onChange(p_evt){this.changedValue=this._GrabValue()}},{key:"_GrabValue",value:function _GrabValue(){return this._inputField.value}},{key:"_FIn",value:function _FIn(){this._inputField.focus()}},{key:"_FOut",value:function _FOut(p_evt){if(INPUT.shift){return}if(p_evt){p_evt.preventDefault()}this._inputField.blur()}},{key:"_onFocusIn",value:function _onFocusIn(p_evt){INPUT.ONKeyDown(KB._enter,this._FOut)}},{key:"_onFocusOut",value:function _onFocusOut(p_evt){INPUT.OFFKeyDown(KB._enter,this._FOut);this.SubmitValue()}},{key:"_UPreview",value:function _UPreview(){this._inputField.value=this._currentValue}}]);return InputField}(Inputb_);_defineProperty(InputField,"__NFO__",NFOS.Ext({css:["@/inputs/field.css"]},Inputb_,["css"]));mdl.xp["default"]=mdl.xp=InputField;UI.Register("nkmjs-input-field",InputField)},{378:219,377:223,14:27,34:155,27:166,13:268}],221:[function(rq,mdl,xp){var _rq301=rq(13),U=_rq301.U;var _rq302=rq(14),__dOEx=_rq302.__dOEx;var _rq303=rq(18),Dictionary=_rq303.Dictionary,List=_rq303.List;var INPUT_S=rq(377);var Inputb_=rq(378);var InputFormHandler=function(___dOEx25){_inherits(InputFormHandler,___dOEx25);var _super126=_createSuper(InputFormHandler);function InputFormHandler(){_cCC(this,InputFormHandler);return _super126.call(this)}_cC(InputFormHandler,[{key:"_In",value:function _In(){_get(_gPO(InputFormHandler.prototype),"_In",this).call(this);this._inputList=new List;this._inputValues={};this._errorCount=0;this._invalidForm=false}},{key:"inputValues",get:function get(){return this._inputValues}},{key:"invalidForm",get:function get(){return this._invalidForm}},{key:"Register",value:function Register(p_input){if(!U.isInstanceOf(p_input,Inputb_)){throw new Error("InputFormHandler cannot register non-input items.")}if(!this._inputList.A(p_input)){return}this._inputValues[p_input.inputId]=p_input.currentValue;p_input._internalValidateChValue();if(p_input.invalidInput){this._invalidForm=true;this._B(INPUT_S.FORM_INVALID,this)}else if(!this._invalidForm){this._B(INPUT_S.FORM_READY,this)}p_input.W(INPUT_S.VALUE_SUBMITTED,this._OnInputSubmit,this);p_input.W(INPUT_S.VALUE_CHANGED,this._OnInputCh,this);p_input.W(INPUT_S.INPUT_ERROR,this._OnInputError,this)}},{key:"Unregister",value:function Unregister(p_input){if(!this._inputList.RM(p_input)){return}delete this._inputValues[p_input.inputId];p_input.Uw(INPUT_S.VALUE_SUBMITTED,this._OnInputSubmit,this);p_input.Uw(INPUT_S.VALUE_CHANGED,this._OnInputCh,this);p_input.Uw(INPUT_S.INPUT_ERROR,this._OnInputError,this)}},{key:"ValidateForm",value:function ValidateForm(){var was=this._invalidForm;this._invalidForm=false;this._errorCount=0;this._inputList.ForEach(this._CheckInput,this);if(this._invalidForm!=was){if(this._invalidForm){this._B(INPUT_S.FORM_INVALID,this)}else{this._B(INPUT_S.FORM_READY,this)}}return this._invalidForm}},{key:"_CheckInput",value:function _CheckInput(p_input){if(p_input.invalidInput){this._invalidForm=true;this._errorCount+=p_input._inputErrors.length}}},{key:"Clear",value:function Clear(){for(var i=0,n=this._inputList.count;i<n;i++){this.Unregister(this._inputList.last)}}},{key:"_OnInputSubmit",value:function _OnInputSubmit(p_input,p_newValue){this.ValidateForm();this._inputValues[p_input.inputId]=p_newValue}},{key:"_OnInputCh",value:function _OnInputCh(p_input,p_newValue){this.ValidateForm();this._inputValues[p_input.inputId]=p_newValue}},{key:"_OnInputError",value:function _OnInputError(p_input,p_errors){this.ValidateForm()}}]);return InputFormHandler}(__dOEx);mdl.xp["default"]=mdl.xp=InputFormHandler},{378:219,377:223,18:21,14:27,13:268}],222:[function(rq,mdl,xp){"use struct";var _rq304=rq(27),UI=_rq304.UI;var Inputb_=rq(378);var InputGroup=function(_Inputb_2){_inherits(InputGroup,_Inputb_2);var _super127=_createSuper(InputGroup);function InputGroup(){_cCC(this,InputGroup);return _super127.call(this)}return InputGroup}(Inputb_);mdl.xp["default"]=mdl.xp=InputGroup;UI.Register("nkmjs-input-group",InputGroup)},{378:219,27:166}],223:[function(rq,mdl,xp){"use strict";var INPUT_S=function INPUT_S(){_cCC(this,INPUT_S)};_defineProperty(INPUT_S,"VALUE_CHANGED",Symbol("valueCh"));_defineProperty(INPUT_S,"VALUE_SUBMITTED",Symbol("valueCommitted"));_defineProperty(INPUT_S,"INPUT_ERROR",Symbol("inputError"));_defineProperty(INPUT_S,"FORM_READY",Symbol("formReady"));_defineProperty(INPUT_S,"FORM_INVALID",Symbol("formInvalid"));mdl.xp["default"]=mdl.xp=INPUT_S},{}],224:[function(rq,mdl,xp){"use strict";var _rq305=rq(13),U=_rq305.U,UDOM=_rq305.UDOM;var _rq306=rq(14),NFOS=_rq306.NFOS;var _rq307=rq(34),CSS=_rq307.CSS;var _rq308=rq(27),UI=_rq308.UI,TextManipulator=_rq308.TextManipulator;var InputField=rq(379);var _flag_CHECKED="checked";var InputBoolean=function(_InputField){_inherits(InputBoolean,_InputField);var _super128=_createSuper(InputBoolean);function InputBoolean(){_cCC(this,InputBoolean);return _super128.call(this)}_cC(InputBoolean,[{key:"_In",value:function _In(){_get(_gPO(InputBoolean.prototype),"_In",this).call(this);this._flags.A(this,_flag_CHECKED);this._label=null}},{key:"label",get:function get(){return this._label},set:function set(v){this._label.S(v)}},{key:"_Style",value:function _Style(){return CSS.Extends({".field":{"@":["invisible-fill"]}},_get(_gPO(InputBoolean.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){this._label=new TextManipulator(UDOM.New("span",{class:"label"},this._host));var body=UDOM.New("div",{class:"body"},this._host);this._handle=UDOM.New("div",{class:"handle"},body);this._inputField=UDOM.New("input",{class:"field",type:"checkbox"},this._host)}},{key:"_GrabValue",value:function _GrabValue(){return this._inputField.checked}},{key:"_UPreview",value:function _UPreview(){this._inputField.checked=this._changedValue;this._flags.S(_flag_CHECKED,this._changedValue)}}]);return InputBoolean}(InputField);_defineProperty(InputBoolean,"__NFO__",NFOS.Ext({css:["@/inputs/boolean.css"]},InputField,["css"]));mdl.xp["default"]=mdl.xp=InputBoolean;UI.Register("nkmjs-input-boolean",InputBoolean)},{379:220,14:27,34:155,27:166,13:268}],225:[function(rq,mdl,xp){"use strict";var _rq309=rq(13),U=_rq309.U,UDOM=_rq309.UDOM;var _rq310=rq(14),NFOS=_rq310.NFOS;var _rq311=rq(34),CSS=_rq311.CSS;var _rq312=rq(27),UI=_rq312.UI,TextManipulator=_rq312.TextManipulator;var InputField=rq(379);var InputColor=function(_InputField2){_inherits(InputColor,_InputField2);var _super129=_createSuper(InputColor);function InputColor(){_cCC(this,InputColor);return _super129.call(this)}_cC(InputColor,[{key:"_In",value:function _In(){_get(_gPO(InputColor.prototype),"_In",this).call(this);this._label=null;this._body=null}},{key:"label",get:function get(){return this._label},set:function set(v){this._label.S(v)}},{key:"_Style",value:function _Style(){return CSS.Extends({".field":{"@":["invisible-fill"]}},_get(_gPO(InputColor.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){this._label=new TextManipulator(UDOM.New("span",{class:"label"},this._host));this._inputField=UDOM.New("input",{class:"field",type:"color"},this._host);this._body=UDOM.New("div",{class:"body"},this._host)}},{key:"_UPreview",value:function _UPreview(){_get(_gPO(InputColor.prototype),"_UPreview",this).call(this);this._body.style["background-color"]=this._changedValue}}]);return InputColor}(InputField);_defineProperty(InputColor,"__NFO__",NFOS.Ext({css:["@/inputs/color.css"]},InputField,["css"]));mdl.xp["default"]=mdl.xp=InputColor;UI.Register("nkmjs-input-color",InputColor)},{379:220,14:27,34:155,27:166,13:268}],226:[function(rq,mdl,xp){"use strict";var _rq313=rq(13),U=_rq313.U,UDOM=_rq313.UDOM;var _rq314=rq(27),UI=_rq314.UI;var InputFile=rq(380);var InputDirectory=function(_InputFile){_inherits(InputDirectory,_InputFile);var _super130=_createSuper(InputDirectory);function InputDirectory(){_cCC(this,InputDirectory);return _super130.call(this)}_cC(InputDirectory,[{key:"_In",value:function _In(){_get(_gPO(InputDirectory.prototype),"_In",this).call(this);this._openType="openDirectory"}}]);return InputDirectory}(InputFile);mdl.xp["default"]=mdl.xp=InputDirectory;UI.Register("nkmjs-input-directory",InputDirectory)},{380:227,27:166,13:268}],227:[function(rq,mdl,xp){"use strict";var _rq315=rq(13),U=_rq315.U,UDOM=_rq315.UDOM;var _rq316=rq(14),COM_ID=_rq316.COM_ID;var _rq317=rq(25),RELAY=_rq317.RELAY;var _rq318=rq(24),ENV=_rq318.ENV;var _rq319=rq(34),CSS=_rq319.CSS;var _rq320=rq(27),UI=_rq320.UI,T_B=_rq320.T_B,UF=_rq320.UF;var InputPath=rq(381);var InputFile=function(_InputPath){_inherits(InputFile,_InputPath);var _super131=_createSuper(InputFile);function InputFile(){_cCC(this,InputFile);return _super131.call(this)}_cC(InputFile,[{key:"_In",value:function _In(){_get(_gPO(InputFile.prototype),"_In",this).call(this);this._Bind(this._onPickerChange);this._Bind(this._Picked);this._openType="openFile";this._picker=null}},{key:"_Style",value:function _Style(){return CSS.Extends({".input-btn":{flex:"1 1 auto"}},_get(_gPO(InputFile.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){_get(_gPO(InputFile.prototype),"_R",this).call(this);if(ENV.FEATURES.isNodeEnabled){var _this$_picker$options;this._picker=this.A(T_B,"input-btn");this._picker.options=(_this$_picker$options={},_defineProperty(_this$_picker$options,COM_ID.ICON,"%ICON%/icon_more.svg"),_defineProperty(_this$_picker$options,"trigger",{fn:this._Pick,thisArg:this}),_defineProperty(_this$_picker$options,"variant",UF.FRAME),_this$_picker$options);this._sizeEnum.A(this._picker)}else{this._picker=UDOM.New("input",{class:"input-btn",type:"file"},this._host);this._picker.addEventListener("change",this._onPickerChange)}}},{key:"_Pick",value:function _Pick(){if(ENV.FEATURES.isNodeEnabled){RELAY.ShowOpenDialog({defaultPath:this._currentValue?this._currentValue:"",properties:[this._openType]}).then(this._Picked)}}},{key:"_Picked",value:function _Picked(v){var val=v.filePaths[0];if(val===undefined){return}this.changedValue=v.filePaths[0]}},{key:"_onPickerChange",value:function _onPickerChange(p_evt){console.log(this._picker.value);console.log(p_evt)}}]);return InputFile}(InputPath);mdl.xp["default"]=mdl.xp=InputFile;UI.Register("nkmjs-input-file",InputFile)},{381:231,25:1,14:27,24:92,34:155,27:166,13:268}],228:[function(rq,mdl,xp){"use strict";var _rq321=rq(13),U=_rq321.U,UDOM=_rq321.UDOM;var _rq322=rq(14),COMMON_FLAG=_rq322.COMMON_FLAG;var _rq323=rq(27),UI=_rq323.UI,ImageManipulator=_rq323.ImageManipulator;var InputField=rq(379);var _rq324=rq(34),CSS=_rq324.CSS;var ERR_SPACE={type:COMMON_FLAG.ERROR,message:"No space allowed."};var ERR_NUM={type:COMMON_FLAG.ERROR,message:"Must starts with <strong>A-Z, a-z</strong> or <strong>_</strong>"};var ERR_EMPTY={type:COMMON_FLAG.ERROR,message:"Cannot be empty"};var ERR_ILLEGAL_CHARS={type:COMMON_FLAG.ERROR,message:"Can only contains the following characters : <strong>A-Z, a-z, _, 0-9</strong>"};var InputIdentifier=function(_InputField3){_inherits(InputIdentifier,_InputField3);var _super132=_createSuper(InputIdentifier);function InputIdentifier(){_cCC(this,InputIdentifier);return _super132.call(this)}_cC(InputIdentifier,[{key:"_In",value:function _In(){_get(_gPO(InputIdentifier.prototype),"_In",this).call(this);this._issues=new Array(0);this._updatePreviewOnChange=false;this._submitOnChange=false;this._label=null}},{key:"label",get:function get(){return this._label},set:function set(v){this._label.S(v)}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{display:"flex","flex-flow":"column nowrap","align-items":"stretch","align-content":"stretch"},".field":{flex:"1 1 auto",width:"auto"}},_get(_gPO(InputIdentifier.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){this._inputField=UDOM.New("input",{class:"field",type:"search"});this._label=new ImageManipulator(UDOM.New("p",{class:"error"},this))}},{key:"_OnInputErrors",value:function _OnInputErrors(){_get(_gPO(InputIdentifier.prototype),"_OnInputErrors",this).call(this);this._label.S(this._ConcatErrors(COMMON_FLAG.ERROR,"<br/>"))}},{key:"_ClearFeedbacks",value:function _ClearFeedbacks(){_get(_gPO(InputIdentifier.prototype),"_ClearFeedbacks",this).call(this);this._label.S(null)}},{key:"_ValidateChValue",value:function _ValidateChValue(v){_get(_gPO(InputIdentifier.prototype),"_ValidateChValue",this).call(this,v);var e=false;if(!U.ValidIdentifier(v)){if(U.Empty(v)){this._PushError(ERR_EMPTY)}else{if(U.StartwNumber(v)){this._PushError(ERR_NUM);e=true}if(U.ContainsAnySpace(v)){this._PushError(ERR_SPACE);e=true}if(!e){this._PushError(ERR_ILLEGAL_CHARS)}}}}}]);return InputIdentifier}(InputField);mdl.xp["default"]=mdl.xp=InputIdentifier;UI.Register("nkmjs-input-identifier",InputIdentifier)},{379:220,14:27,34:155,27:166,13:268}],229:[function(rq,mdl,xp){"use strict";var _rq325=rq(13),U=_rq325.U,UDOM=_rq325.UDOM;var _rq326=rq(14),COMMON_FLAG=_rq326.COMMON_FLAG;var _rq327=rq(27),UI=_rq327.UI;var Inputb_=rq(382);var _rq328=rq(34),CSS=_rq328.CSS;var InputList=function(_Inputb_3){_inherits(InputList,_Inputb_3);var _super133=_createSuper(InputList);function InputList(){_cCC(this,InputList);return _super133.call(this)}_cC(InputList,[{key:"_In",value:function _In(){_get(_gPO(InputList.prototype),"_In",this).call(this)}},{key:"_Style",value:function _Style(){return CSS.Extends({".field":{}},_get(_gPO(InputList.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){}}]);return InputList}(Inputb_);mdl.xp["default"]=mdl.xp=InputList;UI.Register("nkmjs-input-list",InputList)},{382:219,14:27,34:155,27:166,13:268}],230:[function(rq,mdl,xp){"use strict";var _rq329=rq(13),U=_rq329.U,UDOM=_rq329.UDOM;var _rq330=rq(14),NFOS=_rq330.NFOS,COMMON_FLAG=_rq330.COMMON_FLAG;var _rq331=rq(34),CSS=_rq331.CSS;var _rq332=rq(27),UI=_rq332.UI;var InputField=rq(379);var __slider="slider";var InputNumber=function(_InputField4){_inherits(InputNumber,_InputField4);var _super134=_createSuper(InputNumber);function InputNumber(){_cCC(this,InputNumber);return _super134.call(this)}_cC(InputNumber,[{key:"_In",value:function _In(){_get(_gPO(InputNumber.prototype),"_In",this).call(this)}},{key:"SSliderData",value:function SSliderData(){var m_min=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var m_max=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var m_step=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(m_min!=m_max){if(!m_step){m_step=(m_max-m_min)/100}this._inputField.setAttribute("type","range");this._inputField.setAttribute("min",m_min);this._inputField.setAttribute("max",m_max);this._inputField.setAttribute("step",m_step);this._flags.S(__slider,true)}else{this._inputField.setAttribute("type","number");this._inputField.removeAttribute("min");this._inputField.removeAttribute("max");this._inputField.removeAttribute("step");this._flags.S(__slider,false)}}},{key:"_R",value:function _R(){this._inputField=UDOM.New("input",{class:"field",type:"number"},this._host);this._flags.A(this._inputField,__slider)}},{key:"_GrabValue",value:function _GrabValue(){var n=Number(this._inputField.value);return Number.isNaN(n)?0:n}},{key:"_CleanUp",value:function _CleanUp(){this.SSliderData();_get(_gPO(InputNumber.prototype),"_CleanUp",this).call(this)}}]);return InputNumber}(InputField);_defineProperty(InputNumber,"__NFO__",NFOS.Ext({css:["@/inputs/number.css"]},InputField,["css"]));mdl.xp["default"]=mdl.xp=InputNumber;UI.Register("nkmjs-input-number",InputNumber)},{379:220,14:27,34:155,27:166,13:268}],231:[function(rq,mdl,xp){"use strict";var _rq333=rq(13),U=_rq333.U,UDOM=_rq333.UDOM,PATH=_rq333.PATH;var _rq334=rq(14),COMMON_FLAG=_rq334.COMMON_FLAG;var _rq335=rq(27),UI=_rq335.UI;var InputField=rq(379);var InputPath=function(_InputField5){_inherits(InputPath,_InputField5);var _super135=_createSuper(InputPath);function InputPath(){_cCC(this,InputPath);return _super135.call(this)}_cC(InputPath,[{key:"_SanitizeValue",value:function _SanitizeValue(v){return PATH.Sanitize(_get(_gPO(InputPath.prototype),"_SanitizeValue",this).call(this,v))}}]);return InputPath}(InputField);mdl.xp["default"]=mdl.xp=InputPath;UI.Register("nkmjs-input-path",InputPath)},{379:220,14:27,27:166,13:268}],232:[function(rq,mdl,xp){"use strict";var _rq336=rq(13),U=_rq336.U,UDOM=_rq336.UDOM;var _rq337=rq(14),COMMON_FLAG=_rq337.COMMON_FLAG;var _rq338=rq(34),CSS=_rq338.CSS;var _rq339=rq(27),UI=_rq339.UI;var InputField=rq(379);var InputText=function(_InputField6){_inherits(InputText,_InputField6);var _super136=_createSuper(InputText);function InputText(){_cCC(this,InputText);return _super136.call(this)}_cC(InputText,[{key:"_In",value:function _In(){_get(_gPO(InputText.prototype),"_In",this).call(this);this._updatePreviewOnChange=false;this._submitOnChange=false}},{key:"_R",value:function _R(){this._inputField=UDOM.New("input",{class:"field",type:"search"},this._host)}}]);return InputText}(InputField);mdl.xp["default"]=mdl.xp=InputText;UI.Register("nkmjs-input-text",InputText)},{379:220,14:27,34:155,27:166,13:268}],233:[function(rq,mdl,xp){"use strict";var _rq340=rq(13),U=_rq340.U,UDOM=_rq340.UDOM;var _rq341=rq(14),NFOS=_rq341.NFOS,COMMON_FLAG=_rq341.COMMON_FLAG;var _rq342=rq(34),CSS=_rq342.CSS;var _rq343=rq(27),UI=_rq343.UI;var InputField=rq(379);var InputTextarea=function(_InputField7){_inherits(InputTextarea,_InputField7);var _super137=_createSuper(InputTextarea);function InputTextarea(){var _this18;_cCC(this,InputTextarea);_this18=_super137.call(this);_defineProperty(_assertThisInialized(_this18),"expandable",void 0);return _this18}_cC(InputTextarea,[{key:"_In",value:function _In(){_get(_gPO(InputTextarea.prototype),"_In",this).call(this);this._updatePreviewOnChange=false;this._submitOnChange=false}},{key:"_R",value:function _R(){this._inputField=UDOM.New("textarea",{class:"field",rows:3},this._host)}}]);return InputTextarea}(InputField);_defineProperty(InputTextarea,"__NFO__",NFOS.Ext({css:["@/inputs/expandable.css"]},InputField,["css"]));mdl.xp["default"]=mdl.xp=InputTextarea;UI.Register("nkmjs-input-textarea",InputTextarea)},{379:220,14:27,34:155,27:166,13:268}],234:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={CONTROL_S:rq(383),Control:rq(384),ControlGroup:rq(385),Shell:rq(386),Explorer:rq(387),WORKSPACE_CONTEXT:rq(388),DialogBox:rq(389),DialogInput:rq(390),DialogLayer:rq(391),DialogHandler:rq(392),Editor:rq(393),EditorEx:rq(394),EditorSlate:rq(395),EditorDrawerNav:rq(396),EditorDrawer:rq(397),Group:rq(398),I:rq(399),IGroup:rq(400),IItem:rq(401),IShell:rq(402),MetaControlGroup:rq(403),MetaControlItem:rq(404),HistoryIShell:rq(405),Tab:rq(406),StatusBar:rq(407),Tag:rq(408),Breadcrumb:rq(409),BreadcrumbItem:rq(410),Workspace:rq(411),WorkspaceCellNav:rq(412),WorkspaceCell:rq(413),WorkspaceRoot:rq(414)}},{384:237,385:235,383:236,389:238,392:239,390:240,391:241,393:242,397:244,396:243,394:245,395:246,387:247,398:248,399:249,405:250,400:251,401:252,402:253,403:254,404:255,409:257,410:256,407:258,406:259,408:260,386:261,388:263,411:267,413:265,412:264,414:266}],235:[function(rq,mdl,xp){"use strict";var _rq344=rq(13),U=_rq344.U,UDOM=_rq344.UDOM;var _rq345=rq(14),POOL=_rq345.POOL;var _rq346=rq(27),UI=_rq346.UI,US=_rq346.US,ExtExpand=_rq346.ExtExpand,T_B=_rq346.T_B,T_bar=_rq346.T_bar,ImageManipulator=_rq346.ImageManipulator,TextManipulator=_rq346.TextManipulator;var Control=rq(415);var ControlGroup=function(_Control){_inherits(ControlGroup,_Control);var _super138=_createSuper(ControlGroup);function ControlGroup(){_cCC(this,ControlGroup);return _super138.call(this)}_cC(ControlGroup,[{key:"_In",value:function _In(){_get(_gPO(ControlGroup.prototype),"_In",this).call(this);this._extExpand=new ExtExpand;this._extExpand._isExpanded=false;this._extExpand.W(US.EXPANDED,this._Expand,this);this._extExpand.W(US.COLLAPSED,this._Collapse,this);this._header=null;this._expandBtn=null;this._icon=null;this._label=null;this._toolbarClass=T_bar;this._toolbar=null;this._itemWrapper=null}},{key:"_pIn",value:function _pIn(){_get(_gPO(ControlGroup.prototype),"_pIn",this).call(this);this._extExpand.Sup(this,this._itemWrapper,this._expandBtn)}},{key:"_Style",value:function _Style(){return U.Merge(_get(_gPO(ControlGroup.prototype),"_Style",this).call(this),{":host":{},".header":{position:"relative",display:"flex","flex-direction":"row","align-items":"center","align-content":"stretch",padding:"4px","box-sizing":"border-box",flex:"0 1 auto"},".toggle":{flex:"0 0 auto"},".facade":{flex:"1 1 auto"},".toolbar":{flex:"0 0 auto"},".content":{},".content.expanded":{display:"flex"},".content.collapsed":{display:"none"}})}},{key:"_R",value:function _R(){this._header=UDOM.New("div",{class:"header"},this._host);this._expandBtn=this.A(T_B,"toggle",this._header);this._icon=new ImageManipulator(UDOM.New("span",{class:"icon"},this._header));this._label=new TextManipulator(UDOM.New("span",{class:"label"},this._header));this._toolbar=this.A(this._toolbarClass,"toolbar",this._header);this._expandBtn.icon="%ICON%/icon_expand_arrow.svg";this._expandBtn.scale=.75;this._itemWrapper=UDOM.New("div",{class:"content"},this._host);this.focusArea=this._header}},{key:"Expand",value:function Expand(){this._extExpand.Expand()}},{key:"_Expand",value:function _Expand(){if(this._data){this._data.expanded=true}this._expandBtn.rotation=90}},{key:"Collapse",value:function Collapse(){this._extExpand.Collapse()}},{key:"_Collapse",value:function _Collapse(){if(this._data){this._data.expanded=false}this._expandBtn.rotation=0}},{key:"Activate",value:function Activate(p_evt){if(this._expandBtn.focused){return false}return _get(_gPO(ControlGroup.prototype),"Activate",this).call(this,p_evt)}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(ControlGroup.prototype),"_CleanUp",this).call(this)}}]);return ControlGroup}(Control);mdl.xp["default"]=mdl.xp=ControlGroup;UI.Register("nkmjs-control-group",ControlGroup)},{415:237,14:27,27:166,13:268}],236:[function(rq,mdl,xp){"use strict";var CONTROL_S=function CONTROL_S(){_cCC(this,CONTROL_S)};_defineProperty(CONTROL_S,"VALUE_CHANGED",Symbol("valueCh"));_defineProperty(CONTROL_S,"VALUE_COMMITTED",Symbol("valueCommitted"));mdl.xp["default"]=mdl.xp=CONTROL_S},{}],237:[function(rq,mdl,xp){"use strict";var _rq347=rq(13),U=_rq347.U;var _rq348=rq(14),S=_rq348.S;var _rq349=rq(34),CSS=_rq349.CSS;var _rq350=rq(29),DATA_S=_rq350.DATA_S,DataBlock=_rq350.DataBlock,MetadataObserver=_rq350.MetadataObserver;var _rq351=rq(27),UI=_rq351.UI,OrientableW=_rq351.OrientableW;var _rq352=rq(25),CommandAction=_rq352.CommandAction;var Editor=rq(416);var Control=function(_OrientableW3){_inherits(Control,_OrientableW3);var _super139=_createSuper(Control);function Control(){_cCC(this,Control);return _super139.call(this)}_cC(Control,[{key:"_In",value:function _In(){_get(_gPO(Control.prototype),"_In",this).call(this);this._metadataObserver=new MetadataObserver;this._dataObserver.H(DATA_S.DIRTY,this._OnDataDirty,this);this._dataObserver.H(S.UPDATED,this._OnDataUd,this)}},{key:"context",get:function get(){return this._context},set:function set(v){if(this._context===v){return}var oldValue=this._context;this._context=v;this._OnContextCh(oldValue)}},{key:"_OnContextCh",value:function _OnContextCh(p_oldValue){}},{key:"editor",get:function get(){var p=this._parent;while(p!=null){if(U.isInstanceOf(p,Editor)){return p}p=p._parent}return null}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{position:"relative",display:"flex",flex:"0 1 auto","min-width":0}},_get(_gPO(Control.prototype),"_Style",this).call(this))}},{key:"_OnDataCh",value:function _OnDataCh(p_oldValue){_get(_gPO(Control.prototype),"_OnDataCh",this).call(this,p_oldValue);if(U.isInstanceOf(this._data,DataBlock)){this._metadataObserver.target=this._data.metadata}else{this._metadataObserver.target=null}}},{key:"_OnDataDirty",value:function _OnDataDirty(p_data){this._OnDataUd(p_data)}},{key:"_CleanUp",value:function _CleanUp(){this.context=null;_get(_gPO(Control.prototype),"_CleanUp",this).call(this)}},{key:"_Do",value:function _Do(p_actionClass,p_operation){CommandAction.Do(this,p_actionClass,p_operation)}}]);return Control}(OrientableW);mdl.xp["default"]=mdl.xp=Control;UI.Register("nkmjs-control",Control)},{416:242,25:1,14:27,29:52,34:155,27:166,13:268}],238:[function(rq,mdl,xp){"use strict";var _rq353=rq(13),U=_rq353.U,UDOM=_rq353.UDOM;var _rq354=rq(18),Dictionary=_rq354.Dictionary,List=_rq354.List;var _rq355=rq(14),NFOS=_rq355.NFOS,OptionsHandler=_rq355.OptionsHandler;var _rq356=rq(34),CSS=_rq356.CSS,FONT_FLAG=_rq356.FONT_FLAG;var _rq357=rq(27),UI=_rq357.UI,US=_rq357.US,W=_rq357.W,TextManipulator=_rq357.TextManipulator,ImageManipulator=_rq357.ImageManipulator,Frame=_rq357.Frame,T_bar=_rq357.T_bar,BEx=_rq357.BEx,UF=_rq357.UF;var _rq358=rq(417),INPUT_S=_rq358.INPUT_S,Inputb_=_rq358.Inputb_,InputFormHandler=_rq358.InputFormHandler;var _rq359=rq(28),DialogInfos=_rq359.DialogInfos;var DialogBox=function(_W5){_inherits(DialogBox,_W5);var _super140=_createSuper(DialogBox);function DialogBox(){_cCC(this,DialogBox);return _super140.call(this)}_cC(DialogBox,[{key:"_In",value:function _In(){_get(_gPO(DialogBox.prototype),"_In",this).call(this);this._formHandler=new InputFormHandler;this._formHandler.W(INPUT_S.FORM_INVALID,this._OnFormInvalid,this);this._formHandler.W(INPUT_S.FORM_READY,this._OnFormReady,this);this._header=null;this._body=null;this._footer=null;this._title=null;this._icon=null;this._hasInput=false;this._handles=new Array(0);this._contents=new Array(0);this._submitMap=new Dictionary;this._submitList=new List;this._toolbarClass=T_bar;this._toolbarDefaultBClass=BEx;this._toolbar=null;this._optionsHandler=new OptionsHandler(this._Bind(this._OnOptionsUd),this._Bind(this._OnOptionsWillU));this._optionsHandler.H("_title","title","!!! MISSING TITLE !!!");this._optionsHandler.H("_icon","icon",null);this._optionsHandler.H("_message","message",null);this._optionsHandler.H("_actions",this._Bind(this.SActions),null);this._optionsHandler.H("_content",this._Bind(this.SContent));this._Bind(this._Close);this._Bind(this._Submit)}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{display:"flex","flex-flow":"column","align-content":"stretch","align-items":"stretch","justify-content":"center",overflow:"hidden"},".header":{},".footer":{display:"flex","flex-flow":"column","align-content":"flex-end","align-items":"flex-end",flex:"0 0 auto"},".toolbar":{flex:"0 0 auto"},".body":{flex:"1 1 auto"}},_get(_gPO(DialogBox.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){this._icon=new ImageManipulator(UDOM.New("div",{class:"icon"},this._host),false,true);this._header=UDOM.New("div",{class:"group header"},this._host);this._body=UDOM.New("div",{class:"group body"},this._host);this._footer=UDOM.New("div",{class:"group footer"},this._host);this._toolbar=this.A(this._toolbarClass,"toolbar",this._footer);this._toolbar._defaultBClass=this._toolbarDefaultBClass;this._toolbar.size=UF.SIZE_M;this._title=new TextManipulator(UDOM.New("span",{class:"title ".concat(FONT_FLAG.MEDIUM)},this._header),false);this._messageElement=null}},{key:"_OnOptionsWillU",value:function _OnOptionsWillU(o){if(!U.isInstanceOf(o,DialogInfos)){throw new Error("DialogLayer expect data of type DialogInfos, got ".concat(o.constructor.name," instead."))}}},{key:"_OnOptionsUd",value:function _OnOptionsUd(o){this._hasInput=this._formHandler._inputList.count>0;if(this._hasInput){this._formHandler.ValidateForm()}}},{key:"title",get:function get(){return this._title},set:function set(p_title){this._title.S(p_title)}},{key:"icon",get:function get(){return this._icon},set:function set(p_icon){this._icon.S(p_icon)}},{key:"message",set:function set(p_message){if(!this._messageElement){this._messageElement=UDOM.New("span",{class:"item message"},this._body)}this._messageElement.innerHTML=p_message;this._contents.push(this._messageElement)}},{key:"SActions",value:function SActions(p_actions){if(p_actions){for(var i=0,n=p_actions.length;i<n;i++){var _opts=p_actions[i];this.CreateHandle(_opts,U.G(_opts,"cl",null))}}else{this.CreateHandle({text:"Close"})}}},{key:"SContent",value:function SContent(p_content){if(!Array.isArray(p_content)){throw new Error("Cannot build dialog content list out of ".concat(p_content))}for(var i=0,n=p_content.length;i<n;i++){var itemNfos=p_content[i],itemClass=itemNfos.cl,itemData=itemNfos.data;if(!itemClass){throw new Error("Cannot create item with unspecified class.")}var item=this.A(itemClass,"item",this._body);if(U.isInstanceOf(itemClass,Inputb_)){item.inputId=itemNfos.inputId;if(itemNfos.value){item.currentValue=itemNfos.value}var validations=itemNfos.validations;if(validations){for(var _i27=0,_n22=validations.length;_i27<_n22;_i27++){item.AValidation(validations[_i27])}}this._formHandler.Register(item)}if(itemData){item.data=itemData}this._contents.push(item)}}},{key:"_OnDataUd",value:function _OnDataUd(p_data){this._Clear();this._optionsHandler.P(this,p_data)}},{key:"_ClearHandles",value:function _ClearHandles(){var handles=this._handles;while(handles.length!=0){handles.pop().Release()}}},{key:"CreateHandle",value:function CreateHandle(o){var p_class=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var handle=this._toolbar.CreateHandle(o,p_class);this._handles.push(handle);if(U.G(o,"submit",false)){this._submitMap.S(handle,o.submit);this._submitList.A(handle);handle.W(US.TRIGGERED,this._Submit)}if(U.G(o,"close",true)){handle.W(US.TRIGGERED,this._Close)}return handle}},{key:"_OnFormInvalid",value:function _OnFormInvalid(p_handler){this._submitList.ForEach((function(it){it.activable=false}))}},{key:"_OnFormReady",value:function _OnFormReady(p_handler){this._submitList.ForEach((function(it){it.activable=true}))}},{key:"_Close",value:function _Close(){this._data.Consume()}},{key:"_Submit",value:function _Submit(p_source){var cb=this._submitMap.G(p_source);cb.fn.call(cb.thisArg,this._formHandler.inputValues)}},{key:"_Clear",value:function _Clear(){this._submitMap.Clear();this._submitList.Clear();this._formHandler.Clear();this._ClearHandles();for(var i=0,n=this._contents.length;i<n;i++){var item=this._contents[i];if("Release"in item){this._contents[i].Release()}else{UDOM.RM(item)}}this._hasInput=false;this._contents.length=0}},{key:"_CleanUp",value:function _CleanUp(){this._Clear();_get(_gPO(DialogBox.prototype),"_CleanUp",this).call(this)}}]);return DialogBox}(W);_defineProperty(DialogBox,"__NFO__",NFOS.Ext({css:["@/dialogs/dialog-box.css"]},W,["css"]));mdl.xp["default"]=mdl.xp=DialogBox;UI.Register("nkmjs-dialog-box",DialogBox)},{18:21,14:27,28:81,34:155,27:166,417:218,13:268}],239:[function(rq,mdl,xp){"use strict";var _rq360=rq(13),U=_rq360.U;var _rq361=rq(18),Dictionary=_rq361.Dictionary;var _rq362=rq(27),UI=_rq362.UI,LayerC_=_rq362.LayerC_;var _rq363=rq(25),ACTION_REQUEST=_rq363.ACTION_REQUEST;var _rq364=rq(28),DIALOG_S=_rq364.DIALOG_S,DialogInfos=_rq364.DialogInfos;var DialogLayer=rq(418);var _rq365=rq(34),CSS=_rq365.CSS;var DialogHandler=function(_LayerC_){_inherits(DialogHandler,_LayerC_);var _super141=_createSuper(DialogHandler);function DialogHandler(){_cCC(this,DialogHandler);return _super141.call(this)}_cC(DialogHandler,[{key:"_In",value:function _In(){_get(_gPO(DialogHandler.prototype),"_In",this).call(this);this._RegisterLocalRequestHandler(ACTION_REQUEST.DIALOG,this.HandleDialogRequest);this._layerMap=new Dictionary}},{key:"_pIn",value:function _pIn(){_get(_gPO(DialogHandler.prototype),"_pIn",this).call(this);this.visible=false}},{key:"_Style",value:function _Style(){var s=CSS.Extends({":host":{"pointer-events":"none"},".layer":{"pointer-events":"auto"}},_get(_gPO(DialogHandler.prototype),"_Style",this).call(this));s[".".concat(this._layerClassName)]["pointer-events"]="auto";return s}},{key:"HandleDialogRequest",value:function HandleDialogRequest(p_request){this.BringToFront();this.visible=true;var dialogInfos=p_request.GOption("data",null);if(!dialogInfos){throw new Error("Cannot build dialog from empty DialogInfos")}var newLayer=this.A(DialogLayer);newLayer.data=dialogInfos;dialogInfos.W(DIALOG_S.CONSUMED,this._OnDialogConsumed,this);this._layerMap.S(dialogInfos,newLayer);p_request.HandleSuccess(this)}},{key:"_OnDialogConsumed",value:function _OnDialogConsumed(p_infos){var layer=this._layerMap.G(p_infos);this._layerMap.RM(p_infos);layer.Release()}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(DialogHandler.prototype),"_CleanUp",this).call(this);this.visible=false}}]);return DialogHandler}(LayerC_);mdl.xp["default"]=mdl.xp=DialogHandler;UI.Register("nkmjs-dialog-handler",DialogHandler)},{418:241,25:1,18:21,28:81,34:155,27:166,13:268}],240:[function(rq,mdl,xp){"use strict";var _rq366=rq(27),UI=_rq366.UI,W=_rq366.W;var DialogInput=function(_W6){_inherits(DialogInput,_W6);var _super142=_createSuper(DialogInput);function DialogInput(){_cCC(this,DialogInput);return _super142.call(this)}_cC(DialogInput,[{key:"_In",value:function _In(){_get(_gPO(DialogInput.prototype),"_In",this).call(this)}},{key:"dialogBox",set:function set(v){this._dialogBox=v}},{key:"GDialogData",value:function GDialogData(){return null}}]);return DialogInput}(W);mdl.xp["default"]=mdl.xp=DialogInput;UI.Register("nkmjs-dialog-input",DialogInput)},{27:166}],241:[function(rq,mdl,xp){"use strict";var _rq367=rq(13),U=_rq367.U,UDOM=_rq367.UDOM;var _rq368=rq(34),CSS=_rq368.CSS;var _rq369=rq(27),UI=_rq369.UI,Layer=_rq369.Layer;var _rq370=rq(28),DialogInfos=_rq370.DialogInfos;var DialogBox=rq(419);var DialogLayer=function(_Layer2){_inherits(DialogLayer,_Layer2);var _super143=_createSuper(DialogLayer);function DialogLayer(){_cCC(this,DialogLayer);return _super143.call(this)}_cC(DialogLayer,[{key:"_In",value:function _In(){_get(_gPO(DialogLayer.prototype),"_In",this).call(this);this._background=null;this._msgBox=null}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{display:"flex","flex-flow":"row","align-content":"center","align-items":"center","justify-content":"center"},".bg":{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","background-color":"rgba(23,23,23,0.3)","backdrop-filter":"blur(5px)"},".box":{flex:"1 1 auto","max-width":"500px"}},_get(_gPO(DialogLayer.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){this._background=UDOM.New("div",{class:"bg"},this._host)}},{key:"_OnDataCh",value:function _OnDataCh(p_oldData){_get(_gPO(DialogLayer.prototype),"_OnDataCh",this).call(this,p_oldData);if(this._msgBox){this._msgBox.Release();this._msgBox=null}if(!this._data){return}var nfos=this._data;if(!U.isInstanceOf(nfos,DialogInfos)){throw new Error("DialogLayer expect data of type DialogInfos, got ".concat(this._data.constructor.name," instead."))}var boxClass=U.Default(nfos.dialogClass,DialogBox);this._msgBox=this.A(boxClass,"box");this._msgBox.data=nfos}}]);return DialogLayer}(Layer);mdl.xp["default"]=mdl.xp=DialogLayer;UI.Register("nkmjs-dialog-view",DialogLayer)},{419:238,28:81,34:155,27:166,13:268}],242:[function(rq,mdl,xp){"use strict";var _rq371=rq(13),U=_rq371.U;var _rq372=rq(14),S=_rq372.S,COMMON_FLAG=_rq372.COMMON_FLAG,Observer=_rq372.Observer;var _rq373=rq(25),ActionStack=_rq373.ActionStack,Command=_rq373.Command;var _rq374=rq(29),DATA_S=_rq374.DATA_S;var _rq375=rq(27),UI=_rq375.UI,M=_rq375.M,View=_rq375.View;var Editor=function(_View3){_inherits(Editor,_View3);var _super144=_createSuper(Editor);function Editor(){_cCC(this,Editor);return _super144.call(this)}_cC(Editor,[{key:"_In",value:function _In(){_get(_gPO(Editor.prototype),"_In",this).call(this);this._actionStack=new ActionStack;this._dataObserver.H(DATA_S.DIRTY,this._OnDataDirty,this);this._dataObserver.H(DATA_S.DIRTY_CLEARED,this._OnDataCleaned,this);this._inspectedData=null;this._inspectedObserver=new Observer;this._inspectedObserver.H(S.RELEASED,this._OnInspectedDataReleased,this);this._flags.A(this,COMMON_FLAG.WARNING);this._Bind(this.Inspect)}},{key:"_OnDataCh",value:function _OnDataCh(p_oldData){this._actionStack.Clear();this._commands.context=this._data;_get(_gPO(Editor.prototype),"_OnDataCh",this).call(this,p_oldData);this.inspectedData=null}},{key:"_pDataCh",value:function _pDataCh(p_oldData){_get(_gPO(Editor.prototype),"_pDataCh",this).call(this,p_oldData);if(!this._data){}else{if(this._data.isDirty){this._OnDataDirty(this._data)}else{this._OnDataCleaned(this._data)}}}},{key:"_OnDataDirty",value:function _OnDataDirty(p_data){}},{key:"_OnDataCleaned",value:function _OnDataCleaned(p_data){}},{key:"inspectedData",get:function get(){return this._inspectedData},set:function set(v){if(this._inspectedData===v){return}var oldValue=this._inspectedData;this._inspectedData=v;if(oldValue){this._inspectedObserver.Unobserve(oldValue)}if(v){this._inspectedObserver.Observe(v)}this._OnInspectedDataCh(oldValue)}},{key:"_OnInspectedDataCh",value:function _OnInspectedDataCh(p_oldData){}},{key:"_OnInspectedDataReleased",value:function _OnInspectedDataReleased(){this.inspectedData=null}},{key:"Inspect",value:function Inspect(p_data){this.inspectedData=p_data}},{key:"Do",value:function Do(p_actionClass,o){this._actionStack.ToggleGrouping(UI.dragLength>1);this._actionStack.Do(p_actionClass,o)}},{key:"Undo",value:function Undo(){this._actionStack.Undo()}},{key:"Redo",value:function Redo(){this._actionStack.Redo()}}]);return Editor}(View);mdl.xp["default"]=mdl.xp=Editor;UI.Register("nkmjs-editor",Editor)},{25:1,14:27,29:52,27:166,13:268}],243:[function(rq,mdl,xp){"use strict";var _rq376=rq(13),U=_rq376.U;var _rq377=rq(34),CSS=_rq377.CSS;var _rq378=rq(27),UI=_rq378.UI,W=_rq378.W,DrawerNav=_rq378.DrawerNav;var EditorDrawerNav=function(_DrawerNav){_inherits(EditorDrawerNav,_DrawerNav);var _super145=_createSuper(EditorDrawerNav);function EditorDrawerNav(){_cCC(this,EditorDrawerNav);return _super145.call(this)}_cC(EditorDrawerNav,[{key:"_In",value:function _In(){_get(_gPO(EditorDrawerNav.prototype),"_In",this).call(this)}},{key:"_Style",value:function _Style(){return CSS.Extends({},_get(_gPO(EditorDrawerNav.prototype),"_Style",this).call(this))}},{key:"_OpenStings",value:function _OpenStings(){console.log("Open Stings")}}]);return EditorDrawerNav}(DrawerNav);mdl.xp["default"]=mdl.xp=EditorDrawerNav;UI.Register("nkmjs-editor-drawer-nav",EditorDrawerNav)},{34:155,27:166,13:268}],244:[function(rq,mdl,xp){"use strict";var _rq379=rq(13),U=_rq379.U;var _rq380=rq(34),CSS=_rq380.CSS;var _rq381=rq(27),UI=_rq381.UI,W=_rq381.W,Drawer=_rq381.Drawer;var EditorDrawerNav=rq(420);var EditorDrawer=function(_Drawer){_inherits(EditorDrawer,_Drawer);var _super146=_createSuper(EditorDrawer);function EditorDrawer(){_cCC(this,EditorDrawer);return _super146.call(this)}_cC(EditorDrawer,[{key:"_In",value:function _In(){_get(_gPO(EditorDrawer.prototype),"_In",this).call(this);this._navClass=EditorDrawerNav}},{key:"_pIn",value:function _pIn(){_get(_gPO(EditorDrawer.prototype),"_pIn",this).call(this)}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{width:"354px",flex:"0 0 auto","background-color":"rgba(127,127,127,0.1)"},".controls":{"background-color":"rgba(127,127,127,0.0)"}},_get(_gPO(EditorDrawer.prototype),"_Style",this).call(this))}}]);return EditorDrawer}(Drawer);mdl.xp["default"]=mdl.xp=EditorDrawer;UI.Register("nkmjs-editor-drawer",EditorDrawer)},{420:243,34:155,27:166,13:268}],245:[function(rq,mdl,xp){"use strict";var _rq382=rq(13),U=_rq382.U,UDOM=_rq382.UDOM;var _rq383=rq(14),COMMON_FLAG=_rq383.COMMON_FLAG;var _rq384=rq(34),CSS=_rq384.CSS;var _rq385=rq(29),Cg=_rq385.Cg;var _rq386=rq(27),UI_ID=_rq386.UI_ID,UI=_rq386.UI,UF=_rq386.UF,View=_rq386.View,DOMTemplate=_rq386.DOMTemplate,TPLHeaderBodyFooter=_rq386.TPLHeaderBodyFooter;var IShell=rq(421);var HistoryIShell=rq(422);var EditorDrawer=rq(423);var Editor=rq(424);var StatusBar=rq(425);var EditorEx=function(_Editor){_inherits(EditorEx,_Editor);var _super147=_createSuper(EditorEx);function EditorEx(){_cCC(this,EditorEx);return _super147.call(this)}_cC(EditorEx,[{key:"_In",value:function _In(){_get(_gPO(EditorEx.prototype),"_In",this).call(this);this._drawerCg=new Cg(false);this._drawer=null;this._inspectorShell=null;this._historyI=null;this._viewport=null;this._header=null;this._body=null;this._footer=null;this._topStatus=null;this._bottomStatus=null}},{key:"_pIn",value:function _pIn(){_get(_gPO(EditorEx.prototype),"_pIn",this).call(this);var confs=new Array(0);this._InDrawerCg(confs);this._drawer.catalog=this._drawerCg;var conf=null;var item=null;var view=null;var assign=null;for(var i=0,n=confs.length;i<n;i++){conf=confs[i];item=this._drawerCg.Register(conf);view=item.GOption("view",null);assign=U.G(conf,"assign",null);console.log("".concat(assign," >> ").concat(view));if(view&&assign){this[assign]=view}}}},{key:"_InDrawerCg",value:function _InDrawerCg(p_configList){var _p_configList$push;p_configList.push((_p_configList$push={},_defineProperty(_p_configList$push,UI_ID.NAME,"I"),_defineProperty(_p_configList$push,UI_ID.ICON,"%ICON%/icon_parameters.svg"),_defineProperty(_p_configList$push,"viewType",this.constructor.__default_inspectorShellClass),_defineProperty(_p_configList$push,"assign","_inspector"),_p_configList$push))}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{position:"relative",display:"flex","align-items":"stretch","align-content":"stretch","min-width":0},":host(.vertical)":{"flex-flow":"row"},":host(.horizontal)":{"flex-flow":"column"},":host(.vertical).fs":{},":host(.horizontal).fs":{},".fs":{flex:"0 0 auto"},".body":{position:"relative",display:"flex","align-items":"stretch","align-content":"stretch",flex:"1 1 auto"},".viewport":{position:"relative",display:"flex",flex:"1 1 auto"},".drawer":{position:"relative",display:"flex",flex:"0 0 auto"},".topstatus":{position:"absolute",width:"100%"}},_get(_gPO(EditorEx.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){DOMTemplate.R(TPLHeaderBodyFooter,this,_defineProperty({},UI_ID.OWNER,this));this._drawer=this.A(this.constructor.__default_drawerClass,"drawer",this._body);this._viewport=this.A(this.constructor.__default_viewportClass,"viewport",this._body);this._inspectorShell=this.A(this.constructor.__default_inspectorShellClass,"inspector",this._body);this._inspectorShell.orientation=UF.HORIZONTAL;this._drawer.orientation=UF.HORIZONTAL}},{key:"_OnDataCh",value:function _OnDataCh(p_oldData){_get(_gPO(EditorEx.prototype),"_OnDataCh",this).call(this,p_oldData);this._inspectorShell.data=this._data;this._inspectorShell.context=this._data}},{key:"_OnDataDirty",value:function _OnDataDirty(p_data){_get(_gPO(EditorEx.prototype),"_OnDataDirty",this).call(this,p_data);this._ToggleWarning(true)}},{key:"_OnDataCleaned",value:function _OnDataCleaned(p_data){_get(_gPO(EditorEx.prototype),"_OnDataCleaned",this).call(this,p_data);this._ToggleWarning(false)}},{key:"_ToggleWarning",value:function _ToggleWarning(p_toggle){return;var bar=this._topStatus;if(p_toggle){this._flags.S(COMMON_FLAG.WARNING,true);bar.flag=COMMON_FLAG.WARNING;bar.text="There are unsaved modifications.";bar.htitle="Unsaved modifications are only affect the ecosystem once applied.";bar.visible=true}else{this._flags.S(COMMON_FLAG.WARNING,false);bar.visible=false}}},{key:"Inspect",value:function Inspect(p_data){_get(_gPO(EditorEx.prototype),"Inspect",this).call(this,p_data);this._inspectorShell.RequestDisplay()}},{key:"_OnInspectedDataCh",value:function _OnInspectedDataCh(p_oldData){_get(_gPO(EditorEx.prototype),"_OnInspectedDataCh",this).call(this,p_oldData);if(this._inspectedData){this._inspectorShell.data=this._inspectedData}else{this._inspectorShell.data=this._data}}}]);return EditorEx}(Editor);_defineProperty(EditorEx,"__default_drawerClass",EditorDrawer);_defineProperty(EditorEx,"__default_inspectorShellClass",IShell);_defineProperty(EditorEx,"__default_historyIClass",HistoryIShell);_defineProperty(EditorEx,"__default_viewportClass",View);mdl.xp["default"]=mdl.xp=EditorEx;UI.Register("nkmjs-editor-ex",EditorEx)},{424:242,422:250,421:253,425:258,423:244,14:27,29:52,34:155,27:166,13:268}],246:[function(rq,mdl,xp){"use strict";var _rq387=rq(13),U=_rq387.U;var _rq388=rq(27),UI=_rq388.UI;var EditorEx=rq(426);var SlateEditor=function(_EditorEx){_inherits(SlateEditor,_EditorEx);var _super148=_createSuper(SlateEditor);function SlateEditor(){_cCC(this,SlateEditor);return _super148.call(this)}_cC(SlateEditor,[{key:"_In",value:function _In(){_get(_gPO(SlateEditor.prototype),"_In",this).call(this)}},{key:"_R",value:function _R(){_get(_gPO(SlateEditor.prototype),"_R",this).call(this)}}]);return SlateEditor}(EditorEx);mdl.xp["default"]=mdl.xp=SlateEditor;UI.Register("nkmjs-editor-slate",SlateEditor)},{426:245,27:166,13:268}],247:[function(rq,mdl,xp){"use strict";var _rq389=rq(13),U=_rq389.U,UDOM=_rq389.UDOM;var _rq390=rq(27),UI=_rq390.UI,View=_rq390.View;var Explorer=function(_View4){_inherits(Explorer,_View4);var _super149=_createSuper(Explorer);function Explorer(){_cCC(this,Explorer);return _super149.call(this)}_cC(Explorer,[{key:"_In",value:function _In(){_get(_gPO(Explorer.prototype),"_In",this).call(this)}},{key:"header",get:function get(){return this._header}},{key:"body",get:function get(){return this._body}},{key:"footer",get:function get(){return this._footer}},{key:"_Style",value:function _Style(){var shadowSize=5;var shadowColor="rgba(0,0,0,0.5)";return{":host":{position:"relative",flex:"1 1 auto","min-width":0,display:"flex","flex-flow":"column nowrap","align-content":"stretch","align-items":"stretch","background-color":"rgba(1,1,1,0.1)"},".group":{position:"relative",flex:"1 0 auto"},".header":{flex:"0 0 auto"},".footer":{flex:"0 0 auto"},".highlight":{"background-color":"#ff0000"},".body":{"overflow-y":"overlay","min-width":0,flex:"1 1 1px","box-shadow":"inset 0px 11px ".concat(shadowSize,"px -10px ").concat(shadowColor,", inset 0px -11px ").concat(shadowSize,"px -10px ").concat(shadowColor)},".body::-webkit-scrollbar-track":{"background-color":"rgba(127,127,127,0.05)"},".body::-webkit-scrollbar":{width:"2px",height:"2px","background-color":"rgba(127,127,127,0.05)"},".body::-webkit-scrollbar-thumb":{"background-color":"rgba(255,255,255,0.05)"},".body:hover::-webkit-scrollbar":{width:"4px",height:"4px"},".body:hover::-webkit-scrollbar-thumb":{"background-color":"rgba(255,255,255,0.15)"}}}},{key:"_R",value:function _R(){this._header=UDOM.New("div",{class:"header group"},this._host);this._body=UDOM.New("div",{class:"body group"},this._host);this._footer=UDOM.New("div",{class:"footer group"},this._host);this._wrapper=this._body}}]);return Explorer}(View);mdl.xp["default"]=mdl.xp=Explorer;UI.Register("nkmjs-explorer",Explorer)},{27:166,13:268}],248:[function(rq,mdl,xp){var _rq391=rq(13),U=_rq391.U,UDOM=_rq391.UDOM;var _rq392=rq(18),Dictionary=_rq392.Dictionary;var _rq393=rq(27),UI=_rq393.UI,OrientableW=_rq393.OrientableW;var Group=function(_OrientableW4){_inherits(Group,_OrientableW4);var _super150=_createSuper(Group);function Group(){_cCC(this,Group);return _super150.call(this)}_cC(Group,[{key:"_In",value:function _In(){_get(_gPO(Group.prototype),"_In",this).call(this);this._header=null;this._footer=null;this._groupMap=new Dictionary;this._groupList=new Array(0)}},{key:"header",get:function get(){return this._header}},{key:"body",get:function get(){return this._wrapper}},{key:"footer",get:function get(){return this._footer}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex",flex:"1 1 auto","margin-bottom":"20px"},".header":{position:"relative",flex:"0 0 auto"},".footer":{position:"relative",flex:"0 0 auto"},".body":{position:"relative",display:"flex",flex:"1 1 auto"},":host(.horizontal) .body":{"flex-flow":"row wrap","align-content":"flex-start","align-items":"flex-start"},":host(.vertical) .body":{"flex-flow":"column nowrap","align-content":"stretch","align-items":"stretch"}}}},{key:"_R",value:function _R(){this._header=UDOM.New("div",{class:"header"},this._host);this._wrapper=UDOM.New("div",{class:"body"},this._host);this._footer=UDOM.New("div",{class:"footer"},this._host)}},{key:"_GOrCreateGroup",value:function _GOrCreateGroup(p_key){var p_flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_class=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;p_class=U.Default(p_class,Group);var group=this._groupMap.G(p_key);if(!group){group=this.A(p_class,"group tile-ctnr",this._viewport.wrapper);this._groupMap.S(p_key,group);this._groupList.push(group);if(p_flags){for(var member in p_flags){group._flags.S(member,p_flags[member])}}this._OnGroupCreated(p_key,group);this._B(Group.GROUP_CREATED,this,group)}return group}},{key:"_OnGroupCreated",value:function _OnGroupCreated(p_key,p_group){}},{key:"_ClearGroup",value:function _ClearGroup(p_key){var group=this._groupMap.G(p_key);if(group){var index=this._groupList.indexOf(group);this._groupList.splice(index,1);this._groupMap.RM(p_key);group.Release()}}},{key:"_ClearAllGroups",value:function _ClearAllGroups(){this._groupMap.Clear();var list=this._groupList;for(var i=0,n=list.length;i<n;i++){list[i].Release()}list.length=0}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(Group.prototype),"_CleanUp",this).call(this);this._ClearAllGroups()}}]);return Group}(OrientableW);_defineProperty(Group,"GROUP_CREATED",Symbol("groupCreated"));mdl.xp["default"]=mdl.xp=Group;UI.Register("nkmjs-group",Group)},{18:21,27:166,13:268}],249:[function(rq,mdl,xp){"use strict";var _rq394=rq(13),U=_rq394.U;var _rq395=rq(14),S=_rq395.S;var _rq396=rq(27),UI=_rq396.UI;var Control=rq(427);var I=function(_Control2){_inherits(I,_Control2);var _super151=_createSuper(I);function I(){_cCC(this,I);return _super151.call(this)}_cC(I,[{key:"_In",value:function _In(){_get(_gPO(I.prototype),"_In",this).call(this);this._inspectors=new Array(0)}},{key:"_Style",value:function _Style(){return U.Merge(_get(_gPO(I.prototype),"_Style",this).call(this),{":host":{position:"relative",display:"flex","flex-flow":"column","align-content":"stretch","align-items":"stretch","background-color":"rgba(0,0,0,0.0)"}})}},{key:"AI",value:function AI(p_cl){var p_cssSelector=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this._RegisterI(this.A(p_cl,p_cssSelector?"group ".concat(p_cssSelector):"group"))}},{key:"_RegisterI",value:function _RegisterI(p_inspector){if(this._inspectors.includes(p_inspector)){return}this._inspectors.push(p_inspector);return p_inspector}},{key:"_OnDataCh",value:function _OnDataCh(p_oldData){_get(_gPO(I.prototype),"_OnDataCh",this).call(this,p_oldData);for(var i=0,n=this._inspectors.length;i<n;i++){var inspector=this._inspectors[i];inspector.context=this._context;inspector.data=this._data}if(!this._data&&!U.Void(this._context)){this.data=this._context}}}]);return I}(Control);mdl.xp["default"]=mdl.xp=I;UI.Register("nkmjs-inspector",I)},{427:237,14:27,27:166,13:268}],250:[function(rq,mdl,xp){"use strict";var _rq397=rq(13),U=_rq397.U;var _rq398=rq(27),UI=_rq398.UI;var IShell=rq(428);var HistoryIShell=function(_IShell){_inherits(HistoryIShell,_IShell);var _super152=_createSuper(HistoryIShell);function HistoryIShell(){_cCC(this,HistoryIShell);return _super152.call(this)}_cC(HistoryIShell,[{key:"_In",value:function _In(){_get(_gPO(HistoryIShell.prototype),"_In",this).call(this)}},{key:"_pIn",value:function _pIn(){_get(_gPO(HistoryIShell.prototype),"_pIn",this).call(this);this._icon.S(null);this._title.S("HISTORY");this._subtitle.S("Editor")}},{key:"_Style",value:function _Style(){return U.Merge(_get(_gPO(HistoryIShell.prototype),"_Style",this).call(this),{":host":{},".facade":{},".navigation":{}})}},{key:"_R",value:function _R(){_get(_gPO(HistoryIShell.prototype),"_R",this).call(this)}}]);return HistoryIShell}(IShell);mdl.xp["default"]=mdl.xp=HistoryIShell;UI.Register("nkmjs-history-inspector-shell",HistoryIShell)},{428:253,27:166,13:268}],251:[function(rq,mdl,xp){var _rq399=rq(13),U=_rq399.U,UDOM=_rq399.UDOM;var _rq400=rq(27),UI_ID=_rq400.UI_ID,UI=_rq400.UI,US=_rq400.US,ExtExpand=_rq400.ExtExpand,T_bar=_rq400.T_bar,T_B=_rq400.T_B,DOMTemplate=_rq400.DOMTemplate,TPLHeaderBodyFooter=_rq400.TPLHeaderBodyFooter,Extm=_rq400.Extm,UF=_rq400.UF,M=_rq400.M,TPLFacadeExpandTitle=_rq400.TPLFacadeExpandTitle;var IItem=rq(429);var IGroup=function(_IItem){_inherits(IGroup,_IItem);var _super153=_createSuper(IGroup);function IGroup(){var _this19;_cCC(this,IGroup);_this19=_super153.call(this);_this19._staticContentDefault=_this19._staticContent;return _this19}_cC(IGroup,[{key:"_In",value:function _In(){_get(_gPO(IGroup.prototype),"_In",this).call(this);this._extExpand=new ExtExpand;this._extExpand._isExpanded=false;this._extExpand.W(US.EXPANDED,this._Expand,this);this._extExpand.W(US.COLLAPSED,this._Collapse,this);this._header=null;this._expandOnHeaderAltActivation=U.Default(this._expandOnHeaderAltActivation,true);this._useGroupExpand=false;this._expandBtnClass=T_B;this._expandBtn=null;this._toolbarClass=T_bar;this._toolbar=null;this._footer=null;this._staticContent=true;this._alwaysExpanded=false;this._interactions.H(M.BTN_LEFT,M.RELEASE_TWICE,this._Bind(this.AltActivate))}},{key:"_pIn",value:function _pIn(){_get(_gPO(IGroup.prototype),"_pIn",this).call(this);this._extExpand.Sup(this,this._wrapper,this._expandIcon.element)}},{key:"staticContent",get:function get(){return this._staticContent},set:function set(v){this._staticContent=v}},{key:"header",get:function get(){return this._header}},{key:"body",get:function get(){return this._body}},{key:"footer",get:function get(){return this._footer}},{key:"_Style",value:function _Style(){return U.Merge(_get(_gPO(IGroup.prototype),"_Style",this).call(this),{":host":{position:"relative",display:"flex","flex-flow":"column nowrap","align-content":"stretch","align-items":"stretch",margin:"5px","min-width":0},".header":{position:"relative",display:"flex","flex-flow":"row nowrap","align-content":"stretch","align-items":"stretch","justify-content":"space-between",flex:"1 1 auto",padding:"12px"},".expandIcon":{flex:"0 0 auto"},".facade":{flex:"0 1 auto"},".toolbar":{transition:"all 0.3s ease",flex:"0 0 auto",opacity:0},":host(.focused) .toolbar":{opacity:1},".body":{position:"relative",display:"flex","flex-flow":"column nowrap","align-content":"stretch","align-items":"stretch",flex:"1 1 auto"},".group":{"min-width":0},":host(.collapsed) .body":{display:"none"},":host(.expanded) .body":{display:"flex"}})}},{key:"_R",value:function _R(){var _DOMTemplate$R4;DOMTemplate.R(TPLHeaderBodyFooter,this,_defineProperty({},UI_ID.OWNER,this));DOMTemplate.R(TPLFacadeExpandTitle,this._header,(_DOMTemplate$R4={},_defineProperty(_DOMTemplate$R4,UI_ID.OWNER,this),_defineProperty(_DOMTemplate$R4,"expandIcon",{url:"%ICON%/icon_expand_arrow.svg",htitle:"Expand"}),_DOMTemplate$R4));this._toolbar=this.A(this._toolbarClass,"toolbar",this._header);this._wrapper=this._body;if(this._useGroupExpand){var _this$_toolbar$Create,_this$_toolbar$Create2;this._expandAllBtn=this._toolbar.CreateHandle((_this$_toolbar$Create={},_defineProperty(_this$_toolbar$Create,UI_ID.ICON,"%ICON%/icon_expand_all.svg"),_defineProperty(_this$_toolbar$Create,"text","Expand All"),_defineProperty(_this$_toolbar$Create,"trigger",{thisArg:this,fn:this.ExpandAll}),_this$_toolbar$Create));this._collapseAllBtn=this._toolbar.CreateHandle((_this$_toolbar$Create2={},_defineProperty(_this$_toolbar$Create2,UI_ID.ICON,"%ICON%/icon_collapse_all.svg"),_defineProperty(_this$_toolbar$Create2,"text","Collapse All"),_defineProperty(_this$_toolbar$Create2,"trigger",{thisArg:this,fn:this.CollapseAll}),_this$_toolbar$Create2))}this.focusArea=this._header}},{key:"Activate",value:function Activate(p_evt){if(this._toolbar.focused){return false}return _get(_gPO(IGroup.prototype),"Activate",this).call(this,p_evt)}},{key:"AltActivate",value:function AltActivate(p_evt){if(this._toolbar.focused){return}if(this._expandOnHeaderAltActivation){this._extExpand.Toggle()}}},{key:"Expand",value:function Expand(){this._extExpand.Expand()}},{key:"_Expand",value:function _Expand(){if(this._data&&!this._staticContent){this._BuildContent()}this._expandIcon.element.classList.remove(UF.EXPANDED);this._toolbar.hidden=false}},{key:"Collapse",value:function Collapse(){this._extExpand.Collapse()}},{key:"_Collapse",value:function _Collapse(){if(this._data&&!this._staticContent){this._ClearContent()}this._expandIcon.element.classList.add(UF.EXPANDED);this._toolbar.hidden=true}},{key:"ExpandAll",value:function ExpandAll(){this.Expand();var list=this._displayObjects;var child=null;for(var i=0,n=list.length;i<n;i++){child=list[i];if("Expand"in child){child.Expand()}}}},{key:"CollapseAll",value:function CollapseAll(){var list=this._displayObjects;var child=null;for(var i=0,n=list.length;i<n;i++){child=list[i];if("Collapse"in child){child.Collapse()}}}},{key:"_OnContextCh",value:function _OnContextCh(){var context=this._context;var list=this._displayObjects;var child=null;for(var i=0,n=list.length;i<n;i++){child=list[i];if("context"in child){child.context=context}}}},{key:"_OnDataCh",value:function _OnDataCh(p_oldValue){_get(_gPO(IGroup.prototype),"_OnDataCh",this).call(this,p_oldValue);this._ClearContent();if(this._data){if(this._staticContent){this._BuildContent()}else{if(this._extExpand.isExpanded){this._BuildContent()}else if(this._data.expanded){this._extExpand.Expand()}}if(this._alwaysExpanded){this._extExpand.Expand(false)}}else{if(!this._alwaysExpanded){this._extExpand.Collapse()}}}},{key:"_BuildContent",value:function _BuildContent(){}},{key:"_ClearContent",value:function _ClearContent(){}},{key:"_CleanUp",value:function _CleanUp(){this._toolbar.Focus(false);_get(_gPO(IGroup.prototype),"_CleanUp",this).call(this);if(!this._alwaysExpanded){this._extExpand.Collapse()}this._extExpand.activator=this._expandBtn;this._staticContent=this._staticContentDefault}}]);return IGroup}(IItem);mdl.xp["default"]=mdl.xp=IGroup;UI.Register("nkmjs-inspector-group",IGroup)},{429:252,27:166,13:268}],252:[function(rq,mdl,xp){var _rq401=rq(13),U=_rq401.U;var _rq402=rq(27),UI=_rq402.UI;var _rq403=rq(29),DATA_S=_rq403.DATA_S;var Control=rq(430);var IItem=function(_Control3){_inherits(IItem,_Control3);var _super154=_createSuper(IItem);function IItem(){_cCC(this,IItem);return _super154.call(this)}_cC(IItem,[{key:"_In",value:function _In(){this._ignoreMetaStyle=U.Default(this._ignoreMetaStyle,false);this.default_SelectOnActivation=U.Default(this.default_SelectOnActivation,true);_get(_gPO(IItem.prototype),"_In",this).call(this);if(!this._ignoreMetaStyle){this._metadataObserver.H(DATA_S.META_MID_UPDATE,"presentation",this._OnMetaPresentationCh,this)}}},{key:"_OnDataCh",value:function _OnDataCh(p_oldValue){_get(_gPO(IItem.prototype),"_OnDataCh",this).call(this,p_oldValue);if(this._data){if(this._data.metadata&&!this._ignoreMetaStyle){this._UMetaPresentation()}}}},{key:"_OnMetaPresentationCh",value:function _OnMetaPresentationCh(p_meta,p_path){this._UMetaPresentation()}},{key:"_UMetaPresentation",value:function _UMetaPresentation(){var color=U.HexToRGBAString(this._data.metadata.G("presentation.color","#000000"),this._data.metadata.G("presentation.weight",.1));this.style["box-shadow"]="inset 1px 0px 0px ".concat(color)}}]);return IItem}(Control);mdl.xp["default"]=mdl.xp=IItem;UI.Register("nkmjs-inspector-item",IItem)},{430:237,29:52,27:166,13:268}],253:[function(rq,mdl,xp){"use strict";var _rq404=rq(13),U=_rq404.U;var _rq405=rq(14),NFOS=_rq405.NFOS,BINDINGS=_rq405.BINDINGS;var _rq406=rq(34),CSS=_rq406.CSS,FONT_FLAG=_rq406.FONT_FLAG;var _rq407=rq(27),UI_ID=_rq407.UI_ID,UI=_rq407.UI,UF=_rq407.UF,View=_rq407.View,DOMTemplate=_rq407.DOMTemplate,TPLBodyHeaderTitles=_rq407.TPLBodyHeaderTitles;var WORKSPACE_CONTEXT=rq(431);var IShell=function(_View5){_inherits(IShell,_View5);var _super155=_createSuper(IShell);function IShell(){_cCC(this,IShell);return _super155.call(this)}_cC(IShell,[{key:"_In",value:function _In(){_get(_gPO(IShell.prototype),"_In",this).call(this);this._context=null;this._inspector=null;this._flags.A(this,UF.FIXED_SIZE);this._flags.S(UF.FIXED_SIZE,true);this._icon=null;this._title=null;this._subtitle=null;this._header=null;this._body=null}},{key:"context",get:function get(){return this._context},set:function set(v){if(this._context===v){return}var oldValue=this._context;this._context=v;this._OnContextDataCh(oldValue)}},{key:"_OnContextDataCh",value:function _OnContextDataCh(p_oldValue){if(this._inspector){this._inspector.context=this._context}}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._flags.S(UF.NO_ICON,!this._icon.S(v))}},{key:"title",get:function get(){return this._title},set:function set(v){this._flags.S(UF.NO_LABEL,!this._title.S(v))}},{key:"subtitle",get:function get(){return this._subtitle},set:function set(v){this._subtitle.S(v)}},{key:"header",get:function get(){return this._header}},{key:"body",get:function get(){return this._body}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch","align-content":"stretch"},":host(.fixed-size)":{width:"350px"},".header":{flex:"0 0 auto"},".body":{flex:"1 1 auto","min-width":"0",display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch"},".inspector":{flex:"1 1 auto"}},_get(_gPO(IShell.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){var _DOMTemplate$R5;DOMTemplate.R(TPLBodyHeaderTitles,this,(_DOMTemplate$R5={},_defineProperty(_DOMTemplate$R5,UI_ID.OWNER,this),_defineProperty(_DOMTemplate$R5,UI_ID.ICON,_defineProperty({},UI_ID.CSS_CL,UF.SIZE_S)),_defineProperty(_DOMTemplate$R5,UI_ID.SUBTITLE,_defineProperty({},UI_ID.CSS_CL,FONT_FLAG.SMALL)),_DOMTemplate$R5))}},{key:"_OnDataCh",value:function _OnDataCh(p_oldValue){_get(_gPO(IShell.prototype),"_OnDataCh",this).call(this,p_oldValue);if(this._inspector){this._inspector.Release();this._inspector=null}if(!this._data){this._title.S("(NO_DATA)");this._subtitle.S("---");return}this._title.S(this._data.id);var ctr=this._data.constructor,nfos=NFOS.G(this._data);if(nfos){this._subtitle.S(nfos);this._icon.S(nfos)}else{this._subtitle.S(ctr.name);this._icon.S(null)}var cl=BINDINGS.G(WORKSPACE_CONTEXT.DEFAULT_INSPECTOR,ctr);if(!cl){return}this._inspector=this.A(cl,"inspector",this._body);this._inspector.context=this._context;this._inspector.data=this._data}}]);return IShell}(View);_defineProperty(IShell,"__NFO__",NFOS.Ext({css:["@/views/inspector-shell.css"]},View,["css"]));mdl.xp["default"]=mdl.xp=IShell;UI.Register("nkmjs-inspector-shell",IShell)},{431:263,14:27,34:155,27:166,13:268}],254:[function(rq,mdl,xp){var _rq408=rq(13),U=_rq408.U;var _rq409=rq(18),Dictionary=_rq409.Dictionary;var _rq410=rq(14),BINDINGS=_rq410.BINDINGS,COM_ID=_rq410.COM_ID;var _rq411=rq(27),UI=_rq411.UI;var IGroup=rq(432);var MetaControlItem=rq(433);var _expandedMetaPaths=new Dictionary;var MetaControlGroup=function(_IGroup){_inherits(MetaControlGroup,_IGroup);var _super156=_createSuper(MetaControlGroup);function MetaControlGroup(){_cCC(this,MetaControlGroup);return _super156.call(this)}_cC(MetaControlGroup,[{key:"_In",value:function _In(){this._ignoreMetaStyle=true;this.default_SelectOnActivation=false;_get(_gPO(MetaControlGroup.prototype),"_In",this).call(this);this._staticContent=false;this._metaPath="";this._metaID="";this._subCtrls=new Array(0)}},{key:"_Style",value:function _Style(){return U.Merge(_get(_gPO(MetaControlGroup.prototype),"_Style",this).call(this),{":host":{margin:"5px"},".header":{"justify-content":"center",padding:"6px"},".facade":{flex:"1 1 auto"}})}},{key:"metaPath",get:function get(){return this._metaPath},set:function set(v){this._metaPath=v}},{key:"_metaKey",get:function get(){return this._data?"@".concat(this._data.constructor).concat(this._metaPath):"@".concat(this._metaPath)}},{key:"metaID",get:function get(){return this._metaID},set:function set(v){this._metaID=v;this._facade.text=v}},{key:"_Expand",value:function _Expand(){_get(_gPO(MetaControlGroup.prototype),"_Expand",this).call(this);MetaControlGroup.TogglePathExpansion(this._metaKey,true)}},{key:"_Collapse",value:function _Collapse(){if(this._data){MetaControlGroup.TogglePathExpansion(this._metaKey,false)}_get(_gPO(MetaControlGroup.prototype),"_Collapse",this).call(this)}},{key:"_OnDataCh",value:function _OnDataCh(p_oldValue){_get(_gPO(MetaControlGroup.prototype),"_OnDataCh",this).call(this,p_oldValue);if(this._data){var result=MetaControlGroup.IsPathExpanded(this._metaKey);if(result){this.Expand()}}}},{key:"_BuildContent",value:function _BuildContent(){_get(_gPO(MetaControlGroup.prototype),"_BuildContent",this).call(this);var mData=this._data.metadata;var obj=U.Empty(this._metaPath)?mData._data:mData.G(this._metaPath,null);if(obj){if(U.isObject(obj)){for(var member in obj){var mPath=U.Empty(this._metaPath)?"".concat(member):"".concat(this._metaPath,".").concat(member),value=obj[member],ctrlClass=BINDINGS.G("".concat(COM_ID.METAPREFIX).concat(mPath),this._data.constructor,U.isObject(value)?MetaControlGroup:MetaControlItem),ctrl=this.A(ctrlClass,"group");ctrl.metaID=member;ctrl.metaPath=mPath;ctrl.context=this._context;ctrl.data=this._data;this._subCtrls.push(ctrl)}}else{}}else{}}},{key:"_ClearContent",value:function _ClearContent(){while(this._subCtrls.length!=0){this._subCtrls.pop().Release()}}},{key:"_CleanUp",value:function _CleanUp(){this._metaPath="";_get(_gPO(MetaControlGroup.prototype),"_CleanUp",this).call(this)}}],[{key:"TogglePathExpansion",value:function TogglePathExpansion(p_path,p_toggle){if(p_toggle){_expandedMetaPaths.S(p_path,true)}else{_expandedMetaPaths.RM(p_path)}}},{key:"IsPathExpanded",value:function IsPathExpanded(p_path){return _expandedMetaPaths.G(p_path)}}]);return MetaControlGroup}(IGroup);mdl.xp["default"]=mdl.xp=MetaControlGroup;UI.Register("nkmjs-meta-control-group",MetaControlGroup)},{432:251,433:255,18:21,14:27,27:166,13:268}],255:[function(rq,mdl,xp){var _rq412=rq(13),U=_rq412.U,UDOM=_rq412.UDOM;var _rq413=rq(27),UI_ID=_rq413.UI_ID,UI=_rq413.UI,TextManipulator=_rq413.TextManipulator;var _rq414=rq(29),Metadata=_rq414.Metadata,ActionMetadataS=_rq414.ActionMetadataS;var _rq415=rq(417),INPUT_S=_rq415.INPUT_S,InputField=_rq415.InputField;var IItem=rq(429);var MetaControlItem=function(_IItem2){_inherits(MetaControlItem,_IItem2);var _super157=_createSuper(MetaControlItem);function MetaControlItem(){_cCC(this,MetaControlItem);return _super157.call(this)}_cC(MetaControlItem,[{key:"_In",value:function _In(){this.default_SelectOnActivation=false;this._ignoreMetaStyle=true;_get(_gPO(MetaControlItem.prototype),"_In",this).call(this);this._metaPath="";this._metaID="";this._inputClass=InputField;this._input=null;this._label=null}},{key:"_Style",value:function _Style(){return U.Merge(_get(_gPO(MetaControlItem.prototype),"_Style",this).call(this),{":host":{margin:"5px",padding:"6px",display:"flex","flex-flow":"column","align-items":"stretch","align-content":"stretch"},".facade":{flex:"1 1 auto","margin-top":"-5px","margin-bottom":"0px"},".control":{flex:"1 1 auto"}})}},{key:"_R",value:function _R(){_get(_gPO(MetaControlItem.prototype),"_R",this).call(this);this._label=new TextManipulator(UDOM.New("span",{class:UI_ID.LABEL},this._host))}},{key:"metaPath",get:function get(){return this._metaPath},set:function set(v){this._metaPath=v}},{key:"metaID",get:function get(){return this._metaID},set:function set(v){this._metaID=v;this._facade.text=v}},{key:"_OnDataCh",value:function _OnDataCh(p_oldValue){_get(_gPO(MetaControlItem.prototype),"_OnDataCh",this).call(this,p_oldValue);if(this._input){this._input.Release();this._input=null}if(!this._data){return}var mData=U.isInstanceOf(this._data,Metadata)?this._data:this._data.metadata;var obj=mData.G(this._metaPath,null);if(U.Void(obj)){return}this._input=this.A(this._inputClass,"control");this._OnInputCreated(this._input);this._input.W(INPUT_S.VALUE_SUBMITTED,this._OnInputValueCommited,this);this._input.currentValue=obj}},{key:"_OnInputCreated",value:function _OnInputCreated(p_input){}},{key:"_OnInputValueCommited",value:function _OnInputValueCommited(p_input,p_changedValue){var mData=U.isInstanceOf(this._data,Metadata)?this._data:this._data.metadata;var mPath=this._metaPath;this._Do(ActionMetadataS,{target:mData,path:mPath,value:p_changedValue});this._input.currentValue=mData.G(mPath,undefined)}},{key:"_CleanUp",value:function _CleanUp(){this._metaPath="";_get(_gPO(MetaControlItem.prototype),"_CleanUp",this).call(this)}}]);return MetaControlItem}(IItem);mdl.xp["default"]=mdl.xp=MetaControlItem;UI.Register("nkmjs-meta-control-item",MetaControlItem)},{429:252,29:52,27:166,417:218,13:268}],256:[function(rq,mdl,xp){var _rq416=rq(13),U=_rq416.U,PATH=_rq416.PATH;var _rq417=rq(14),NFOS=_rq417.NFOS;var _rq418=rq(29),DataBlock=_rq418.DataBlock,CgItem=_rq418.CgItem;var _rq419=rq(34),CSS=_rq419.CSS,FONT_FLAG=_rq419.FONT_FLAG;var _rq420=rq(27),UI_ID=_rq420.UI_ID,UI=_rq420.UI,UF=_rq420.UF,Bb_=_rq420.Bb_,DOMTemplate=_rq420.DOMTemplate,TPLFacadeLabel=_rq420.TPLFacadeLabel;var BreadcrumbItem=function(_Bb_3){_inherits(BreadcrumbItem,_Bb_3);var _super158=_createSuper(BreadcrumbItem);function BreadcrumbItem(){_cCC(this,BreadcrumbItem);return _super158.call(this)}_cC(BreadcrumbItem,[{key:"_In",value:function _In(){_get(_gPO(BreadcrumbItem.prototype),"_In",this).call(this);this._optionsHandler.H(UI_ID.ICON,null,"");this._optionsHandler.H(UI_ID.LABEL,null,"");this._alwaysDisplayCommand=true;this._icon=null;this._label=null}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._flags.S(UF.NO_ICON,!this._icon.S(v))}},{key:"label",get:function get(){return this._label},set:function set(v){this._flags.S(UF.NO_LABEL,!this._label.S(v))}},{key:"_R",value:function _R(){var _DOMTemplate$R6;DOMTemplate.R(TPLFacadeLabel,this,(_DOMTemplate$R6={},_defineProperty(_DOMTemplate$R6,UI_ID.OWNER,this),_defineProperty(_DOMTemplate$R6,UI_ID.LABEL,_defineProperty({},UI_ID.CSS_CL,FONT_FLAG.REGULAR)),_DOMTemplate$R6));this.focusArea=this}},{key:"_OnDataUd",value:function _OnDataUd(p_data){_get(_gPO(BreadcrumbItem.prototype),"_OnDataUd",this).call(this,p_data)}}]);return BreadcrumbItem}(Bb_);_defineProperty(BreadcrumbItem,"__NFO__",NFOS.Ext({css:["@/items/breadcrum-item.css"]},Bb_,["css"]));mdl.xp["default"]=mdl.xp=BreadcrumbItem;UI.Register("nkmjs-breadcrum-item",BreadcrumbItem)},{14:27,29:52,34:155,27:166,13:268}],257:[function(rq,mdl,xp){var _rq421=rq(13),U=_rq421.U;var _rq422=rq(14),NFOS=_rq422.NFOS;var _rq423=rq(34),CSS=_rq423.CSS;var _rq424=rq(27),UI=_rq424.UI,T_bar=_rq424.T_bar;var BreadcrumbItem=rq(434);var Breadcrumb=function(_T_bar2){_inherits(Breadcrumb,_T_bar2);var _super159=_createSuper(Breadcrumb);function Breadcrumb(){_cCC(this,Breadcrumb);return _super159.call(this)}_cC(Breadcrumb,[{key:"_In",value:function _In(){_get(_gPO(Breadcrumb.prototype),"_In",this).call(this);this._defaultBClass=BreadcrumbItem}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{},":host(.vertical)":{"align-content":"flex-end"},":host(.horizontal)":{"align-content":"flex-end"}},_get(_gPO(Breadcrumb.prototype),"_Style",this).call(this))}}]);return Breadcrumb}(T_bar);_defineProperty(Breadcrumb,"__NFO__",NFOS.Ext({css:["@/items/breadcrum.css"]},T_bar,["css"]));mdl.xp["default"]=mdl.xp=Breadcrumb;UI.Register("nkmjs-breadcrum",Breadcrumb)},{434:256,14:27,34:155,27:166,13:268}],258:[function(rq,mdl,xp){"use strict";var _rq425=rq(27),UI=_rq425.UI,W=_rq425.W;var StatusBar=function(_W7){_inherits(StatusBar,_W7);var _super160=_createSuper(StatusBar);function StatusBar(){_cCC(this,StatusBar);return _super160.call(this)}return StatusBar}(W);mdl.xp["default"]=mdl.xp=StatusBar;UI.Register("nkmjs-status-bar",StatusBar)},{27:166}],259:[function(rq,mdl,xp){"use strict";var _rq426=rq(13),U=_rq426.U;var _rq427=rq(14),NFOS=_rq427.NFOS,S=_rq427.S,COMMON_FLAG=_rq427.COMMON_FLAG;var _rq428=rq(24),ENV=_rq428.ENV;var _rq429=rq(34),CSS=_rq429.CSS;var _rq430=rq(29),DATA_S=_rq430.DATA_S,DataObserver=_rq430.DataObserver,CATALOG_S=_rq430.CATALOG_S;var _rq431=rq(27),UI_ID=_rq431.UI_ID,UI=_rq431.UI,M=_rq431.M,US=_rq431.US,W=_rq431.W,DOMTemplate=_rq431.DOMTemplate,Extm=_rq431.Extm,UF=_rq431.UF,FlagEnum=_rq431.FlagEnum,ImageManipulator=_rq431.ImageManipulator,TextManipulator=_rq431.TextManipulator,CgW=_rq431.CgW;var TPLFacadeTab=rq(435);var Tab=function(_CgW2){_inherits(Tab,_CgW2);var _super161=_createSuper(Tab);function Tab(){_cCC(this,Tab);return _super161.call(this)}_cC(Tab,[{key:"_In",value:function _In(){_get(_gPO(Tab.prototype),"_In",this).call(this);this._Bind(this._CloseRequest);this._closeBtn=this._interactions.A(Extm);this._closeBtn.H(M.BTN_LEFT,M.RELEASE,this._CloseRequest);this._interactions.H(M.BTN_MIDDLE,M.RELEASE,this._CloseRequest)}},{key:"icon",get:function get(){return this._icon},set:function set(v){this._icon.S(v)}},{key:"label",get:function get(){return this._label},set:function set(v){this._label.S(v)}},{key:"closeIcon",get:function get(){return this._closeIcon},set:function set(v){this._closeIcon.S(v)}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{position:"relative",display:"flex","flex-flow":"row nowrap","align-items":"center","align-content":"stretch"}},_get(_gPO(Tab.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){var _DOMTemplate$R7;DOMTemplate.R(TPLFacadeTab,this,(_DOMTemplate$R7={},_defineProperty(_DOMTemplate$R7,UI_ID.OWNER,this),_defineProperty(_DOMTemplate$R7,"closeIcon",{htitle:"Close"}),_DOMTemplate$R7));if(!ENV.FEATURES.isTouchEnabled){this._closeIcon.element.style.opacity=0}this.focusArea=this;this._closeBtn.element=this._closeIcon.element}},{key:"Activate",value:function Activate(p_evt){if(this._closeBtn.ismOver){return false}return _get(_gPO(Tab.prototype),"Activate",this).call(this,p_evt)}},{key:"_HighlightGain",value:function _HighlightGain(){if(!ENV.FEATURES.isTouchEnabled){this._closeIcon.element.style.removeProperty("opacity")}}},{key:"_HighlightLost",value:function _HighlightLost(){if(!ENV.FEATURES.isTouchEnabled){this._closeIcon.element.style.opacity=0}}},{key:"_CloseRequest",value:function _CloseRequest(){if(!this._isActivable){return}this._B(US.CLOSE_REQUESTED,this)}},{key:"_UInfos",value:function _UInfos(){if(this._itemData){this._flavorEnum.S(this._itemData.isDirty?COMMON_FLAG.WARNING:null);if(!this._label.S(this._itemData)){this._label.S(this._data.options)}if(!this._icon.S(this._itemData)){this._icon.S(this._data.options)}}else{this._flavorEnum.S(null);this._label.S(this._data.options);this._icon.S(this._data.options)}}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(Tab.prototype),"_CleanUp",this).call(this)}}]);return Tab}(CgW);_defineProperty(Tab,"__NFO__",NFOS.Ext({css:["@/items/tab.css"]},W,["css"]));mdl.xp["default"]=mdl.xp=Tab;UI.Register("nkmjs-tab",Tab)},{435:262,14:27,29:52,24:92,34:155,27:166,13:268}],260:[function(rq,mdl,xp){"use strict";var _rq432=rq(14),NFOS=_rq432.NFOS;var _rq433=rq(34),FONT_FLAG=_rq433.FONT_FLAG;var _rq434=rq(27),UI=_rq434.UI,UF=_rq434.UF,FlagEnum=_rq434.FlagEnum,W=_rq434.W,TextManipulator=_rq434.TextManipulator,UI_ID=_rq434.UI_ID;var _rq435=rq(13),UDOM=_rq435.UDOM;var Tag=function(_W8){_inherits(Tag,_W8);var _super162=_createSuper(Tag);function Tag(){_cCC(this,Tag);return _super162.call(this)}_cC(Tag,[{key:"_In",value:function _In(){_get(_gPO(Tag.prototype),"_In",this).call(this);this._sizeEnum=new FlagEnum(UF.sizes);this._sizeEnum.A(this);this._flavorEnum=new FlagEnum(UF.flavorsExtended);this._flavorEnum.A(this)}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(v){this._sizeEnum.S(v)}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(v){this._flavorEnum.S(v)}},{key:"label",get:function get(){return this._label},set:function set(v){this._label.S(v)}},{key:"_R",value:function _R(){this._label=new TextManipulator(UDOM.New("span",{class:"".concat(UI_ID.LABEL," ").concat(FONT_FLAG.TAG)},this),false)}}]);return Tag}(W);_defineProperty(Tag,"__NFO__",NFOS.Ext({css:["@/items/tag.css"]},W,["css"]));mdl.xp["default"]=mdl.xp=Tag;UI.Register("nkmjs-tag",Tag)},{14:27,34:155,27:166,13:268}],261:[function(rq,mdl,xp){"use strict";var _rq436=rq(13),U=_rq436.U;var _rq437=rq(27),UI=_rq437.UI,LayerC_=_rq437.LayerC_;var Shell=function(_LayerC_2){_inherits(Shell,_LayerC_2);var _super163=_createSuper(Shell);function Shell(){_cCC(this,Shell);return _super163.call(this)}_cC(Shell,[{key:"_In",value:function _In(){_get(_gPO(Shell.prototype),"_In",this).call(this)}}]);return Shell}(LayerC_);mdl.xp["default"]=mdl.xp=Shell;UI.Register("nkmjs-shell",Shell)},{27:166,13:268}],262:[function(rq,mdl,xp){"use strict";var _rq438=rq(13),U=_rq438.U,UDOM=_rq438.UDOM;var _rq439=rq(27),UI_ID=_rq439.UI_ID,DOMTemplate=_rq439.DOMTemplate,ImageManipulator=_rq439.ImageManipulator,TextManipulator=_rq439.TextManipulator;var __closeIcon="_closeIcon";var __icon="_".concat(UI_ID.ICON);var __label="_".concat(UI_ID.LABEL);var TPLFacadeTab=function(_DOMTemplate8){_inherits(TPLFacadeTab,_DOMTemplate8);var _super164=_createSuper(TPLFacadeTab);function TPLFacadeTab(){var _this20;_cCC(this,TPLFacadeTab);_this20=_super164.call(this);return _this20}_cC(TPLFacadeTab,[{key:"R",value:function R(p_host){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var owner=_get(_gPO(TPLFacadeTab.prototype),"R",this).call(this,p_host,o),iconOpts=U.G(o,UI_ID.ICON,null),labelOpts=U.G(o,UI_ID.TITLE,null),closeIconOpts=U.G(o,"closeIcon",null),icon=owner[__icon]=new ImageManipulator(owner[__icon],iconOpts&&"autoHide"in iconOpts?iconOpts.autoHide:true),label=owner[__label]=new TextManipulator(owner[__label],labelOpts&&"autoHide"in labelOpts?labelOpts.autoHide:false),closeIcon=owner[__closeIcon]=new ImageManipulator(owner[__closeIcon],closeIconOpts&&"autoHide"in closeIconOpts?closeIconOpts.autoHide:false);if(iconOpts){icon.S(iconOpts);if(iconOpts[UI_ID.CSS_CL]){icon.element.classList.add(iconOpts[UI_ID.CSS_CL])}}if(labelOpts){label.S(labelOpts);if(labelOpts[UI_ID.CSS_CL]){label.element.classList.add(labelOpts[UI_ID.CSS_CL])}}if(closeIconOpts){closeIcon.S(closeIconOpts.url);if(closeIconOpts.htitle){closeIcon.element.title=closeIconOpts.htitle}if(closeIconOpts[UI_ID.CSS_CL]){closeIcon.element.classList.add(closeIconOpts[UI_ID.CSS_CL])}}return owner}}],[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_gPO(TPLFacadeTab),"_CreateTemplate",this).call(this);this._A(UDOM.New("span",{class:UI_ID.ICON}),__icon);this._A(UDOM.New("span",{class:UI_ID.LABEL}),__label);this._A(UDOM.New("span",{class:"".concat(UI_ID.ICON," close")}),__closeIcon)}}]);return TPLFacadeTab}(DOMTemplate);mdl.xp["default"]=mdl.xp=TPLFacadeTab},{27:166,13:268}],263:[function(rq,mdl,xp){"use strict";var _rq440=rq(14),CSYMBOL=_rq440.CSYMBOL;var EDITOR=function(_CSYMBOL5){_inherits(EDITOR,_CSYMBOL5);var _super165=_createSuper(EDITOR);function EDITOR(){_cCC(this,EDITOR);return _super165.call(this)}return EDITOR}(CSYMBOL);var DEFAULT_EDITOR=function(_EDITOR){_inherits(DEFAULT_EDITOR,_EDITOR);var _super166=_createSuper(DEFAULT_EDITOR);function DEFAULT_EDITOR(){_cCC(this,DEFAULT_EDITOR);return _super166.call(this)}return DEFAULT_EDITOR}(EDITOR);var INSPECTOR=function(_CSYMBOL6){_inherits(INSPECTOR,_CSYMBOL6);var _super167=_createSuper(INSPECTOR);function INSPECTOR(){_cCC(this,INSPECTOR);return _super167.call(this)}return INSPECTOR}(CSYMBOL);var DEFAULT_INSPECTOR=function(_INSPECTOR){_inherits(DEFAULT_INSPECTOR,_INSPECTOR);var _super168=_createSuper(DEFAULT_INSPECTOR);function DEFAULT_INSPECTOR(){_cCC(this,DEFAULT_INSPECTOR);return _super168.call(this)}return DEFAULT_INSPECTOR}(INSPECTOR);var EDITOR_IN_PLACE=function(_CSYMBOL7){_inherits(EDITOR_IN_PLACE,_CSYMBOL7);var _super169=_createSuper(EDITOR_IN_PLACE);function EDITOR_IN_PLACE(){_cCC(this,EDITOR_IN_PLACE);return _super169.call(this)}return EDITOR_IN_PLACE}(CSYMBOL);mdl.xp["default"]=mdl.xp={EDITOR:EDITOR,DEFAULT_EDITOR:DEFAULT_EDITOR,INSPECTOR:INSPECTOR,DEFAULT_INSPECTOR:DEFAULT_INSPECTOR,EDITOR_IN_PLACE:EDITOR_IN_PLACE}},{14:27}],264:[function(rq,mdl,xp){"use strict";var _rq441=rq(13),U=_rq441.U;var _rq442=rq(14),NFOS=_rq442.NFOS;var _rq443=rq(27),UI_ID=_rq443.UI_ID,UI=_rq443.UI,DrawerNav=_rq443.DrawerNav;var Tab=rq(436);var WorkspaceCellNav=function(_DrawerNav2){_inherits(WorkspaceCellNav,_DrawerNav2);var _super170=_createSuper(WorkspaceCellNav);function WorkspaceCellNav(){_cCC(this,WorkspaceCellNav);return _super170.call(this)}_cC(WorkspaceCellNav,[{key:"_In",value:function _In(){_get(_gPO(WorkspaceCellNav.prototype),"_In",this).call(this);this._defaultBClass=Tab;this._cellOptionsBtn=null}},{key:"_R",value:function _R(){var _this$_toolbar$Create3;_get(_gPO(WorkspaceCellNav.prototype),"_R",this).call(this);this._cellOptionsBtn=this._toolbar.CreateHandle((_this$_toolbar$Create3={},_defineProperty(_this$_toolbar$Create3,UI_ID.ICON,"%ICON%/icon_more.svg"),_defineProperty(_this$_toolbar$Create3,"text","More Actions..."),_defineProperty(_this$_toolbar$Create3,"trigger",{thisArg:this,fn:this._OpenStings}),_this$_toolbar$Create3))}},{key:"_OpenStings",value:function _OpenStings(){}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(WorkspaceCellNav.prototype),"_CleanUp",this).call(this)}}]);return WorkspaceCellNav}(DrawerNav);_defineProperty(WorkspaceCellNav,"__NFO__",NFOS.Ext({css:["@/views/workspace-cell-nav.css"]},DrawerNav,["css"]));mdl.xp["default"]=mdl.xp=WorkspaceCellNav;UI.Register("nkmjs-workspace-cell-nav",WorkspaceCellNav)},{436:259,14:27,27:166,13:268}],265:[function(rq,mdl,xp){"use strict";var _rq444=rq(13),U=_rq444.U;var _rq445=rq(14),NFOS=_rq445.NFOS;var _rq446=rq(29),Cg=_rq446.Cg,CgItem=_rq446.CgItem;var _rq447=rq(27),UI=_rq447.UI,UF=_rq447.UF,Drawer=_rq447.Drawer;var WorkspaceCellNav=rq(437);var WorkspaceCell=function(_Drawer2){_inherits(WorkspaceCell,_Drawer2);var _super171=_createSuper(WorkspaceCell);function WorkspaceCell(){_cCC(this,WorkspaceCell);return _super171.call(this)}_cC(WorkspaceCell,[{key:"_In",value:function _In(){_get(_gPO(WorkspaceCell.prototype),"_In",this).call(this);this._navClass=WorkspaceCellNav;this._isCollapsable=false}},{key:"_OnCgItemAd",value:function _OnCgItemAd(p_handler,it,p_mappedView){if(!U.isInstanceOf(it,CgItem)){throw new Error("non-catalog item added to workspace cell catalog.")}else if(U.isInstanceOf(it,Cg)){throw new Error("Full catalog item added to workspace cell catalog.")}return _get(_gPO(WorkspaceCell.prototype),"_OnCgItemAd",this).call(this,p_handler,it,p_mappedView)}},{key:"_OnViewAd",value:function _OnViewAd(it,p_control,p_view){_get(_gPO(WorkspaceCell.prototype),"_OnViewAd",this).call(this,it,p_control,p_view);p_view.RequestDisplay()}}]);return WorkspaceCell}(Drawer);_defineProperty(WorkspaceCell,"__NFO__",NFOS.Ext({css:["@/views/workspace-cell.css"]},Drawer,["css"]));_defineProperty(WorkspaceCell,"__default_orientation",UF.HORIZONTAL);mdl.xp["default"]=mdl.xp=WorkspaceCell;UI.Register("nkmjs-workspace-cell",WorkspaceCell)},{437:264,14:27,29:52,27:166,13:268}],266:[function(rq,mdl,xp){"use strict";var _rq448=rq(13),U=_rq448.U,LOG=_rq448.LOG;var _rq449=rq(25),RELAY=_rq449.RELAY,ACTION_REQUEST=_rq449.ACTION_REQUEST;var _rq450=rq(14),BINDINGS=_rq450.BINDINGS;var _rq451=rq(29),Cg=_rq451.Cg;var _rq452=rq(27),UI=_rq452.UI;var WORKSPACE_CONTEXT=rq(431);var Workspace=rq(438);var RootWorkspace=function(_Workspace){_inherits(RootWorkspace,_Workspace);var _super172=_createSuper(RootWorkspace);function RootWorkspace(){_cCC(this,RootWorkspace);return _super172.call(this)}_cC(RootWorkspace,[{key:"_In",value:function _In(){_get(_gPO(RootWorkspace.prototype),"_In",this).call(this);this._rootCg=new Cg;this._rootCg.GOrCreateCg({name:"RootCell"})}},{key:"_pIn",value:function _pIn(){_get(_gPO(RootWorkspace.prototype),"_pIn",this).call(this);RELAY.W(ACTION_REQUEST.EDIT,this._HandleEditRequest,this);RELAY.W(ACTION_REQUEST.OPEN,this._HandleOpenRequest,this);RELAY.W(ACTION_REQUEST.CREATE,this._HandleCreateRequest,this);this.catalog=this._rootCg}},{key:"rootCg",get:function get(){return this._rootCg}},{key:"_Style",value:function _Style(){return U.Merge(_get(_gPO(RootWorkspace.prototype),"_Style",this).call(this),{":host":{position:"relative",width:"1px",//!important dirty fix
flex:"1 1 auto",display:"flex"}})}},{key:"_HandleEditRequest",value:function _HandleEditRequest(p_request){if(p_request.handled){return}var editTarget=p_request.GOption("data",null),editorClass=p_request.GOption("editor",null);if(!editTarget){p_request.HandleFail("Editing request has no data.");return}if(editorClass){editorClass=BINDINGS.G(editorClass,editTarget,editorClass)}else{editorClass=BINDINGS.G(WORKSPACE_CONTEXT.DEFAULT_EDITOR,editTarget)}if(!editorClass){p_request.HandleFail("Could not find editor association for ".concat(editTarget,"."));return}LOG._("Editing request for ".concat(editTarget," will be handled using ").concat(editorClass.name));this.Host({data:editTarget,viewType:editorClass,name:editTarget.id.name});p_request.HandleSuccess(this)}},{key:"_HandleOpenRequest",value:function _HandleOpenRequest(p_request){}},{key:"_HandleCreateRequest",value:function _HandleCreateRequest(p_request){}}]);return RootWorkspace}(Workspace);mdl.xp["default"]=mdl.xp=RootWorkspace;UI.Register("nkmjs-root-workspace",RootWorkspace)},{431:263,438:267,25:1,14:27,29:52,27:166,13:268}],267:[function(rq,mdl,xp){"use strict";var _rq453=rq(13),U=_rq453.U;var _rq454=rq(18),List=_rq454.List;var _rq455=rq(14),NFOS=_rq455.NFOS,POOL=_rq455.POOL,S=_rq455.S;var _rq456=rq(29),CgItem=_rq456.CgItem,Cg=_rq456.Cg,CgHandler=_rq456.CgHandler;var _rq457=rq(27),UI=_rq457.UI,US=_rq457.US,View=_rq457.View;var WorkspaceCell=rq(439);var Workspace=function(_View6){_inherits(Workspace,_View6);var _super173=_createSuper(Workspace);function Workspace(){_cCC(this,Workspace);return _super173.call(this)}_cC(Workspace,[{key:"_In",value:function _In(){_get(_gPO(Workspace.prototype),"_In",this).call(this);this._cellDefaultClass=WorkspaceCell;this._cells=new List;this._catalogHandler=new CgHandler;this._catalogHandler.W(S.ITEM_ADDED,this._OnCgItemAd,this);this._catalogHandler.W(S.ITEM_REMOVED,this._OnCgItemRMd,this)}},{key:"catalog",get:function get(){return this._catalogHandler.catalog},set:function set(v){this._catalogHandler.catalog=v}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex"},".navigation":{position:"relative",flex:"1 1 auto",outline:"1px rgba(0,255,0,0.5) solid","outline-offset":"-1px"},".cell":{position:"relative"}}}},{key:"_OnCgItemAd",value:function _OnCgItemAd(p_handler,it){if(!U.isInstanceOf(it,Cg)){throw new Error("non-catalog item added to workspace catalog : ".concat(it,"."))}var cellClass=it.GOption("cellClass",this._cellDefaultClass),cell=this.A(cellClass,"cell");p_handler.S(it,cell);if(it.data){it.data.W(S.RELEASED,this._OnItemDataReleased,this)}this._OnCellCreated(it,cell)}},{key:"_OnCellCreated",value:function _OnCellCreated(it,p_cell){this._cells.A(it);p_cell.W(US.FOCUS_REQUESTED,this._OnCellRequestFocus,this);p_cell.catalog=it}},{key:"_OnItemDataReleased",value:function _OnItemDataReleased(p_data){var localCg=this.catalog;if(!localCg){return}var dataHolders=localCg.FindDataHolders(it.data);for(var i=0,n=dataHolders.length;i<n;i++){dataHolders[i].Release()}}},{key:"_OnCgItemRMd",value:function _OnCgItemRMd(p_handler,it,p_binding){if(it.data){it.data.Uw(S.RELEASED,this._OnItemDataReleased,this)}if(p_binding){this._OnCellRMd(it,p_binding);if(p_binding.parent===this){p_binding.Release()}}}},{key:"_OnCellRMd",value:function _OnCellRMd(it,p_cell){this._cells.RM(it);p_cell.Uw(US.FOCUS_REQUESTED,this._OnCellRequestFocus,this)}},{key:"_OnCellRequestFocus",value:function _OnCellRequestFocus(p_view){}},{key:"Host",value:function Host(it){var localCg=this._FetchCg();if(U.isInstanceOf(it,CgItem)){localCg.A(it);return}var view=null,viewType=it.GOption("viewType",null),dataHolders=localCg.FindDataHolders(it.data);for(var i=0,n=dataHolders.length;i<n;i++){var _view=dataHolders[i].GOption("viewType",null);if(_view&&U.isInstanceOf(_view,viewType)){_view.RequestDisplay();return}}var item=localCg.Register(it)}},{key:"_FetchCg",value:function _FetchCg(){var localCg=this.catalog;if(!localCg){var wCat=POOL.Rt(Cg);localCg=wCat.GOrCreateCg({name:"RootCell"});this.catalog=wCat}else{var cat=null;var n=localCg.count;var i=0;while(cat===null||i<n){cat=localCg.At(i);if(!U.isInstanceOf(cat,Cg)){cat=null}i++}if(!cat){localCg=localCg.GOrCreateCg({name:"RootCell"})}else{localCg=cat}}return localCg}},{key:"_CleanUp",value:function _CleanUp(){_get(_gPO(Workspace.prototype),"_CleanUp",this).call(this)}}]);return Workspace}(View);_defineProperty(Workspace,"__NFO__",NFOS.Ext({css:["@/views/workspace.css"]},View,["css"]));mdl.xp["default"]=mdl.xp=Workspace;UI.Register("nkmjs-workspace",Workspace)},{439:265,18:21,14:27,29:52,27:166,13:268}],268:[function(rq,mdl,xp){"use strict";mdl.xp["default"]=mdl.xp={U:rq(440),UDOM:rq(441),PATH:rq(442),MIME:rq(443),LOG:rq(444)}},{444:269,443:270,442:271,440:273,441:272}],269:[function(rq,mdl,xp){"use strict";var LOG=function(){function LOG(){_cCC(this,LOG)}_cC(LOG,null,[{key:"toggle",value:function toggle(p_toggle){this._enabled=p_toggle}},{key:"_",value:function _(p_text){var p_color=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"#818181";var p_bg=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!this._enabled){return}if(p_bg){console.log("%c ".concat(p_text," "),"background: ".concat(p_bg,"; color: ").concat(p_color,"; border-radius: 5px;"))}else{console.log("%c".concat(p_text," "),"color: ".concat(p_color))}}},{key:"_U",value:function _U(p_name,p_new,p_old){var p_color=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"#818181";var p_bg=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;if(!this._enabled){return}if(p_bg){console.log("%c ⭮ ".concat(p_name," 🠚 '").concat(p_new,"' %c(was '").concat(p_old,"') "),"background: ".concat(p_bg,"; color: ").concat(p_color,"; border-radius: 5px;"),"background: ".concat(p_bg,"; color: ").concat(p_color,"; font-style: italic; border-radius: 5px;"))}else{console.log("%c⭮ ".concat(p_name," 🠚 '").concat(p_new,"' %c(was '").concat(p_old,"')"),"color: ".concat(p_color),"color: ".concat(p_color,"; font-style: italic"))}}}]);return LOG}();mdl.xp["default"]=mdl.xp=LOG},{}],270:[function(rq,mdl,xp){"use strict";var __commonMIMEs=[{ext:".localStorage",desc:"A local storage object in string form",type:"text/plain"},{ext:".aac",desc:"AAC audio",type:"audio/aac"},{ext:".abw",desc:"AbiWord document",type:"application/x-abiword"},{ext:".arc",desc:"Archive document (multiple files embedded)",type:"application/x-freearc"},{ext:".avi",desc:"AVI: Audio Video Interleave",type:"video/x-msvideo"},{ext:".azw",desc:"Amazon Kindle eBook format",type:"application/vnd.amazon.ebook"},{ext:".bin",desc:"Any kind of binary data",type:"application/octet-stream"},{ext:".bmp",desc:"Windows OS/2 Bitmap Graphics",type:"image/bmp"},{ext:".bz",desc:"BZip archive",type:"application/x-bzip"},{ext:".bz2",desc:"BZip2 archive",type:"application/x-bzip2"},{ext:".csh",desc:"C-Shell script",type:"application/x-csh"},{ext:".css",desc:"Cascading Style Sheets (CSS)",type:"text/css"},{ext:".csv",desc:"Comma-separated values (CSV)",type:"text/csv"},{ext:".doc",desc:"Microsoft Word",type:"application/msword"},{ext:".docx",desc:"Microsoft Word (OpenXML)",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:".eot",desc:"MS Embedded OpenType fonts",type:"application/vnd.ms-fontobject"},{ext:".epub",desc:"Electronic publication (EPUB)",type:"application/epub+zip"},{ext:".gz",desc:"GZip Compressed Archive",type:"application/gzip"},{ext:".gif",desc:"Graphics Interchange Format (GIF)",type:"image/gif"},{ext:".htm",desc:"HyperText Markup Language (HTML)",type:"text/html"},{ext:".html",desc:"HyperText Markup Language (HTML)",type:"text/html"},{ext:".ico",desc:"Icon format",type:"image/vnd.microsoft.icon"},{ext:".ics",desc:"iCalendar format",type:"text/calendar"},{ext:".jar",desc:"Java Archive (JAR)",type:"application/java-archive"},{ext:".jpeg",desc:"JPEG images",type:"image/jpeg"},{ext:".jpg",desc:"JPEG images",type:"image/jpeg"},{ext:".js",desc:"JavaScript",type:"text/javascript"},{ext:".json",desc:"JSON format",type:"application/json"},{ext:".jsonld",desc:"JSON-LD format",type:"application/ld+json"},{ext:".mid",desc:"Musical Instrument Digital Interface (MIDI)",type:"audio/midi audio/x-midi"},{ext:".midi",desc:"Musical Instrument Digital Interface (MIDI)",type:"audio/midi audio/x-midi"},{ext:".mjs",desc:"JavaScript mdl",type:"text/javascript"},{ext:".mp3",desc:"MP3 audio",type:"audio/mpeg"},{ext:".mpeg",desc:"MPEG Video",type:"video/mpeg"},{ext:".mpkg",desc:"Apple Installer Package",type:"application/vnd.apple.installer+xml"},{ext:".odp",desc:"OpenDocument presentation document",type:"application/vnd.oasis.opendocument.presentation"},{ext:".ods",desc:"OpenDocument spreadsheet document",type:"application/vnd.oasis.opendocument.spreadsheet"},{ext:".odt",desc:"OpenDocument text document",type:"application/vnd.oasis.opendocument.text"},{ext:".oga",desc:"OGG audio",type:"audio/ogg"},{ext:".ogv",desc:"OGG video",type:"video/ogg"},{ext:".ogx",desc:"OGG",type:"application/ogg"},{ext:".opus",desc:"Opus audio",type:"audio/opus"},{ext:".otf",desc:"OpenType font",type:"font/otf"},{ext:".png",desc:"Portable Network Graphics",type:"image/png"},{ext:".pdf",desc:"Adobe Portable Document Format (PDF)",type:"application/pdf"},{ext:".php",desc:"Hypertext Preprocessor (Personal Home Page)",type:"application/x-httpd-php"},{ext:".ppt",desc:"Microsoft PowerPoint",type:"application/vnd.ms-powerpoint"},{ext:".pptx",desc:"Microsoft PowerPoint (OpenXML)",type:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:".rar",desc:"RAR archive",type:"application/vnd.rar"},{ext:".rtf",desc:"Rich Text Format (RTF)",type:"application/rtf"},{ext:".sh",desc:"Bourne shell script",type:"application/x-sh"},{ext:".svg",desc:"Scalable Vector Graphics (SVG)",type:"image/svg+xml"},{ext:".swf",desc:"Small web format (SWF) or Adobe Flash document",type:"application/x-shockwave-flash"},{ext:".tar",desc:"Tape Archive (TAR)",type:"application/x-tar"},{ext:".tif",desc:"Tagged Image File Format (TIFF)",type:"image/tiff"},{ext:".tiff",desc:"Tagged Image File Format (TIFF)",type:"image/tiff"},{ext:".ts",desc:"MPEG transport stream",type:"video/mp2t"},{ext:".ttf",desc:"TrueType Font",type:"font/ttf"},{ext:".txt",desc:"Text, (generally ASCII or ISO 8859-n)",type:"text/plain"},{ext:".vsd",desc:"Microsoft Visio",type:"application/vnd.visio"},{ext:".wav",desc:"Waveform Audio Format",type:"audio/wav"},{ext:".weba",desc:"WEBM audio",type:"audio/webm"},{ext:".webm",desc:"WEBM video",type:"video/webm"},{ext:".webp",desc:"WEBP image",type:"image/webp"},{ext:".woff",desc:"Web Open Font Format (WOFF)",type:"font/woff"},{ext:".woff2",desc:"Web Open Font Format (WOFF)",type:"font/woff2"},{ext:".xhtml",desc:"XHTML",type:"application/xhtml+xml"},{ext:".xls",desc:"Microsoft Excel",type:"application/vnd.ms-excel"},{ext:".xlsx",desc:"Microsoft Excel (OpenXML)",type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:".xml",desc:"XML",type:"text/xml"},{ext:".xul",desc:"XUL",type:"application/vnd.mozilla.xul+xml"},{ext:".zip",desc:"ZIP archive",type:"application/zip"},{ext:".3gp",desc:"3GPP audio/video container",type:"video/3gpp audio/3gpp"},{ext:".3g2",desc:"3GPP2 audio/video container",type:"video/3gpp2 audio/3gpp2"},{ext:".7z",desc:"7-zip archive",type:"application/x-7z-compressed"}];var MIME=function(){function MIME(){_cCC(this,MIME)}_cC(MIME,null,[{key:"_GenerateMap",value:function _GenerateMap(){this._map={};for(var i=0,n=__commonMIMEs.length;i<n;i++){var _m=__commonMIMEs[i];this._map[_m.ext]={mime:_m.type,desc:_m.desc}}}},{key:"mimes",get:function get(){if(!this._map){this._GenerateMap()}return this._map}},{key:"G",value:function G(p_ext){if(this._map){return this._map[p_ext]}else{this._GenerateMap()}return this._map[p_ext]}},{key:"S",value:function S(p_mime){this._map[m.ext]=p_mime}}]);return MIME}();mdl.xp["default"]=mdl.xp=MIME},{}],271:[function(rq,mdl,xp){"use strict";var LOG=rq(445);var PATH=function(){function PATH(){_cCC(this,PATH)}_cC(PATH,null,[{key:"SET",value:function SET(p_envShortcut,p_path){if(this.SYSTEM_MAP.includes(p_envShortcut)&&this.MAP.hasOwnProperty(p_envShortcut)){throw new Error("Cannot override system path (".concat(p_envShortcut,")"))}if(p_envShortcut.length<3||p_envShortcut.substr(0,1)!="%"||p_envShortcut.substr(p_envShortcut.length-1,1)!="%"){return}this.MAP[p_envShortcut]=p_path;LOG._("⮥ ".concat(p_envShortcut," ⮧ ").concat(p_path),"#7f7f7f")}},{key:"UNSET",value:function UNSET(p_envShortcut){delete this.MAP[p_envShortcut]}},{key:"Sanitize",value:function Sanitize(p_string){return p_string.split("\\").join("/")}},{key:"SHORT",value:function SHORT(p_path){p_path=this.Sanitize(p_path);for(var n in this.MAP){if(this.MAP[n]===""){continue}p_path=p_path.replace(this.MAP[n],n)}return p_path}},{key:"FULL",value:function FULL(p_path){for(var n in this.MAP){p_path=p_path.replace(n,this.MAP[n])}return this.Sanitize(p_path)}},{key:"dir",value:function dir(p_path){var split=this.Sanitize(p_path).split("/");split.pop();return split.join("/")}},{key:"name",value:function name(p_path){var splitb_=p_path.split("/");if(splitb_.length<=1){return this.stripExt(p_path)}var splitEnd=splitb_.pop();while(splitEnd===""&&splitb_.length>=1){splitEnd=splitb_.pop()}return this.stripExt(splitEnd)}},{key:"ext",value:function ext(p_path){if(p_path.includes("?")){var preSplit=p_path.split("?");p_path=preSplit[0]}var splitDot=p_path.split(".");if(splitDot.length<=1){return p_path}return".".concat(splitDot[splitDot.length-1])}},{key:"stripExt",value:function stripExt(p_path){var splitDot=p_path.split(".");if(splitDot.length<=1){return p_path}splitDot.pop();return splitDot.join(".")}},{key:"extras",get:function get(){var extras={};for(var n in this.MAP){if(!this.SYSTEM_MAP.includes(n)){extras[n]=this.MAP[n]}}return extras}}]);return PATH}();_defineProperty(PATH,"APP","%APP%");_defineProperty(PATH,"APP_DATA","%APP_DATA%");_defineProperty(PATH,"USER_DATA","%USER_DATA%");_defineProperty(PATH,"HOME","%HOME%");_defineProperty(PATH,"TEMP","%TEMP%");_defineProperty(PATH,"DOCUMENTS","%DOCUMENTS%");_defineProperty(PATH,"DESKTOP","%DESKTOP%");_defineProperty(PATH,"LOGS","%LOGS%");_defineProperty(PATH,"DOWNLOADS","%DOWNLOADS%");_defineProperty(PATH,"VIDEOS","%VIDEOS%");_defineProperty(PATH,"PICTURES","%PICTURES%");_defineProperty(PATH,"MUSIC","%MUSIC%");_defineProperty(PATH,"SYSTEM_MAP",[PATH.APP_DATA,PATH.USER_DATA,PATH.HOME,PATH.TEMP,PATH.DOCUMENTS,PATH.DESKTOP,PATH.LOGS,PATH.DOWNLOADS,PATH.VIDEOS,PATH.PICTURES,PATH.MUSIC]);_defineProperty(PATH,"MAP",{});mdl.xp["default"]=mdl.xp=PATH},{445:269}],272:[function(rq,mdl,xp){"use strict";var UTILS=rq(209);var UTILS_DOM=function(){function UTILS_DOM(){_cCC(this,UTILS_DOM)}_cC(UTILS_DOM,null,[{key:"New",value:function New(p_element){var p_attributes=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var p_container=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var element=document.createElement(p_element);if(!UTILS.isVoid(p_attributes)){for(var att in p_attributes){element.setAttribute(att,p_attributes[att])}}if(!UTILS.isVoid(p_container)){UTILS_DOM.Attach(element,p_container)}return element}},{key:"NewClone",value:function NewClone(p_element){var p_container=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var element=p_element.cloneNode(true);if(!UTILS.isVoid(p_container)){UTILS_DOM.Attach(element,p_container)}return element}},{key:"Attach",value:function Attach(p_element,p_parent){if("_wrapper"in p_parent){p_parent._wrapper.appendChild(p_element)}else{p_parent.appendChild(p_element)}}},{key:"AttachFirst",value:function AttachFirst(p_element,p_parent){var p_firstChild=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(p_firstChild&&p_parent.firstChild){p_parent.insertBefore(p_element,p_parent.firstChild)}else if(!p_firstChild&&p_parent.firstChildElement){p_parent.insertBefore(p_element,p_parent.firstChildElement)}else{p_parent.appendChild(p_element)}}},{key:"Detach",value:function Detach(p_node){if(!UTILS.isVoid(p_node.parentNode)){p_node.parentNode.removeChild(p_node)}}},{key:"ToFront",value:function ToFront(p_node){var p_frontOfNode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!UTILS.isVoid(p_node.parentNode)){if(p_frontOfNode){if(p_node.parentNode.lastChild){p_node.parentNode.insertAfter(p_node.parentNode.lastChild)}else{p_node.parentNode.appendChild(p_node)}}else{if(p_node.parentNode.lastChildElement){p_node.parentNode.insertAfter(p_node.parentNode.lastChildElement)}else if(p_node.parentNode.lastChild){p_node.parentNode.insertAfter(p_node.parentNode.lastChild)}else{p_node.parentNode.appendChild(p_node)}}}else{throw new Error("Node has no parent.")}}},{key:"ToBack",value:function ToBack(p_node){var p_backOfNode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!UTILS.isVoid(p_node.parentNode)){if(p_backOfNode){if(p_node.parentNode.firstChild){p_node.parentNode.insertBefore(p_node.parentNode.firstChild)}else{p_node.parentNode.appendChild(p_node)}}else{if(p_node.parentNode.firstChildElement){p_node.parentNode.insertBefore(p_node.parentNode.firstChildElement)}else if(p_node.parentNode.firstChild){p_node.parentNode.insertBefore(p_node.parentNode.firstChild)}else{p_node.parentNode.appendChild(p_node)}}}else{throw new Error("Node has no parent.")}}},{key:"Rect",value:function Rect(p_element){var p_relative=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var domRect=p_element.getBoundingClientRect();if(!p_relative){return domRect}var relDom=p_relative.getBoundingClientRect();return DOMRectReadOnly.fromRect({x:domRect.x-relDom.x,y:domRect.y-relDom.y,width:domRect.width,height:domRect.height})}},{key:"OverflowsY",value:function OverflowsY(p_element){return p_element.scrollHeight>p_element.clientHeight}},{key:"OverflowsX",value:function OverflowsX(p_element){return p_element.scrollWidth>p_element.clientWidth}}]);return UTILS_DOM}();mdl.xp["default"]=mdl.xp=UTILS_DOM},{209:273}],273:[function(rq,mdl,xp){"use strict";var toString=Object.prototype.toString;var UTILS=function(){function UTILS(){_cCC(this,UTILS)}_cC(UTILS,null,[{key:"isArray",value:function isArray(v){return Array.isArray(v)}},{key:"isArrayBuffer",value:function isArrayBuffer(v){return toString.call(v)==="[object ArrayBuffer]"}},{key:"isSymbol",value:function isSymbol(v){return _typeof(v)==="symbol"}},{key:"isObject",value:function isObject(v){return v!==null&&_typeof(v)==="object"}},{key:"isFunc",value:function isFunc(v){return typeof v==="function"}},{key:"isString",value:function isString(v){return typeof v==="string"}},{key:"isNumber",value:function isNumber(v){return typeof v==="number"}},{key:"isBool",value:function isBool(v){return typeof v==="boolean"}},{key:"isUndefined",value:function isUndefined(v){return typeof v==="undefined"}},{key:"isVoid",value:function isVoid(v){return typeof v==="undefined"||v===null}},{key:"isInstanceOf",value:function isInstanceOf(p_source,p_target){if(UTILS.isVoid(p_source)||UTILS.isVoid(p_target)){return false}var AisFunc=typeof p_source==="function",BisFunc=typeof p_target==="function";if(AisFunc&&BisFunc&&p_source===p_target){return true}var A=AisFunc?p_source.prototype:p_source,B=BisFunc?p_target:p_target.constructor;return A instanceof B}},{key:"isEmpty",value:function isEmpty(v){if(UTILS.isVoid(v)||v===""){return true}if(UTILS.isArray(v)){return v.length===0}if(UTILS.isObject(v)){for(var key in v){return false}return true}return false}},{key:"JSONStripEmpty",value:function JSONStripEmpty(p_key,v){if(UTILS.isEmpty(v)){return undefined}if(UTILS.isObject(v)){for(var k in v){if(v.hasOwnProperty(k)){return v}}return undefined}return v}},{key:"Default",value:function Default(){for(var i=0,n=arguments.length;i<n;i++){var val=i<0||arguments.length<=i?undefined:arguments[i];if(!UTILS.isVoid(val)){return val}}return null}},{key:"G",value:function G(p_obj,p_key){var p_fallback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(UTILS.isVoid(p_obj)){return p_fallback}var val=p_obj[p_key];if(UTILS.isVoid(val)){return p_fallback}else{return val}}},{key:"Ensure",value:function Ensure(p_obj,p_key,v){if(!(p_key in p_obj)){p_obj[p_key]=v}return p_obj}},{key:"EnsureMultiple",value:function EnsureMultiple(p_obj,p_kvp){for(var key in p_kvp){if(!(key in p_obj)){p_obj[key]=p_kvp[key]}}return p_obj}},{key:"ParsePath",value:function ParsePath(p_stringPath){if(UTILS.isVoid(p_stringPath)){return null}var parseResult={};var hasProtocol=p_stringPath.includes(UTILS.DELIM_PROTOCOL);if(hasProtocol){var protocolSplit=p_stringPath.split(UTILS.DELIM_PROTOCOL);if(protocolSplit.length!=2){throw new Error("Path '".concat(p_stringPath,"' cannot be parsed (protocol malformed)."))}parseResult.protocol=protocolSplit[0]+UTILS.DELIM_PROTOCOL;p_stringPath=protocolSplit[1]}var hasDrive=p_stringPath.includes(UTILS.DELIM_DRIVE);if(hasDrive){var driveSplit=p_stringPath.split(UTILS.DELIM_DRIVE);if(driveSplit.length>2){throw new Error("Path '".concat(p_stringPath,"' cannot be parsed (drive malformed)."))}parseResult.drive=driveSplit[0]+UTILS.DELIM_PROTOCOL;p_stringPath=driveSplit[1]}var split=p_stringPath.split(UTILS.DELIM_DIR),lastIndex=split.length-1,fname=split[lastIndex],splitEx=fname.split(UTILS.DELIM_EXT);split.splice(lastIndex,1);for(var i=0,n=split.length;i<n;i++){if(split[i]===""){split.splice(i,1);i--}}parseResult.path=split.join(UTILS.DELIM_DIR)+UTILS.DELIM_DIR;parseResult.pathArray=split;parseResult.name=splitEx[0];parseResult.ext=UTILS.DELIM_EXT+splitEx[splitEx.length-1];return parseResult}},{key:"FixSlash",value:function FixSlash(p_string){return p_string.split("\\").join("/")}},{key:"isNot",value:function isNot(v){for(var i=0,n=arguments.length<=1?0:arguments.length-1;i<n;i++){if((i+1<1||arguments.length<=i+1?undefined:arguments[i+1])===v){return false}}return true}},{key:"Append",value:function Append(p_base,p_source){if(UTILS.isVoid(p_base)){p_base={}}if(UTILS.isVoid(p_source)){return p_base}for(var member in p_source){if(p_base.hasOwnProperty(member)){continue}p_base[member]=p_source[member]}return p_base}},{key:"Merge",value:function Merge(p_base,p_source){var p_skipExisting=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(UTILS.isVoid(p_base)){return p_source}for(var member in p_source){if(!p_source.hasOwnProperty(member)){continue}var sourceValue=p_source[member];if(p_base.hasOwnProperty(member)&&!p_skipExisting){var baseValue=p_base[member];if(!UTILS.isArray(baseValue)&&UTILS.isObject(baseValue)){if(!UTILS.isArray(sourceValue)&&UTILS.isObject(sourceValue)){UTILS.Merge(baseValue,sourceValue)}else{p_base[member]=sourceValue}}else{p_base[member]=sourceValue}}else{p_base[member]=sourceValue}}return p_base}},{key:"SMissing",value:function SMissing(p_base,p_source){var p_mergeArrays=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;for(var key in p_source){var sourceValue=p_source[key];if(!p_base.hasOwnProperty(key)){if(UTILS.isArray(sourceValue)){p_base[key]=_toConsumableArray(sourceValue)}else if(UTILS.isObject()){p_base[key]=UTILS.SMissing({},sourceValue)}else{p_base[key]=sourceValue}}else{var baseValue=p_base[key];if(UTILS.isArray(baseValue)){if(UTILS.isArray(sourceValue)&&p_mergeArrays){for(var i=0,n=sourceValue.length;i<n;i++){if(!baseValue.includes(sourceValue[i])){baseValue.unshift(sourceValue[i])}}}}else if(UTILS.isObject(baseValue)&&UTILS.isObject(sourceValue)){UTILS.SMissing(baseValue,sourceValue)}else{}}}return p_base}},{key:"SOverwrite",value:function SOverwrite(p_base,p_source){for(var key in p_source){var sourceValue=p_source[key];if(!p_base.hasOwnProperty(key)){if(UTILS.isArray(sourceValue)){p_base[key]=sourceValue}else if(UTILS.isObject()){p_base[key]=sourceValue}else{p_base[key]=sourceValue}}else{var baseValue=p_base[key];if(UTILS.isArray(baseValue)){p_base[key]=sourceValue}else if(UTILS.isObject(sourceValue)){if(UTILS.isObject(baseValue)){UTILS.SOverwrite(baseValue,sourceValue)}else{p_base[key]=sourceValue}}else{p_base[key]=sourceValue}}}return p_base}},{key:"MergeArray",value:function MergeArray(p_base,p_source){if(!p_base){p_base=new Array(0);if(!p_source){return p_base}p_base=_toConsumableArray(p_source);return p_base}if(!p_source){return p_base}for(var i=0,n=p_source.length;i<n;i++){if(!p_base.includes(p_source[i])){p_base.push(p_source[i])}}return p_base}},{key:"Clone",value:function Clone(p_base){if(!UTILS.isObject(p_base)){throw new Error("Cannot Clone the non-object '".concat(p_base,"'"))}var clone={};for(var member in p_base){if(!p_base.hasOwnProperty(member)){continue}var value=p_base[member];if(value!=null){if(UTILS.isArray(value)){value=UTILS.CloneArray(value)}else if(UTILS.isObject(value)){value=UTILS.Clone(value)}}clone[member]=value}return clone}},{key:"CloneArray",value:function CloneArray(p_base){if(!UTILS.isArray(p_base)){throw new Error("Cannot CloneArray the non-array '".concat(p_base,"'"))}var arr=new Array(0);for(var i=0,n=p_base.length;i<n;i++){var arrValue=p_base[i];if(arrValue!=null){if(UTILS.isArray(arrValue)){arrValue=UTILS.CloneArray(arrValue)}else if(UTILS.isObject(arrValue)){arrValue=UTILS.Clone(arrValue)}}arr.push(arrValue)}return arr}},{key:"CamelSplit",value:function CamelSplit(p_string){return p_string.replace(/([a-z0-9])([A-Z#])/g,"$1 $2")}},{key:"ArrayDiff",value:function ArrayDiff(p_oldArray,p_newArray,p_out,p_in){if(UTILS.isVoid(p_oldArray)){if(UTILS.isVoid(p_newArray)){return}for(var i=0,n=p_newArray.length;i<n;i++){p_in.push(p_newArray[i])}return}else if(UTILS.isVoid(p_newArray)){if(UTILS.isVoid(p_oldArray)){return}for(var _i28=0,_n23=p_oldArray.length;_i28<_n23;_i28++){p_out.push(p_oldArray[_i28])}return}for(var _i29=0,_n24=p_oldArray.length;_i29<_n24;_i29++){var item=p_oldArray[_i29];if(!p_newArray.includes(item)){p_out.push(item)}}for(var _i30=0,_n25=p_newArray.length;_i30<_n25;_i30++){var _item4=p_oldArray[_i30];if(!p_newArray.includes(_item4)){p_in.push(_item4)}}}},{key:"ArrayDiffCallbacks",value:function ArrayDiffCallbacks(p_oldArray,p_newArray,p_outCallback,p_inCallback){if(UTILS.isVoid(p_oldArray)){if(UTILS.isVoid(p_newArray)){return}for(var i=0,n=p_newArray.length;i<n;i++){p_inCallback(p_newArray[i],i)}return}else if(UTILS.isVoid(p_newArray)){if(UTILS.isVoid(p_oldArray)){return}for(var _i31=0,_n26=p_oldArray.length;_i31<_n26;_i31++){p_outCallback(p_oldArray[_i31],_i31)}return}for(var _i32=0,_n27=p_oldArray.length;_i32<_n27;_i32++){var item=p_oldArray[_i32];if(!p_newArray.includes(item)){p_outCallback(item,_i32)}}for(var _i33=0,_n28=p_newArray.length;_i33<_n28;_i33++){var _item5=p_newArray[_i33];if(!p_oldArray.includes(_item5)){p_inCallback(_item5,_i33)}}}},{key:"InheritanceDistance",value:function InheritanceDistance(p_from,p_to){var dist=0;if(!UTILS.isInstanceOf(p_from,p_to)){return-1}var cl=Object.getPrototypeOf(p_from);while(cl!=null&&dist<100){if(cl===p_to){return dist}else{cl=Object.getPrototypeOf(cl)}dist++}if(dist===100){console.warn("InheritanceDistance reached 100 iterations. Stopping.")}return-1}},{key:"Clear",value:function Clear(p_obj){var p_returnNewEmpty=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;for(var member in p_obj){delete p_obj[member]}if(p_returnNewEmpty){return{}}}},{key:"DeepClear",value:function DeepClear(p_obj){var p_returnNewEmpty=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var value=null;for(var member in p_obj){value=p_obj[member];if(UTILS.isArray(value)){UTILS.DeepClearArray(value)}else if(UTILS.isObject(value)){UTILS.DeepClear(value)}p_obj[member]=null}if(p_returnNewEmpty){return{}}}},{key:"DeepClearArray",value:function DeepClearArray(p_arr){var value=null;while(p_arr.length!=0){value=p_arr.pop();if(UTILS.isArray(value)){UTILS.DeepClearArray(value)}else if(UTILS.isObject(value)){UTILS.DeepClear(value)}}}},{key:"isSame",value:function isSame(p_source,p_other){if(p_source===p_other){return true}var i=0;for(var member in p_source){i++;if(member in p_other){var value=p_source[member],otherValue=p_other[member];if(value!==otherValue){var tof=_typeof(value),otherTof=_typeof(otherValue);if(tof===otherTof){if(UTILS.isArray(value)){if(!UTILS.isSameArray(value,otherValue)){return false}}else if(tof==="object"){if(!UTILS.isSame(value,otherValue)){return false}}else{return false}}else{return false}}}else{return false}}var j=0;for(var _member in p_other){j++}if(i!=j){return false}return true}},{key:"isSameArray",value:function isSameArray(p_source,p_other){if(p_source===p_other){return true}var n=p_source.length;if(n!=p_other.length){return false}for(var i=0;i<n;i++){var value=p_source[i],otherValue=p_other[i];if(value!==otherValue){var tof=_typeof(value),otherTof=_typeof(otherValue);if(tof===otherTof){if(UTILS.isArray(value)){if(!UTILS.isSameArray(value,otherValue)){return false}}else if(tof==="object"){if(!UTILS.isSame(value,otherValue)){return false}}else{return false}}else{return false}}}return true}},{key:"Join",value:function Join(p_array,p_joinStr){var p_fromIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var p_toIndex=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;if(p_toIndex===-1){p_toIndex=p_array.length-1}var str="".concat(p_array[p_fromIndex]);p_fromIndex++;for(var i=p_fromIndex;i<=p_toIndex;i++){str+="".concat(p_join).concat(p_array[i])}return str}},{key:"Resolve",value:function Resolve(p_obj,p_path){var paths=p_path.split("."),current=p_obj;for(var i=0,n=paths.length;i<n;i++){if(current[paths[i]]===undefined){return undefined}else{current=current[paths[i]]}}return current}},{key:"ValidIdentifier",value:function ValidIdentifier(p_str){return/^[A-Za-z_][A-Za-z0-9_]*$/.test(p_str)}},{key:"StartwNumber",value:function StartwNumber(p_str){return/^\d/.test(p_str)}},{key:"ContainsAnySpace",value:function ContainsAnySpace(p_str){return p_str.includes(" "," "," ","᠎"," "," "," "," "," "," "," "," "," "," "," ","​"," "," ","　","\ufeff")}},{key:"unsafeUID",get:function get(){return"_".concat(Math.random().toString(36).substr(2,9))}},{key:"Move",value:function Move(p_array,p_currentIndex,p_newIndex){if(p_currentIndex===p_newIndex){return}if(p_currentIndex===-1){throw new Error("Item is not in array")}p_array.splice(p_newIndex,0,p_array.splice(p_currentIndex,1)[0])}}]);return UTILS}();_defineProperty(UTILS,"DELIM_PROTOCOL","://");_defineProperty(UTILS,"DELIM_DRIVE",":/");_defineProperty(UTILS,"DELIM_DIR","/");_defineProperty(UTILS,"DELIM_EXT",".");_defineProperty(UTILS,"DELIM_COLON",":");_defineProperty(UTILS,"DELIM_SEMI",";");_defineProperty(UTILS,"DELIM_COMMA",",");_defineProperty(UTILS,"DELIM_PIPE","|");mdl.xp["default"]=mdl.xp=UTILS},{}],274:[function(rq,mdl,xp){var process=mdl.xp={};var cachedSTimeout;var cachedClearTimeout;function defaultSTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSTimeout=setTimeout}else{cachedSTimeout=defaultSTimout}}catch(e){cachedSTimeout=defaultSTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSTimeout===defaultSTimout||!cachedSTimeout)&&setTimeout){cachedSTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSTimeout(fun,0)}catch(e){try{return cachedSTimeout.call(null,fun,0)}catch(e){return cachedSTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],275:[function(rq,mdl,xp){var _rq458=rq(13),U=_rq458.U,PATH=_rq458.PATH,LOG=_rq458.LOG;var _rq459=rq(24),ENV=_rq459.ENV;var paths={};paths.exe="";paths[PATH.APP]="";paths[PATH.HOME]="";paths[PATH.APP_DATA]="";paths[PATH.USER_DATA]="";paths[PATH.TEMP]="";paths[PATH.DESKTOP]="";paths[PATH.DOCUMENTS]="";paths[PATH.DOWNLOADS]="";paths[PATH.MUSIC]="";paths[PATH.PICTURES]="";paths[PATH.VIDEOS]="";paths[PATH.LOGS]="";LOG.toggle(true);ENV.instance.Start({paths:paths,argv:[],webapp:rq(446)})},{446:276,24:92,13:268}],276:[function(rq,mdl,xp){"use strict";var _rq460=rq(13),U=_rq460.U;var _rq461=rq(447),Appb_=_rq461.Appb_;var _rq462=rq(448),AutoUDialogBox=_rq462.AutoUDialogBox;var _rq463=rq(14),POOL=_rq463.POOL,COMMON_FLAG=_rq463.COMMON_FLAG;var _rq464=rq(28),DialogInfos=_rq464.DialogInfos;var _rq465=rq(417),Inputb_=_rq465.Inputb_;var _rq466=rq(30),Group=_rq466.Group,BreadcrumbItem=_rq466.BreadcrumbItem,Tag=_rq466.Tag,IShell=_rq466.IShell,WorkspaceCellNav=_rq466.WorkspaceCellNav,DialogBox=_rq466.DialogBox,DialogHandler=_rq466.DialogHandler,DialogInput=_rq466.DialogInput,Editor=_rq466.Editor,EditorEx=_rq466.EditorEx;var _rq467=rq(29),ID=_rq467.ID,DataBlock=_rq467.DataBlock,Cg=_rq467.Cg,CgItem=_rq467.CgItem;var _rq468=rq(27),UI=_rq468.UI,Layer=_rq468.Layer,Bb_=_rq468.Bb_,UF=_rq468.UF,T_bar=_rq468.T_bar,View=_rq468.View,PopIn=_rq468.PopIn,Drawer=_rq468.Drawer,TreeItem=_rq468.TreeItem,DrawerNav=_rq468.DrawerNav;var UIItemListLayer=rq(449);var UIItem=rq(450);var TestW=rq(451);var StyleguideApp=function(_Appb_){_inherits(StyleguideApp,_Appb_);var _super174=_createSuper(StyleguideApp);function StyleguideApp(){_cCC(this,StyleguideApp);return _super174.call(this)}_cC(StyleguideApp,[{key:"_In",value:function _In(){var _this21=this;_get(_gPO(StyleguideApp.prototype),"_In",this).call(this);this._mainC_=null;this._layers=[{id:"_mainC_",cl:UIItemListLayer}];this._ignore=[AutoUDialogBox,UIItem,UIItemListLayer,Group,BreadcrumbItem,DialogHandler,DialogInput,TestW];this._buttonConfigs=[{htitle:"htitle A text",label:"Label A",trigger:{thisArg:this,fn:this._TriggerTest,arg:UF.SELF},variant:UF.FRAME},{htitle:"htitle B text",group:"A",label:"Label B",toggle:{thisArg:this,fn:this._TriggerTest,arg:UF.SELF},flavor:COMMON_FLAG.WARNING},{htitle:"htitle C text",group:"A",icon:"_",label:"Label C",toggle:{thisArg:this,fn:this._TriggerTest,arg:UF.SELF}},{htitle:"htitle D text",label:"Label D",trigger:{thisArg:this,fn:this._TriggerTest,arg:UF.SELF},flavor:UF.CTA},{htitle:"htitle E text",icon:"_",trigger:{thisArg:this,fn:this._TriggerTest,arg:UF.SELF},variant:UF.FRAME,flavor:COMMON_FLAG.WARNING}];this._dialogInfos=POOL.Rt(DialogInfos);this._dialogInfos.options={title:"Title",message:"This is a message !",content:[],actions:this._buttonConfigs};var newData=function newData(p_id){var p_dirty=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var data=POOL.Rt(DataBlock);data.id=ID.New(p_id);if(p_dirty){data.Dirty()}return data};this._fakeData=[newData("Data A"),newData("Data B",true),newData("Data C",true),newData("Data D"),newData("Data E")];this._catalogSample=Cg.CreateFrom({name:"I'm a Cg !"},[{name:"item 0"},{name:"item 1",data:this._fakeData[0]},{name:"folder 0",content:[{name:"subitem 0-0"},{name:"subitem 0-1",data:this._fakeData[1]}]},{name:"item 2"},{name:"folder 1",data:this._fakeData[3],content:[{name:"subitem 1-0"},{name:"subitem 1-1"}]},{name:"item 3"}]);this._drawerCg=function(){return Cg.CreateFrom({name:"Drawer Cg"},[{name:"View",viewType:View,data:_this21._fakeData[0]},{name:"Editor",viewType:Editor,data:_this21._fakeData[1]},{name:"Extended editor",viewType:EditorEx,data:_this21._fakeData[2]},{name:"IShell",viewType:IShell,data:_this21._fakeData[3]},{name:"Another View",viewType:View,data:_this21._fakeData[4]}])};console.log(this._dialogInfos)}},{key:"AppReady",value:function AppReady(){_get(_gPO(StyleguideApp.prototype),"AppReady",this).call(this);var keys=UI.instance._uiTypes.keys;this._mainC_.SVariants([{cl:Bb_,variants:[{size:UF.SIZE_XS},{size:UF.SIZE_S},{size:UF.SIZE_L},{size:UF.SIZE_M,flavor:COMMON_FLAG.INFOS},{size:UF.SIZE_M,flavor:COMMON_FLAG.WARNING},{size:UF.SIZE_M,flavor:COMMON_FLAG.ERROR},{size:UF.SIZE_M,flavor:UF.CTA},{size:UF.SIZE_M,variant:UF.MINIMAL},{size:UF.SIZE_M,variant:UF.MINIMAL,flavor:COMMON_FLAG.INFOS},{size:UF.SIZE_M,variant:UF.MINIMAL,flavor:COMMON_FLAG.WARNING},{size:UF.SIZE_M,variant:UF.MINIMAL,flavor:COMMON_FLAG.ERROR},{size:UF.SIZE_M,variant:UF.MINIMAL,flavor:UF.CTA},{size:UF.SIZE_M,variant:UF.FRAME},{size:UF.SIZE_M,variant:UF.FRAME,flavor:COMMON_FLAG.INFOS},{size:UF.SIZE_M,variant:UF.FRAME,flavor:COMMON_FLAG.WARNING},{size:UF.SIZE_M,variant:UF.FRAME,flavor:COMMON_FLAG.ERROR},{size:UF.SIZE_M,variant:UF.FRAME,flavor:UF.CTA}],fn:this._Bind(this._OnBCreated)},{cl:IShell,fn:this._Bind(this._Stretch)},{cl:Inputb_,variants:[{size:UF.SIZE_XS},{size:UF.SIZE_S},{size:UF.SIZE_L}]},{cl:T_bar,not:[WorkspaceCellNav,DrawerNav],variants:[{size:UF.SIZE_XS},{size:UF.SIZE_S},{size:UF.SIZE_L}],fn:this._Bind(this._FillT_bar)},{cl:Tag,variants:[{},{size:UF.SIZE_XS,flavor:COMMON_FLAG.WARNING},{size:UF.SIZE_S,flavor:COMMON_FLAG.ERROR}],fn:this._Bind(this._PopInTag)},{cl:DialogBox,fn:this._Bind(this._FillDialog)},{cl:Drawer,fn:this._Bind(this._FillDrawer)},{cl:TreeItem,fn:this._Bind(this._FillTreeItem)}]);for(var i=keys.length-1;i>=0;i--){var key=keys[i];if(this._ignore.includes(key)){continue}var cl=UI.instance._uiTypes.G(key);this._mainC_.Handle(cl,key)}}},{key:"_FillT_bar",value:function _FillT_bar(p_toolbar){if(U.isInstanceOf(p_toolbar,DrawerNav)){return}for(var i=0,n=this._buttonConfigs.length;i<n;i++){p_toolbar.CreateHandle(this._buttonConfigs[i])}}},{key:"_FillDialog",value:function _FillDialog(p_dialogBox){p_dialogBox.data=this._dialogInfos}},{key:"_FillDrawer",value:function _FillDrawer(p_drawer){p_drawer.catalog=this._drawerCg();this._Stretch(p_drawer)}},{key:"_FillTreeItem",value:function _FillTreeItem(p_citem){p_citem.data=this._catalogSample}},{key:"_PopInTag",value:function _PopInTag(p_tagItem){return;PopIn.Pop({content:TestW,anchor:p_tagItem,placement:UF.TOP_LEFT})}},{key:"_OnBCreated",value:function _OnBCreated(p_btn){p_btn.trigger={fn:function fn(btn){btn._flags.Toggle(UF.TOGGLED)},arg:UF.SELF}}},{key:"_TriggerTest",value:function _TriggerTest(p_source){console.log("triggered : ".concat(p_source))}},{key:"_Stretch",value:function _Stretch(p_source){p_source.parentElement.style.setProperty("align-items","stretch")}}]);return StyleguideApp}(Appb_);mdl.xp["default"]=mdl.xp=StyleguideApp},{451:277,450:279,449:278,447:15,448:19,14:27,29:52,28:81,27:166,417:218,30:234,13:268}],277:[function(rq,mdl,xp){"use strict";var _rq469=rq(27),UI=_rq469.UI,W=_rq469.W;var TestW=function(_W9){_inherits(TestW,_W9);var _super175=_createSuper(TestW);function TestW(){_cCC(this,TestW);return _super175.call(this)}_cC(TestW,[{key:"_Style",value:function _Style(){return{":host":{"background-color":"rgb(0,255,0,0.5)",width:"150px",height:"150px",margin:"5px"}}}}]);return TestW}(W);mdl.xp["default"]=mdl.xp=TestW;UI.Register("nkmjs-test-widget",TestW)},{27:166}],278:[function(rq,mdl,xp){"use strict";var _rq470=rq(13),U=_rq470.U,UDOM=_rq470.UDOM;var _rq471=rq(27),UI=_rq471.UI,Layer=_rq471.Layer,UF=_rq471.UF;var _rq472=rq(34),CSS=_rq472.CSS;var UIItem=rq(450);var UIItemListLayer=function(_Layer3){_inherits(UIItemListLayer,_Layer3);var _super176=_createSuper(UIItemListLayer);function UIItemListLayer(){_cCC(this,UIItemListLayer);return _super176.call(this)}_cC(UIItemListLayer,[{key:"_In",value:function _In(){_get(_gPO(UIItemListLayer.prototype),"_In",this).call(this);this._variants=new Array(0);this._itemC_=null}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{display:"flex"},".list-ctnr":{width:"100%",display:"flex","flex-flow":"row wrap","overflow-y":"scroll"},".item":{flex:"1 1 auto","min-width":"250px","min-height":"150px"}},_get(_gPO(UIItemListLayer.prototype),"_Style",this).call(this))}},{key:"_R",value:function _R(){this._itemC_=UDOM.New("div",{class:"list-ctnr"},this)}},{key:"SVariants",value:function SVariants(p_variants){this._variants=p_variants}},{key:"Handle",value:function Handle(p_id,p_class){var variants=null;var callback=null;for(var i=0,n=this._variants.length;i<n;i++){var v=this._variants[i];if(U.isInstanceOf(p_class,v.cl)&&(!v.not||!v.not.includes(p_class))){variants=v.variants;callback=v.fn}}if(variants){for(var _i34=0,_n29=variants.length;_i34<_n29;_i34++){var item=this.A(UIItem,"item",this._itemC_);item.Display(p_id,p_class,variants[_i34]);if(callback){callback(item._sample)}}}else{var _item6=this.A(UIItem,"item",this._itemC_);_item6.Display(p_id,p_class);if(callback){callback(_item6._sample)}}}}]);return UIItemListLayer}(Layer);_defineProperty(UIItemListLayer,"__default_orientation",UF.VERTICAL);mdl.xp["default"]=mdl.xp=UIItemListLayer;UI.Register("nkmjs-ui-item-list-layer",UIItemListLayer)},{450:279,34:155,27:166,13:268}],279:[function(rq,mdl,xp){"use strict";var _rq473=rq(13),U=_rq473.U,UDOM=_rq473.UDOM,PATH=_rq473.PATH;var _rq474=rq(27),UI=_rq474.UI,TextManipulator=_rq474.TextManipulator,dOC_=_rq474.dOC_;var _rq475=rq(34),CSS=_rq475.CSS;var UIItem=function(_dOContain3){_inherits(UIItem,_dOContain3);var _super177=_createSuper(UIItem);function UIItem(){_cCC(this,UIItem);return _super177.call(this)}_cC(UIItem,[{key:"_In",value:function _In(){_get(_gPO(UIItem.prototype),"_In",this).call(this);this._label=null;this._errorTf=null;this._sample=null;this._visibilityRatio=0;this._isPainted=false}},{key:"_Style",value:function _Style(){return CSS.Extends({":host":{margin:"5px",padding:"5px",border:"1px solid #ffffff10",display:"flex","flex-flow":"column wrap",overflow:"hidden"},".label":{"margin-block-start":0,"margin-block-end":0,"margin-bottom":"5px",transform:"scale(0.8,0.8)"},".item-wrapper":{position:"relative",padding:"5px",display:"flex","align-items":"center","justify-content":"center",flex:"1 1 auto","background-image":"url('img/checker_20a.png')",overflow:"hidden","min-width":0,"min-height":0},".content":{flex:"1 1 auto"},"p.error":{color:"#ff0000"}},_get(_gPO(UIItem.prototype),"_Style",this).call(this))}},{key:"_OnPaintChange",value:function _OnPaintChange(v){}},{key:"_R",value:function _R(){this._label=new TextManipulator(UDOM.New("p",{class:"label"},this));this._wrapper=UDOM.New("div",{class:"item-wrapper"},this);this._errorTf=new TextManipulator(UDOM.New("p",{class:"error"},this))}},{key:"Display",value:function Display(p_id,p_class,p_variant){var variants=" ";try{this._errorTf.S(null);this._sample=this.A(p_class,"content",this._wrapper);if(p_variant){for(var key in p_variant){if(key==="flags"){var flags=p_variant.flags;for(var i=0,n=flags.length;i<n;i++){this._flags.S(flags[i],true)}}else{this._sample[key]=p_variant[key];variants+="".concat(p_variant[key]," / ")}}}if("title"in this._sample){this._sample.title=U.CamelSplit("".concat(p_class.name,"Title"))}if("subtitle"in this._sample){this._sample.subtitle=U.CamelSplit("".concat(p_class.name,"Subtitle"))}if("label"in this._sample){this._sample.label=U.CamelSplit("".concat(p_class.name,"Label"))}}catch(e){this._errorTf.S(e.message);this.order=-1;throw e;console.error(e)}this._label.S("<b>".concat(p_id,"</b><br/><i>").concat(p_class.name,"</i><br/><i><small>.").concat(variants,"</small></i>"))}}]);return UIItem}(dOC_);_defineProperty(UIItem,"__NFO__",{css:["@/common.css","css/test.css"]});_defineProperty(UIItem,"__usePaintCallback",true);mdl.xp["default"]=mdl.xp=UIItem;UI.Register("nkmjs-ui-item",UIItem)},{34:155,27:166,13:268}]},{},[275]);
